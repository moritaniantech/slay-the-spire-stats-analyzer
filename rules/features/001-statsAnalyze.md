# カードやレリックの統計情報の集計機能について

## 機能概要
- カードとレリックごとに、プレイ履歴から集計して以下の項目を集計してください。項目の詳細は、｢# 機能詳細｣の項目を参照してください。
  - 取得率(通算)
  - 取得率(勝利のみ)
  - 取得率(直近50戦)
  - 勝率(通算)
  - 勝率(直近50戦)

## 機能詳細
### カードについて
- 前提
  - カードはIRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSE, STATUSの7種類が存在します。(Path: /Users/momomo/Documents/Dev/slay-the-spire-stats-analyzer/src/assets/cards/allCards.json)
- 共通事項
  - 取得率や勝率はIRONCLAD, SILENT, DEFECT, WATCHERのキャラクターごとに集計してください。
  - 各キャラの文字色は以下の通りにしてください。
    - IRONCLAD:#ff6563
    - SILENT:#7fff00
    - DEFECT:#87ceeb
    - WATCHER:#a600ff
- 集計する項目
  - 取得率(通算)
    - 計算式は(取得回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに取得率を算出してください。
      - 取得回数:プレイの中で少なくとも1回取得された場合は、取得回数に1を加算してください。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとの合計プレイ回数を取得してください。キャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず総計を取得してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 取得率(勝利のみ)
    - 計算式は(勝利時の取得回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに取得率を算出してください。
      - 勝利時の取得回数:勝利したプレイかつ、プレイの中で少なくとも1回取得された場合は、取得回数に1を加算してください。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとに分けてください。このキャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず合計してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 勝率(通算)
    - 計算式は(勝利回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに勝率を算出してください。
      - 勝利回数:キャラクターごとに、対象のカードが取得され、かつ勝利したプレイのみ、勝利回数としてカウントしてください。勝利？は勝利としてカウントしません。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとに分けてください。このキャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず合計してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 勝率(直近50戦)
    - 計算式は(直近50戦の勝利回数/50)として計算してください。
      - キャラクターごとに勝率を算出してください。
      - 直近50戦の勝利回数:キャラクターごとに、対象のカードが取得され、かつ勝利したプレイのみ、勝利回数としてカウントしてください。ただし、各キャラクターの直近50戦のみ集計してください。勝利？は勝利としてカウントしません。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。

### レリックについて
- 前提
  - レリックはIRONCLAD, SILENT, DEFECT, WATCHER, COLORLESSの5種類が存在します。(Path: /Users/momomo/Documents/Dev/slay-the-spire-stats-analyzer/src/assets/relics/relics.json)
- 共通事項
  - 取得率や勝率はIRONCLAD, SILENT, DEFECT, WATCHERのキャラクターごとに集計してください。
  - 各キャラの文字色は以下の通りにしてください。
    - IRONCLAD:#ff6563
    - SILENT:#7fff00
    - DEFECT:#87ceeb
    - WATCHER:#a600ff
- 集計する項目
  - 取得率(通算)
    - 計算式は(取得回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに取得率を算出してください。
      - 取得回数:プレイで最終的にレリックを所持していたプレイにつき、取得回数に1を加算してください。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとの合計プレイ回数を取得してください。キャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず総計を取得してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESSについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 取得率(勝利のみ)
    - 計算式は(勝利時の取得回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに取得率を算出してください。
      - 勝利時の取得回数:勝利したプレイかつ、プレイで最終的にレリックを所持していたプレイにつき、取得回数に1を加算してください。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとに分けてください。このキャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず合計してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 勝率(通算)
    - 計算式は(勝利回数/キャラクターごとの合計プレイ回数)として計算してください。
      - キャラクターごとに勝率を算出してください。
      - 勝利回数:キャラクターごとに、対象のレリックを所持した状態、かつ勝利したプレイのみ、勝利回数としてカウントしてください。勝利？は勝利としてカウントしません。
      - キャラクターごとの合計プレイ回数:キャラクターごとに取得率を計算するため、キャラクターごとに分けてください。このキャラクターごとの合計プレイ回数は勝利/勝利？/敗北に関わらず合計してください。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESS, CURSEについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。
  - 勝率(直近50戦)
    - 計算式は(直近50戦の勝利回数/50)として計算してください。
      - キャラクターごとに勝率を算出してください。
      - 直近50戦の勝利回数:キャラクターごとに、対象のレリックを所持した状態、かつ勝利したプレイのみ、勝利回数としてカウントしてください。勝利？は勝利としてカウントしません。ただし、各キャラクターの直近50戦のみ集計してください。勝利？は勝利としてカウントしません。
    - IRONCLAD, SILENT, DEFECT, WATCHER, COLORLESSについて各キャラクターすべて算出するようにしてください。ただし、プレイの中にデータが存在しない場合は0%と表示していただければ問題ありません。

## 機能UI
- カードやレリックにカーソルを重ねた際に｢# 機能概要｣及び｢# 機能詳細｣に記載した内容が表示されるようにしてください。
- カーソルの近くに表示されるようにしてください。
- ｢# 機能詳細｣に記載した通り、各キャラクターの数値を算出する際に、以下の色を使用してください。
    - IRONCLAD:#ff6563
    - SILENT:#7fff00
    - DEFECT:#87ceeb
    - WATCHER:#a600ff


## 機能を追加するアプリケーションの箇所
- アプリケーションにおいて、以下の既存機能に追加するようにしてください。
  - カード一覧
  - レリック一覧
  - プレイ履歴 > プレイ詳細
    - デッキ一覧
    - レリック一覧
- 上述の既存機能が実装されているファイルを必ず読み込んでください。
  - 基本的には以下のPathに保存されていますが、他のファイルも読み込むようにしてください。
  - Path: /Users/momomo/Documents/Dev/slay-the-spire-stats-analyzer/src/components

## 注意
- アプリケーションの既存機能を破壊することなく、コーディングしてください。
- セキュリティには注意して実装してください。
- SQLiteのデータベーススキーマを表示するようにORMを用いてください。
  - データベースの構造をORMでドキュメントに残してください。
  - 保存場所のディレクトリはお任せしますが、他のディレクトリ構造も鑑みて作成してください。
− ブラウザで使用することを想定した機能は不必要です。