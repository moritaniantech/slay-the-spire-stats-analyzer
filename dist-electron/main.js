"use strict";var _f=Object.create;var on=Object.defineProperty;var Sf=Object.getOwnPropertyDescriptor;var Af=Object.getOwnPropertyNames;var bf=Object.getPrototypeOf,Tf=Object.prototype.hasOwnProperty;var Rf=(n,c,s)=>c in n?on(n,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[c]=s;var Cf=(n,c,s,f)=>{if(c&&typeof c=="object"||typeof c=="function")for(let l of Af(c))!Tf.call(n,l)&&l!==s&&on(n,l,{get:()=>c[l],enumerable:!(f=Sf(c,l))||f.enumerable});return n};var Of=(n,c,s)=>(s=n!=null?_f(bf(n)):{},Cf(c||!n||!n.__esModule?on(s,"default",{value:n,enumerable:!0}):s,n));var Te=(n,c,s)=>Rf(n,typeof c!="symbol"?c+"":c,s);const ce=require("electron"),Pe=require("path"),Ye=require("fs"),zr=require("events"),Er=require("crypto"),Pf=require("tty"),Vr=require("util"),wt=require("os"),wr=require("stream"),jt=require("url"),Df=require("string_decoder"),If=require("constants"),ku=require("assert"),_r=require("child_process"),qu=require("zlib"),Mu=require("http"),Nf=require("https");function Bu(n){const c=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const s in n)if(s!=="default"){const f=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(c,s,f.get?f:{enumerable:!0,get:()=>n[s]})}}return c.default=n,Object.freeze(c)}const ke=Bu(Pe),pt=Bu(Ye),Ff=1;async function Lf(n){return new Promise((c,s)=>{n.serialize(()=>{n.run(`
        CREATE TABLE IF NOT EXISTS settings (
          key TEXT PRIMARY KEY,
          value TEXT NOT NULL
        )
      `,f=>{if(f){s(f);return}}),n.run(`
        CREATE TABLE IF NOT EXISTS runs (
          id TEXT PRIMARY KEY,
          character TEXT NOT NULL,
          victory INTEGER NOT NULL,
          ascension_level INTEGER NOT NULL,
          floor_reached INTEGER NOT NULL,
          playtime INTEGER NOT NULL,
          score INTEGER NOT NULL,
          timestamp INTEGER NOT NULL,
          run_data TEXT NOT NULL,
          created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        )
      `,f=>{if(f){s(f);return}c()})})})}async function xf(n){return new Promise((c,s)=>{n.serialize(()=>{n.run("DROP TABLE IF EXISTS runs",f=>{if(f){s(f);return}}),n.run("DROP TABLE IF EXISTS settings",f=>{if(f){s(f);return}c()})})})}const $f=Object.freeze(Object.defineProperty({__proto__:null,down:xf,up:Lf,version:Ff},Symbol.toStringTag,{value:"Module"})),Uf=[$f];async function kf(n){return new Promise((c,s)=>{n.run(`
      CREATE TABLE IF NOT EXISTS schema_versions (
        version INTEGER PRIMARY KEY,
        applied_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `,f=>{if(f){s(f);return}c()})})}async function qf(n){return new Promise((c,s)=>{n.get("SELECT MAX(version) as version FROM schema_versions",(f,l)=>{if(f){if(f.message.includes("no such table")){c(0);return}s(f);return}c((l==null?void 0:l.version)||0)})})}async function Mf(n){try{await kf(n);const c=await qf(n),s=Uf.filter(f=>f.version>c);if(s.length===0){console.log("データベースは最新です。");return}console.log(`${s.length}個のマイグレーションを適用します...`);for(const f of s)try{await f.up(n),await new Promise((l,r)=>{n.run("INSERT INTO schema_versions (version) VALUES (?)",[f.version],e=>{if(e){r(e);return}l()})}),console.log(`マイグレーション version ${f.version} を適用しました。`)}catch(l){throw console.error(`マイグレーション version ${f.version} の適用に失敗しました:`,l),l}console.log("マイグレーションが完了しました。")}catch(c){throw console.error("マイグレーション中にエラーが発生しました:",c),c}}function ju(n,c){try{const s=ke.normalize(n);return c.some(l=>{const r=ke.normalize(l),e=ke.relative(r,s);return e&&!e.startsWith("..")&&!ke.isAbsolute(e)})?!0:(console.error("Invalid file path: Directory traversal attempt detected"),!1)}catch(s){return console.error("Error validating file path:",s),!1}}async function Hu(n,c){if(!ju(n,c))throw new Error("Invalid file path");try{return await pt.promises.readFile(n,"utf-8")}catch(s){throw console.error("Error reading file:",s),s}}async function Bf(n,c,s){if(!ju(n,s))throw new Error("Invalid file path");try{await pt.promises.writeFile(n,c,"utf-8")}catch(f){throw console.error("Error writing file:",f),f}}var it=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var an={},sn={},Ot={},la;function $o(){if(la)return Ot;la=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.CancellationError=Ot.CancellationToken=void 0;const n=zr;let c=class extends n.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(l){this.removeParentCancelHandler(),this._parent=l,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(l){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,l!=null&&(this.parent=l)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(l){this.cancelled?l():this.once("cancel",l)}createPromise(l){if(this.cancelled)return Promise.reject(new s);const r=()=>{if(e!=null)try{this.removeListener("cancel",e),e=null}catch{}};let e=null;return new Promise((i,t)=>{let u=null;if(e=()=>{try{u!=null&&(u(),u=null)}finally{t(new s)}},this.cancelled){e();return}this.onCancel(e),l(i,t,o=>{u=o})}).then(i=>(r(),i)).catch(i=>{throw r(),i})}removeParentCancelHandler(){const l=this._parent;l!=null&&this.parentCancelHandler!=null&&(l.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};Ot.CancellationToken=c;class s extends Error{constructor(){super("cancelled")}}return Ot.CancellationError=s,Ot}var Ge={},Nr={exports:{}},Fr={exports:{}},ln,ua;function Hf(){if(ua)return ln;ua=1;var n=1e3,c=n*60,s=c*60,f=s*24,l=f*7,r=f*365.25;ln=function(o,d){d=d||{};var a=typeof o;if(a==="string"&&o.length>0)return e(o);if(a==="number"&&isFinite(o))return d.long?t(o):i(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function e(o){if(o=String(o),!(o.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(d){var a=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return a*r;case"weeks":case"week":case"w":return a*l;case"days":case"day":case"d":return a*f;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*c;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function i(o){var d=Math.abs(o);return d>=f?Math.round(o/f)+"d":d>=s?Math.round(o/s)+"h":d>=c?Math.round(o/c)+"m":d>=n?Math.round(o/n)+"s":o+"ms"}function t(o){var d=Math.abs(o);return d>=f?u(o,d,f,"day"):d>=s?u(o,d,s,"hour"):d>=c?u(o,d,c,"minute"):d>=n?u(o,d,n,"second"):o+" ms"}function u(o,d,a,p){var v=d>=a*1.5;return Math.round(o/a)+" "+p+(v?"s":"")}return ln}var un,ca;function Gu(){if(ca)return un;ca=1;function n(c){f.debug=f,f.default=f,f.coerce=u,f.disable=i,f.enable=r,f.enabled=t,f.humanize=Hf(),f.destroy=o,Object.keys(c).forEach(d=>{f[d]=c[d]}),f.names=[],f.skips=[],f.formatters={};function s(d){let a=0;for(let p=0;p<d.length;p++)a=(a<<5)-a+d.charCodeAt(p),a|=0;return f.colors[Math.abs(a)%f.colors.length]}f.selectColor=s;function f(d){let a,p=null,v,g;function m(..._){if(!m.enabled)return;const R=m,O=Number(new Date),P=O-(a||O);R.diff=P,R.prev=a,R.curr=O,a=O,_[0]=f.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let U=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(S,b)=>{if(S==="%%")return"%";U++;const E=f.formatters[b];if(typeof E=="function"){const M=_[U];S=E.call(R,M),_.splice(U,1),U--}return S}),f.formatArgs.call(R,_),(R.log||f.log).apply(R,_)}return m.namespace=d,m.useColors=f.useColors(),m.color=f.selectColor(d),m.extend=l,m.destroy=f.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(v!==f.namespaces&&(v=f.namespaces,g=f.enabled(d)),g),set:_=>{p=_}}),typeof f.init=="function"&&f.init(m),m}function l(d,a){const p=f(this.namespace+(typeof a>"u"?":":a)+d);return p.log=this.log,p}function r(d){f.save(d),f.namespaces=d,f.names=[],f.skips=[];const a=(typeof d=="string"?d:"").trim().replace(" ",",").split(",").filter(Boolean);for(const p of a)p[0]==="-"?f.skips.push(p.slice(1)):f.names.push(p)}function e(d,a){let p=0,v=0,g=-1,m=0;for(;p<d.length;)if(v<a.length&&(a[v]===d[p]||a[v]==="*"))a[v]==="*"?(g=v,m=p,v++):(p++,v++);else if(g!==-1)v=g+1,m++,p=m;else return!1;for(;v<a.length&&a[v]==="*";)v++;return v===a.length}function i(){const d=[...f.names,...f.skips.map(a=>"-"+a)].join(",");return f.enable(""),d}function t(d){for(const a of f.skips)if(e(d,a))return!1;for(const a of f.names)if(e(d,a))return!0;return!1}function u(d){return d instanceof Error?d.stack||d.message:d}function o(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}return un=n,un}var fa;function Gf(){return fa||(fa=1,function(n,c){c.formatArgs=f,c.save=l,c.load=r,c.useColors=s,c.storage=e(),c.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),c.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function f(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;t.splice(1,0,u,"color: inherit");let o=0,d=0;t[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(o++,a==="%c"&&(d=o))}),t.splice(d,0,u)}c.log=console.debug||console.log||(()=>{});function l(t){try{t?c.storage.setItem("debug",t):c.storage.removeItem("debug")}catch{}}function r(){let t;try{t=c.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function e(){try{return localStorage}catch{}}n.exports=Gu()(c);const{formatters:i}=n.exports;i.j=function(t){try{return JSON.stringify(t)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(Fr,Fr.exports)),Fr.exports}var Lr={exports:{}},cn,da;function Wf(){return da||(da=1,cn=(n,c)=>{c=c||process.argv;const s=n.startsWith("-")?"":n.length===1?"-":"--",f=c.indexOf(s+n),l=c.indexOf("--");return f!==-1&&(l===-1?!0:f<l)}),cn}var fn,ha;function zf(){if(ha)return fn;ha=1;const n=wt,c=Wf(),s=process.env;let f;c("no-color")||c("no-colors")||c("color=false")?f=!1:(c("color")||c("colors")||c("color=true")||c("color=always"))&&(f=!0),"FORCE_COLOR"in s&&(f=s.FORCE_COLOR.length===0||parseInt(s.FORCE_COLOR,10)!==0);function l(i){return i===0?!1:{level:i,hasBasic:!0,has256:i>=2,has16m:i>=3}}function r(i){if(f===!1)return 0;if(c("color=16m")||c("color=full")||c("color=truecolor"))return 3;if(c("color=256"))return 2;if(i&&!i.isTTY&&f!==!0)return 0;const t=f?1:0;if(process.platform==="win32"){const u=n.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(u=>u in s)||s.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if(s.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in s){const u=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:(s.TERM==="dumb",t)}function e(i){const t=r(i);return l(t)}return fn={supportsColor:e,stdout:e(process.stdout),stderr:e(process.stderr)},fn}var pa;function Vf(){return pa||(pa=1,function(n,c){const s=Pf,f=Vr;c.init=o,c.log=i,c.formatArgs=r,c.save=t,c.load=u,c.useColors=l,c.destroy=f.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),c.colors=[6,2,3,4,5,1];try{const a=zf();a&&(a.stderr||a).level>=2&&(c.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}c.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,p)=>{const v=p.substring(6).toLowerCase().replace(/_([a-z])/g,(m,_)=>_.toUpperCase());let g=process.env[p];return/^(yes|on|true|enabled)$/i.test(g)?g=!0:/^(no|off|false|disabled)$/i.test(g)?g=!1:g==="null"?g=null:g=Number(g),a[v]=g,a},{});function l(){return"colors"in c.inspectOpts?!!c.inspectOpts.colors:s.isatty(process.stderr.fd)}function r(a){const{namespace:p,useColors:v}=this;if(v){const g=this.color,m="\x1B[3"+(g<8?g:"8;5;"+g),_=`  ${m};1m${p} \x1B[0m`;a[0]=_+a[0].split(`
`).join(`
`+_),a.push(m+"m+"+n.exports.humanize(this.diff)+"\x1B[0m")}else a[0]=e()+p+" "+a[0]}function e(){return c.inspectOpts.hideDate?"":new Date().toISOString()+" "}function i(...a){return process.stderr.write(f.formatWithOptions(c.inspectOpts,...a)+`
`)}function t(a){a?process.env.DEBUG=a:delete process.env.DEBUG}function u(){return process.env.DEBUG}function o(a){a.inspectOpts={};const p=Object.keys(c.inspectOpts);for(let v=0;v<p.length;v++)a.inspectOpts[p[v]]=c.inspectOpts[p[v]]}n.exports=Gu()(c);const{formatters:d}=n.exports;d.o=function(a){return this.inspectOpts.colors=this.useColors,f.inspect(a,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},d.O=function(a){return this.inspectOpts.colors=this.useColors,f.inspect(a,this.inspectOpts)}}(Lr,Lr.exports)),Lr.exports}var ma;function Yf(){return ma||(ma=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Nr.exports=Gf():Nr.exports=Vf()),Nr.exports}var xr={},ga;function Yr(){if(ga)return xr;ga=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.newError=n;function n(c,s){const f=new Error(c);return f.code=s,f}return xr}var Xt={},va;function Wu(){if(va)return Xt;va=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.ProgressCallbackTransform=void 0;const n=wr;let c=class extends n.Transform{constructor(f,l,r){super(),this.total=f,this.cancellationToken=l,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(f,l,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}this.transferred+=f.length,this.delta+=f.length;const e=Date.now();e>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=e+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((e-this.start)/1e3))}),this.delta=0),r(null,f)}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,f(null)}};return Xt.ProgressCallbackTransform=c,Xt}var ya;function Xf(){if(ya)return Ge;ya=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.DigestTransform=Ge.HttpExecutor=Ge.HttpError=void 0,Ge.createHttpError=u,Ge.parseJson=a,Ge.configureRequestOptionsFromUrl=v,Ge.configureRequestUrl=g,Ge.safeGetHeader=R,Ge.configureRequestOptions=P,Ge.safeStringifyJson=U;const n=Er,c=Yf(),s=Ye,f=wr,l=jt,r=$o(),e=Yr(),i=Wu(),t=(0,c.default)("electron-builder");function u(T,S=null){return new d(T.statusCode||-1,`${T.statusCode} ${T.statusMessage}`+(S==null?"":`
`+JSON.stringify(S,null,"  "))+`
Headers: `+U(T.headers),S)}const o=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class d extends Error{constructor(S,b=`HTTP error: ${o.get(S)||S}`,E=null){super(b),this.statusCode=S,this.description=E,this.name="HttpError",this.code=`HTTP_ERROR_${S}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Ge.HttpError=d;function a(T){return T.then(S=>S==null||S.length===0?null:JSON.parse(S))}class p{constructor(){this.maxRedirects=10}request(S,b=new r.CancellationToken,E){P(S);const M=E==null?void 0:JSON.stringify(E),$=M?Buffer.from(M):void 0;if($!=null){t(M);const{headers:x,...q}=S;S={method:"post",headers:{"Content-Type":"application/json","Content-Length":$.length,...x},...q}}return this.doApiRequest(S,b,x=>x.end($))}doApiRequest(S,b,E,M=0){return t.enabled&&t(`Request: ${U(S)}`),b.createPromise(($,x,q)=>{const I=this.createRequest(S,D=>{try{this.handleResponse(D,S,b,$,x,M,E)}catch(F){x(F)}});this.addErrorAndTimeoutHandlers(I,x,S.timeout),this.addRedirectHandlers(I,S,x,M,D=>{this.doApiRequest(D,b,E,M).then($).catch(x)}),E(I,x),q(()=>I.abort())})}addRedirectHandlers(S,b,E,M,$){}addErrorAndTimeoutHandlers(S,b,E=60*1e3){this.addTimeOutHandler(S,b,E),S.on("error",b),S.on("aborted",()=>{b(new Error("Request has been aborted by the server"))})}handleResponse(S,b,E,M,$,x,q){var I;if(t.enabled&&t(`Response: ${S.statusCode} ${S.statusMessage}, request options: ${U(b)}`),S.statusCode===404){$(u(S,`method: ${b.method||"GET"} url: ${b.protocol||"https:"}//${b.hostname}${b.port?`:${b.port}`:""}${b.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(S.statusCode===204){M();return}const D=(I=S.statusCode)!==null&&I!==void 0?I:0,F=D>=300&&D<400,k=R(S,"location");if(F&&k!=null){if(x>this.maxRedirects){$(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(k,b),E,q,x).then(M).catch($);return}S.setEncoding("utf8");let K="";S.on("error",$),S.on("data",W=>K+=W),S.on("end",()=>{try{if(S.statusCode!=null&&S.statusCode>=400){const W=R(S,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(fe=>fe.includes("json"))!=null:W.includes("json"));$(u(S,`method: ${b.method||"GET"} url: ${b.protocol||"https:"}//${b.hostname}${b.port?`:${b.port}`:""}${b.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(K)):K}
          `))}else M(K.length===0?null:K)}catch(W){$(W)}})}async downloadToBuffer(S,b){return await b.cancellationToken.createPromise((E,M,$)=>{const x=[],q={headers:b.headers||void 0,redirect:"manual"};g(S,q),P(q),this.doDownload(q,{destination:null,options:b,onCancel:$,callback:I=>{I==null?E(Buffer.concat(x)):M(I)},responseHandler:(I,D)=>{let F=0;I.on("data",k=>{if(F+=k.length,F>524288e3){D(new Error("Maximum allowed size is 500 MB"));return}x.push(k)}),I.on("end",()=>{D(null)})}},0)})}doDownload(S,b,E){const M=this.createRequest(S,$=>{if($.statusCode>=400){b.callback(new Error(`Cannot download "${S.protocol||"https:"}//${S.hostname}${S.path}", status ${$.statusCode}: ${$.statusMessage}`));return}$.on("error",b.callback);const x=R($,"location");if(x!=null){E<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions(x,S),b,E++):b.callback(this.createMaxRedirectError());return}b.responseHandler==null?O(b,$):b.responseHandler($,b.callback)});this.addErrorAndTimeoutHandlers(M,b.callback,S.timeout),this.addRedirectHandlers(M,S,b.callback,E,$=>{this.doDownload($,b,E++)}),M.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(S,b,E){S.on("socket",M=>{M.setTimeout(E,()=>{S.abort(),b(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(S,b){const E=v(S,{...b}),M=E.headers;if(M!=null&&M.authorization){const $=new l.URL(S);($.hostname.endsWith(".amazonaws.com")||$.searchParams.has("X-Amz-Credential"))&&delete M.authorization}return E}static retryOnServerError(S,b=3){for(let E=0;;E++)try{return S()}catch(M){if(E<b&&(M instanceof d&&M.isServerError()||M.code==="EPIPE"))continue;throw M}}}Ge.HttpExecutor=p;function v(T,S){const b=P(S);return g(new l.URL(T),b),b}function g(T,S){S.protocol=T.protocol,S.hostname=T.hostname,T.port?S.port=T.port:S.port&&delete S.port,S.path=T.pathname+T.search}class m extends f.Transform{get actual(){return this._actual}constructor(S,b="sha512",E="base64"){super(),this.expected=S,this.algorithm=b,this.encoding=E,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,n.createHash)(b)}_transform(S,b,E){this.digester.update(S),E(null,S)}_flush(S){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(b){S(b);return}S(null)}validate(){if(this._actual==null)throw(0,e.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,e.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Ge.DigestTransform=m;function _(T,S,b){return T!=null&&S!=null&&T!==S?(b(new Error(`checksum mismatch: expected ${S} but got ${T} (X-Checksum-Sha2 header)`)),!1):!0}function R(T,S){const b=T.headers[S];return b==null?null:Array.isArray(b)?b.length===0?null:b[b.length-1]:b}function O(T,S){if(!_(R(S,"X-Checksum-Sha2"),T.options.sha2,T.callback))return;const b=[];if(T.options.onProgress!=null){const x=R(S,"content-length");x!=null&&b.push(new i.ProgressCallbackTransform(parseInt(x,10),T.options.cancellationToken,T.options.onProgress))}const E=T.options.sha512;E!=null?b.push(new m(E,"sha512",E.length===128&&!E.includes("+")&&!E.includes("Z")&&!E.includes("=")?"hex":"base64")):T.options.sha2!=null&&b.push(new m(T.options.sha2,"sha256","hex"));const M=(0,s.createWriteStream)(T.destination);b.push(M);let $=S;for(const x of b)x.on("error",q=>{M.close(),T.options.cancellationToken.cancelled||T.callback(q)}),$=$.pipe(x);M.on("finish",()=>{M.close(T.callback)})}function P(T,S,b){b!=null&&(T.method=b),T.headers={...T.headers};const E=T.headers;return S!=null&&(E.authorization=S.startsWith("Basic")||S.startsWith("Bearer")?S:`token ${S}`),E["User-Agent"]==null&&(E["User-Agent"]="electron-builder"),(b==null||b==="GET"||E["Cache-Control"]==null)&&(E["Cache-Control"]="no-cache"),T.protocol==null&&process.versions.electron!=null&&(T.protocol="https:"),T}function U(T,S){return JSON.stringify(T,(b,E)=>b.endsWith("Authorization")||b.endsWith("authorization")||b.endsWith("Password")||b.endsWith("PASSWORD")||b.endsWith("Token")||b.includes("password")||b.includes("token")||S!=null&&S.has(b)?"<stripped sensitive data>":E,2)}return Ge}var Jt={},Ea;function Jf(){if(Ea)return Jt;Ea=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.githubUrl=n,Jt.getS3LikeProviderBaseUrl=c;function n(r,e="github.com"){return`${r.protocol||"https"}://${r.host||e}`}function c(r){const e=r.provider;if(e==="s3")return s(r);if(e==="spaces")return l(r);throw new Error(`Not supported provider: ${e}`)}function s(r){let e;if(r.accelerate==!0)e=`https://${r.bucket}.s3-accelerate.amazonaws.com`;else if(r.endpoint!=null)e=`${r.endpoint}/${r.bucket}`;else if(r.bucket.includes(".")){if(r.region==null)throw new Error(`Bucket name "${r.bucket}" includes a dot, but S3 region is missing`);r.region==="us-east-1"?e=`https://s3.amazonaws.com/${r.bucket}`:e=`https://s3-${r.region}.amazonaws.com/${r.bucket}`}else r.region==="cn-north-1"?e=`https://${r.bucket}.s3.${r.region}.amazonaws.com.cn`:e=`https://${r.bucket}.s3.amazonaws.com`;return f(e,r.path)}function f(r,e){return e!=null&&e.length>0&&(e.startsWith("/")||(r+="/"),r+=e),r}function l(r){if(r.name==null)throw new Error("name is missing");if(r.region==null)throw new Error("region is missing");return f(`https://${r.name}.${r.region}.digitaloceanspaces.com`,r.path)}return Jt}var $r={},wa;function Kf(){if(wa)return $r;wa=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.parseDn=n;function n(c){let s=!1,f=null,l="",r=0;c=c.trim();const e=new Map;for(let i=0;i<=c.length;i++){if(i===c.length){f!==null&&e.set(f,l);break}const t=c[i];if(s){if(t==='"'){s=!1;continue}}else{if(t==='"'){s=!0;continue}if(t==="\\"){i++;const u=parseInt(c.slice(i,i+2),16);Number.isNaN(u)?l+=c[i]:(i++,l+=String.fromCharCode(u));continue}if(f===null&&t==="="){f=l,l="";continue}if(t===","||t===";"||t==="+"){f!==null&&e.set(f,l),f=null,l="";continue}}if(t===" "&&!s){if(l.length===0)continue;if(i>r){let u=i;for(;c[u]===" ";)u++;r=u}if(r>=c.length||c[r]===","||c[r]===";"||f===null&&c[r]==="="||f!==null&&c[r]==="+"){i=r-1;continue}}l+=t}return e}return $r}var Pt={},_a;function Qf(){if(_a)return Pt;_a=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.nil=Pt.UUID=void 0;const n=Er,c=Yr(),s="options.name must be either a string or a Buffer",f=(0,n.randomBytes)(16);f[0]=f[0]|1;const l={},r=[];for(let d=0;d<256;d++){const a=(d+256).toString(16).substr(1);l[a]=d,r[d]=a}class e{constructor(a){this.ascii=null,this.binary=null;const p=e.check(a);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=a:this.binary=a}static v5(a,p){return u(a,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=o(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(a,p=0){if(typeof a=="string")return a=a.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(a)?a==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(l[a[14]+a[15]]&240)>>4,variant:i((l[a[19]+a[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(a)){if(a.length<p+16)return!1;let v=0;for(;v<16&&a[p+v]===0;v++);return v===16?{version:void 0,variant:"nil",format:"binary"}:{version:(a[p+6]&240)>>4,variant:i((a[p+8]&224)>>5),format:"binary"}}throw(0,c.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(a){const p=Buffer.allocUnsafe(16);let v=0;for(let g=0;g<16;g++)p[g]=l[a[v++]+a[v++]],(g===3||g===5||g===7||g===9)&&(v+=1);return p}}Pt.UUID=e,e.OID=e.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function i(d){switch(d){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var t;(function(d){d[d.ASCII=0]="ASCII",d[d.BINARY=1]="BINARY",d[d.OBJECT=2]="OBJECT"})(t||(t={}));function u(d,a,p,v,g=t.ASCII){const m=(0,n.createHash)(a);if(typeof d!="string"&&!Buffer.isBuffer(d))throw(0,c.newError)(s,"ERR_INVALID_UUID_NAME");m.update(v),m.update(d);const R=m.digest();let O;switch(g){case t.BINARY:R[6]=R[6]&15|p,R[8]=R[8]&63|128,O=R;break;case t.OBJECT:R[6]=R[6]&15|p,R[8]=R[8]&63|128,O=new e(R);break;default:O=r[R[0]]+r[R[1]]+r[R[2]]+r[R[3]]+"-"+r[R[4]]+r[R[5]]+"-"+r[R[6]&15|p]+r[R[7]]+"-"+r[R[8]&63|128]+r[R[9]]+"-"+r[R[10]]+r[R[11]]+r[R[12]]+r[R[13]]+r[R[14]]+r[R[15]];break}return O}function o(d){return r[d[0]]+r[d[1]]+r[d[2]]+r[d[3]]+"-"+r[d[4]]+r[d[5]]+"-"+r[d[6]]+r[d[7]]+"-"+r[d[8]]+r[d[9]]+"-"+r[d[10]]+r[d[11]]+r[d[12]]+r[d[13]]+r[d[14]]+r[d[15]]}return Pt.nil=new e("00000000-0000-0000-0000-000000000000"),Pt}var Ut={},dn={},Sa;function Zf(){return Sa||(Sa=1,function(n){(function(c){c.parser=function(A,y){return new f(A,y)},c.SAXParser=f,c.SAXStream=o,c.createStream=u,c.MAX_BUFFER_LENGTH=64*1024;var s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];c.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function f(A,y){if(!(this instanceof f))return new f(A,y);var j=this;r(j),j.q=j.c="",j.bufferCheckPosition=c.MAX_BUFFER_LENGTH,j.opt=y||{},j.opt.lowercase=j.opt.lowercase||j.opt.lowercasetags,j.looseCase=j.opt.lowercase?"toLowerCase":"toUpperCase",j.tags=[],j.closed=j.closedRoot=j.sawRoot=!1,j.tag=j.error=null,j.strict=!!A,j.noscript=!!(A||j.opt.noscript),j.state=E.BEGIN,j.strictEntities=j.opt.strictEntities,j.ENTITIES=j.strictEntities?Object.create(c.XML_ENTITIES):Object.create(c.ENTITIES),j.attribList=[],j.opt.xmlns&&(j.ns=Object.create(g)),j.opt.unquotedAttributeValues===void 0&&(j.opt.unquotedAttributeValues=!A),j.trackPosition=j.opt.position!==!1,j.trackPosition&&(j.position=j.line=j.column=0),$(j,"onready")}Object.create||(Object.create=function(A){function y(){}y.prototype=A;var j=new y;return j}),Object.keys||(Object.keys=function(A){var y=[];for(var j in A)A.hasOwnProperty(j)&&y.push(j);return y});function l(A){for(var y=Math.max(c.MAX_BUFFER_LENGTH,10),j=0,N=0,le=s.length;N<le;N++){var ge=A[s[N]].length;if(ge>y)switch(s[N]){case"textNode":q(A);break;case"cdata":x(A,"oncdata",A.cdata),A.cdata="";break;case"script":x(A,"onscript",A.script),A.script="";break;default:D(A,"Max buffer length exceeded: "+s[N])}j=Math.max(j,ge)}var me=c.MAX_BUFFER_LENGTH-j;A.bufferCheckPosition=me+A.position}function r(A){for(var y=0,j=s.length;y<j;y++)A[s[y]]=""}function e(A){q(A),A.cdata!==""&&(x(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(x(A,"onscript",A.script),A.script="")}f.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){e(this)}};var i;try{i=require("stream").Stream}catch{i=function(){}}i||(i=function(){});var t=c.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function u(A,y){return new o(A,y)}function o(A,y){if(!(this instanceof o))return new o(A,y);i.apply(this),this._parser=new f(A,y),this.writable=!0,this.readable=!0;var j=this;this._parser.onend=function(){j.emit("end")},this._parser.onerror=function(N){j.emit("error",N),j._parser.error=null},this._decoder=null,t.forEach(function(N){Object.defineProperty(j,"on"+N,{get:function(){return j._parser["on"+N]},set:function(le){if(!le)return j.removeAllListeners(N),j._parser["on"+N]=le,le;j.on(N,le)},enumerable:!0,configurable:!1})})}o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var y=Df.StringDecoder;this._decoder=new y("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},o.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},o.prototype.on=function(A,y){var j=this;return!j._parser["on"+A]&&t.indexOf(A)!==-1&&(j._parser["on"+A]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,A),j.emit.apply(j,N)}),i.prototype.on.call(j,A,y)};var d="[CDATA[",a="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",g={xml:p,xmlns:v},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function P(A){return A===" "||A===`
`||A==="\r"||A==="	"}function U(A){return A==='"'||A==="'"}function T(A){return A===">"||P(A)}function S(A,y){return A.test(y)}function b(A,y){return!S(A,y)}var E=0;c.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},c.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},c.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(c.ENTITIES).forEach(function(A){var y=c.ENTITIES[A],j=typeof y=="number"?String.fromCharCode(y):y;c.ENTITIES[A]=j});for(var M in c.STATE)c.STATE[c.STATE[M]]=M;E=c.STATE;function $(A,y,j){A[y]&&A[y](j)}function x(A,y,j){A.textNode&&q(A),$(A,y,j)}function q(A){A.textNode=I(A.opt,A.textNode),A.textNode&&$(A,"ontext",A.textNode),A.textNode=""}function I(A,y){return A.trim&&(y=y.trim()),A.normalize&&(y=y.replace(/\s+/g," ")),y}function D(A,y){return q(A),A.trackPosition&&(y+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),y=new Error(y),A.error=y,$(A,"onerror",y),A}function F(A){return A.sawRoot&&!A.closedRoot&&k(A,"Unclosed root tag"),A.state!==E.BEGIN&&A.state!==E.BEGIN_WHITESPACE&&A.state!==E.TEXT&&D(A,"Unexpected end"),q(A),A.c="",A.closed=!0,$(A,"onend"),f.call(A,A.strict,A.opt),A}function k(A,y){if(typeof A!="object"||!(A instanceof f))throw new Error("bad call to strictFail");A.strict&&D(A,y)}function K(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var y=A.tags[A.tags.length-1]||A,j=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(j.ns=y.ns),A.attribList.length=0,x(A,"onopentagstart",j)}function W(A,y){var j=A.indexOf(":"),N=j<0?["",A]:A.split(":"),le=N[0],ge=N[1];return y&&A==="xmlns"&&(le="xmlns",ge=""),{prefix:le,local:ge}}function ne(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var y=W(A.attribName,!0),j=y.prefix,N=y.local;if(j==="xmlns")if(N==="xml"&&A.attribValue!==p)k(A,"xml: prefix must be bound to "+p+`
Actual: `+A.attribValue);else if(N==="xmlns"&&A.attribValue!==v)k(A,"xmlns: prefix must be bound to "+v+`
Actual: `+A.attribValue);else{var le=A.tag,ge=A.tags[A.tags.length-1]||A;le.ns===ge.ns&&(le.ns=Object.create(ge.ns)),le.ns[N]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,x(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function fe(A,y){if(A.opt.xmlns){var j=A.tag,N=W(A.tagName);j.prefix=N.prefix,j.local=N.local,j.uri=j.ns[N.prefix]||"",j.prefix&&!j.uri&&(k(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),j.uri=N.prefix);var le=A.tags[A.tags.length-1]||A;j.ns&&le.ns!==j.ns&&Object.keys(j.ns).forEach(function(B){x(A,"onopennamespace",{prefix:B,uri:j.ns[B]})});for(var ge=0,me=A.attribList.length;ge<me;ge++){var Ae=A.attribList[ge],we=Ae[0],$e=Ae[1],De=W(we,!0),je=De.prefix,St=De.local,ct=je===""?"":j.ns[je]||"",h={name:we,value:$e,prefix:je,local:St,uri:ct};je&&je!=="xmlns"&&!ct&&(k(A,"Unbound namespace prefix: "+JSON.stringify(je)),h.uri=je),A.tag.attributes[we]=h,x(A,"onattribute",h)}A.attribList.length=0}A.tag.isSelfClosing=!!y,A.sawRoot=!0,A.tags.push(A.tag),x(A,"onopentag",A.tag),y||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=E.SCRIPT:A.state=E.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function ue(A){if(!A.tagName){k(A,"Weird empty close tag."),A.textNode+="</>",A.state=E.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=E.SCRIPT;return}x(A,"onscript",A.script),A.script=""}var y=A.tags.length,j=A.tagName;A.strict||(j=j[A.looseCase]());for(var N=j;y--;){var le=A.tags[y];if(le.name!==N)k(A,"Unexpected close tag");else break}if(y<0){k(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=E.TEXT;return}A.tagName=j;for(var ge=A.tags.length;ge-- >y;){var me=A.tag=A.tags.pop();A.tagName=A.tag.name,x(A,"onclosetag",A.tagName);var Ae={};for(var we in me.ns)Ae[we]=me.ns[we];var $e=A.tags[A.tags.length-1]||A;A.opt.xmlns&&me.ns!==$e.ns&&Object.keys(me.ns).forEach(function(De){var je=me.ns[De];x(A,"onclosenamespace",{prefix:De,uri:je})})}y===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=E.TEXT}function ie(A){var y=A.entity,j=y.toLowerCase(),N,le="";return A.ENTITIES[y]?A.ENTITIES[y]:A.ENTITIES[j]?A.ENTITIES[j]:(y=j,y.charAt(0)==="#"&&(y.charAt(1)==="x"?(y=y.slice(2),N=parseInt(y,16),le=N.toString(16)):(y=y.slice(1),N=parseInt(y,10),le=N.toString(10))),y=y.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==y?(k(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(N))}function Re(A,y){y==="<"?(A.state=E.OPEN_WAKA,A.startTagPosition=A.position):P(y)||(k(A,"Non-whitespace before first tag."),A.textNode=y,A.state=E.TEXT)}function J(A,y){var j="";return y<A.length&&(j=A.charAt(y)),j}function Ee(A){var y=this;if(this.error)throw this.error;if(y.closed)return D(y,"Cannot write after close. Assign an onready handler.");if(A===null)return F(y);typeof A=="object"&&(A=A.toString());for(var j=0,N="";N=J(A,j++),y.c=N,!!N;)switch(y.trackPosition&&(y.position++,N===`
`?(y.line++,y.column=0):y.column++),y.state){case E.BEGIN:if(y.state=E.BEGIN_WHITESPACE,N==="\uFEFF")continue;Re(y,N);continue;case E.BEGIN_WHITESPACE:Re(y,N);continue;case E.TEXT:if(y.sawRoot&&!y.closedRoot){for(var le=j-1;N&&N!=="<"&&N!=="&";)N=J(A,j++),N&&y.trackPosition&&(y.position++,N===`
`?(y.line++,y.column=0):y.column++);y.textNode+=A.substring(le,j-1)}N==="<"&&!(y.sawRoot&&y.closedRoot&&!y.strict)?(y.state=E.OPEN_WAKA,y.startTagPosition=y.position):(!P(N)&&(!y.sawRoot||y.closedRoot)&&k(y,"Text data outside of root node."),N==="&"?y.state=E.TEXT_ENTITY:y.textNode+=N);continue;case E.SCRIPT:N==="<"?y.state=E.SCRIPT_ENDING:y.script+=N;continue;case E.SCRIPT_ENDING:N==="/"?y.state=E.CLOSE_TAG:(y.script+="<"+N,y.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(N==="!")y.state=E.SGML_DECL,y.sgmlDecl="";else if(!P(N))if(S(m,N))y.state=E.OPEN_TAG,y.tagName=N;else if(N==="/")y.state=E.CLOSE_TAG,y.tagName="";else if(N==="?")y.state=E.PROC_INST,y.procInstName=y.procInstBody="";else{if(k(y,"Unencoded <"),y.startTagPosition+1<y.position){var ge=y.position-y.startTagPosition;N=new Array(ge).join(" ")+N}y.textNode+="<"+N,y.state=E.TEXT}continue;case E.SGML_DECL:if(y.sgmlDecl+N==="--"){y.state=E.COMMENT,y.comment="",y.sgmlDecl="";continue}y.doctype&&y.doctype!==!0&&y.sgmlDecl?(y.state=E.DOCTYPE_DTD,y.doctype+="<!"+y.sgmlDecl+N,y.sgmlDecl=""):(y.sgmlDecl+N).toUpperCase()===d?(x(y,"onopencdata"),y.state=E.CDATA,y.sgmlDecl="",y.cdata=""):(y.sgmlDecl+N).toUpperCase()===a?(y.state=E.DOCTYPE,(y.doctype||y.sawRoot)&&k(y,"Inappropriately located doctype declaration"),y.doctype="",y.sgmlDecl=""):N===">"?(x(y,"onsgmldeclaration",y.sgmlDecl),y.sgmlDecl="",y.state=E.TEXT):(U(N)&&(y.state=E.SGML_DECL_QUOTED),y.sgmlDecl+=N);continue;case E.SGML_DECL_QUOTED:N===y.q&&(y.state=E.SGML_DECL,y.q=""),y.sgmlDecl+=N;continue;case E.DOCTYPE:N===">"?(y.state=E.TEXT,x(y,"ondoctype",y.doctype),y.doctype=!0):(y.doctype+=N,N==="["?y.state=E.DOCTYPE_DTD:U(N)&&(y.state=E.DOCTYPE_QUOTED,y.q=N));continue;case E.DOCTYPE_QUOTED:y.doctype+=N,N===y.q&&(y.q="",y.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:N==="]"?(y.doctype+=N,y.state=E.DOCTYPE):N==="<"?(y.state=E.OPEN_WAKA,y.startTagPosition=y.position):U(N)?(y.doctype+=N,y.state=E.DOCTYPE_DTD_QUOTED,y.q=N):y.doctype+=N;continue;case E.DOCTYPE_DTD_QUOTED:y.doctype+=N,N===y.q&&(y.state=E.DOCTYPE_DTD,y.q="");continue;case E.COMMENT:N==="-"?y.state=E.COMMENT_ENDING:y.comment+=N;continue;case E.COMMENT_ENDING:N==="-"?(y.state=E.COMMENT_ENDED,y.comment=I(y.opt,y.comment),y.comment&&x(y,"oncomment",y.comment),y.comment=""):(y.comment+="-"+N,y.state=E.COMMENT);continue;case E.COMMENT_ENDED:N!==">"?(k(y,"Malformed comment"),y.comment+="--"+N,y.state=E.COMMENT):y.doctype&&y.doctype!==!0?y.state=E.DOCTYPE_DTD:y.state=E.TEXT;continue;case E.CDATA:N==="]"?y.state=E.CDATA_ENDING:y.cdata+=N;continue;case E.CDATA_ENDING:N==="]"?y.state=E.CDATA_ENDING_2:(y.cdata+="]"+N,y.state=E.CDATA);continue;case E.CDATA_ENDING_2:N===">"?(y.cdata&&x(y,"oncdata",y.cdata),x(y,"onclosecdata"),y.cdata="",y.state=E.TEXT):N==="]"?y.cdata+="]":(y.cdata+="]]"+N,y.state=E.CDATA);continue;case E.PROC_INST:N==="?"?y.state=E.PROC_INST_ENDING:P(N)?y.state=E.PROC_INST_BODY:y.procInstName+=N;continue;case E.PROC_INST_BODY:if(!y.procInstBody&&P(N))continue;N==="?"?y.state=E.PROC_INST_ENDING:y.procInstBody+=N;continue;case E.PROC_INST_ENDING:N===">"?(x(y,"onprocessinginstruction",{name:y.procInstName,body:y.procInstBody}),y.procInstName=y.procInstBody="",y.state=E.TEXT):(y.procInstBody+="?"+N,y.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:S(_,N)?y.tagName+=N:(K(y),N===">"?fe(y):N==="/"?y.state=E.OPEN_TAG_SLASH:(P(N)||k(y,"Invalid character in tag name"),y.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:N===">"?(fe(y,!0),ue(y)):(k(y,"Forward-slash in opening tag not followed by >"),y.state=E.ATTRIB);continue;case E.ATTRIB:if(P(N))continue;N===">"?fe(y):N==="/"?y.state=E.OPEN_TAG_SLASH:S(m,N)?(y.attribName=N,y.attribValue="",y.state=E.ATTRIB_NAME):k(y,"Invalid attribute name");continue;case E.ATTRIB_NAME:N==="="?y.state=E.ATTRIB_VALUE:N===">"?(k(y,"Attribute without value"),y.attribValue=y.attribName,ne(y),fe(y)):P(N)?y.state=E.ATTRIB_NAME_SAW_WHITE:S(_,N)?y.attribName+=N:k(y,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(N==="=")y.state=E.ATTRIB_VALUE;else{if(P(N))continue;k(y,"Attribute without value"),y.tag.attributes[y.attribName]="",y.attribValue="",x(y,"onattribute",{name:y.attribName,value:""}),y.attribName="",N===">"?fe(y):S(m,N)?(y.attribName=N,y.state=E.ATTRIB_NAME):(k(y,"Invalid attribute name"),y.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(P(N))continue;U(N)?(y.q=N,y.state=E.ATTRIB_VALUE_QUOTED):(y.opt.unquotedAttributeValues||D(y,"Unquoted attribute value"),y.state=E.ATTRIB_VALUE_UNQUOTED,y.attribValue=N);continue;case E.ATTRIB_VALUE_QUOTED:if(N!==y.q){N==="&"?y.state=E.ATTRIB_VALUE_ENTITY_Q:y.attribValue+=N;continue}ne(y),y.q="",y.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:P(N)?y.state=E.ATTRIB:N===">"?fe(y):N==="/"?y.state=E.OPEN_TAG_SLASH:S(m,N)?(k(y,"No whitespace between attributes"),y.attribName=N,y.attribValue="",y.state=E.ATTRIB_NAME):k(y,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!T(N)){N==="&"?y.state=E.ATTRIB_VALUE_ENTITY_U:y.attribValue+=N;continue}ne(y),N===">"?fe(y):y.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(y.tagName)N===">"?ue(y):S(_,N)?y.tagName+=N:y.script?(y.script+="</"+y.tagName,y.tagName="",y.state=E.SCRIPT):(P(N)||k(y,"Invalid tagname in closing tag"),y.state=E.CLOSE_TAG_SAW_WHITE);else{if(P(N))continue;b(m,N)?y.script?(y.script+="</"+N,y.state=E.SCRIPT):k(y,"Invalid tagname in closing tag."):y.tagName=N}continue;case E.CLOSE_TAG_SAW_WHITE:if(P(N))continue;N===">"?ue(y):k(y,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var me,Ae;switch(y.state){case E.TEXT_ENTITY:me=E.TEXT,Ae="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:me=E.ATTRIB_VALUE_QUOTED,Ae="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:me=E.ATTRIB_VALUE_UNQUOTED,Ae="attribValue";break}if(N===";"){var we=ie(y);y.opt.unparsedEntities&&!Object.values(c.XML_ENTITIES).includes(we)?(y.entity="",y.state=me,y.write(we)):(y[Ae]+=we,y.entity="",y.state=me)}else S(y.entity.length?O:R,N)?y.entity+=N:(k(y,"Invalid character in entity name"),y[Ae]+="&"+y.entity+N,y.entity="",y.state=me);continue;default:throw new Error(y,"Unknown state: "+y.state)}return y.position>=y.bufferCheckPosition&&l(y),y}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var A=String.fromCharCode,y=Math.floor,j=function(){var N=16384,le=[],ge,me,Ae=-1,we=arguments.length;if(!we)return"";for(var $e="";++Ae<we;){var De=Number(arguments[Ae]);if(!isFinite(De)||De<0||De>1114111||y(De)!==De)throw RangeError("Invalid code point: "+De);De<=65535?le.push(De):(De-=65536,ge=(De>>10)+55296,me=De%1024+56320,le.push(ge,me)),(Ae+1===we||le.length>N)&&($e+=A.apply(null,le),le.length=0)}return $e};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:j,configurable:!0,writable:!0}):String.fromCodePoint=j}()})(n)}(dn)),dn}var Aa;function ed(){if(Aa)return Ut;Aa=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.XElement=void 0,Ut.parseXml=e;const n=Zf(),c=Yr();class s{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,c.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!l(t))throw(0,c.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const u=this.attributes===null?null:this.attributes[t];if(u==null)throw(0,c.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return u}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,u=!1,o=null){const d=this.elementOrNull(t,u);if(d===null)throw(0,c.newError)(o||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return d}elementOrNull(t,u=!1){if(this.elements===null)return null;for(const o of this.elements)if(r(o,t,u))return o;return null}getElements(t,u=!1){return this.elements===null?[]:this.elements.filter(o=>r(o,t,u))}elementValueOrEmpty(t,u=!1){const o=this.elementOrNull(t,u);return o===null?"":o.value}}Ut.XElement=s;const f=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function l(i){return f.test(i)}function r(i,t,u){const o=i.name;return o===t||u===!0&&o.length===t.length&&o.toLowerCase()===t.toLowerCase()}function e(i){let t=null;const u=n.parser(!0,{}),o=[];return u.onopentag=d=>{const a=new s(d.name);if(a.attributes=d.attributes,t===null)t=a;else{const p=o[o.length-1];p.elements==null&&(p.elements=[]),p.elements.push(a)}o.push(a)},u.onclosetag=()=>{o.pop()},u.ontext=d=>{o.length>0&&(o[o.length-1].value=d)},u.oncdata=d=>{const a=o[o.length-1];a.value=d,a.isCData=!0},u.onerror=d=>{throw d},u.write(i),t}return Ut}var Kt={},ba;function td(){if(ba)return Kt;ba=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.MemoLazy=void 0;let n=class{constructor(f,l){this.selector=f,this.creator=l,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const f=this.selector();if(this._value!==void 0&&c(this.selected,f))return this._value;this.selected=f;const l=this.creator(f);return this.value=l,l}set value(f){this._value=f}};Kt.MemoLazy=n;function c(s,f){if(typeof s=="object"&&s!==null&&(typeof f=="object"&&f!==null)){const e=Object.keys(s),i=Object.keys(f);return e.length===i.length&&e.every(t=>c(s[t],f[t]))}return s===f}return Kt}var Ur={},Ta;function rd(){if(Ta)return Ur;Ta=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.retry=c;const n=$o();async function c(s,f,l,r=0,e=0,i){var t;const u=new n.CancellationToken;try{return await s()}catch(o){if((!((t=i==null?void 0:i(o))!==null&&t!==void 0)||t)&&f>0&&!u.cancelled)return await new Promise(d=>setTimeout(d,l+r*e)),await c(s,f-1,l,r,e+1,i);throw o}}return Ur}var Ra;function Be(){return Ra||(Ra=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CURRENT_APP_PACKAGE_FILE_NAME=n.CURRENT_APP_INSTALLER_FILE_NAME=n.retry=n.MemoLazy=n.newError=n.XElement=n.parseXml=n.ProgressCallbackTransform=n.UUID=n.parseDn=n.githubUrl=n.getS3LikeProviderBaseUrl=n.configureRequestUrl=n.parseJson=n.safeStringifyJson=n.configureRequestOptionsFromUrl=n.configureRequestOptions=n.safeGetHeader=n.DigestTransform=n.HttpExecutor=n.createHttpError=n.HttpError=n.CancellationError=n.CancellationToken=void 0,n.asArray=d;var c=$o();Object.defineProperty(n,"CancellationToken",{enumerable:!0,get:function(){return c.CancellationToken}}),Object.defineProperty(n,"CancellationError",{enumerable:!0,get:function(){return c.CancellationError}});var s=Xf();Object.defineProperty(n,"HttpError",{enumerable:!0,get:function(){return s.HttpError}}),Object.defineProperty(n,"createHttpError",{enumerable:!0,get:function(){return s.createHttpError}}),Object.defineProperty(n,"HttpExecutor",{enumerable:!0,get:function(){return s.HttpExecutor}}),Object.defineProperty(n,"DigestTransform",{enumerable:!0,get:function(){return s.DigestTransform}}),Object.defineProperty(n,"safeGetHeader",{enumerable:!0,get:function(){return s.safeGetHeader}}),Object.defineProperty(n,"configureRequestOptions",{enumerable:!0,get:function(){return s.configureRequestOptions}}),Object.defineProperty(n,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return s.configureRequestOptionsFromUrl}}),Object.defineProperty(n,"safeStringifyJson",{enumerable:!0,get:function(){return s.safeStringifyJson}}),Object.defineProperty(n,"parseJson",{enumerable:!0,get:function(){return s.parseJson}}),Object.defineProperty(n,"configureRequestUrl",{enumerable:!0,get:function(){return s.configureRequestUrl}});var f=Jf();Object.defineProperty(n,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return f.getS3LikeProviderBaseUrl}}),Object.defineProperty(n,"githubUrl",{enumerable:!0,get:function(){return f.githubUrl}});var l=Kf();Object.defineProperty(n,"parseDn",{enumerable:!0,get:function(){return l.parseDn}});var r=Qf();Object.defineProperty(n,"UUID",{enumerable:!0,get:function(){return r.UUID}});var e=Wu();Object.defineProperty(n,"ProgressCallbackTransform",{enumerable:!0,get:function(){return e.ProgressCallbackTransform}});var i=ed();Object.defineProperty(n,"parseXml",{enumerable:!0,get:function(){return i.parseXml}}),Object.defineProperty(n,"XElement",{enumerable:!0,get:function(){return i.XElement}});var t=Yr();Object.defineProperty(n,"newError",{enumerable:!0,get:function(){return t.newError}});var u=td();Object.defineProperty(n,"MemoLazy",{enumerable:!0,get:function(){return u.MemoLazy}});var o=rd();Object.defineProperty(n,"retry",{enumerable:!0,get:function(){return o.retry}}),n.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",n.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function d(a){return a==null?[]:Array.isArray(a)?a:[a]}}(sn)),sn}var hn={},kr={},Ca;function Qe(){return Ca||(Ca=1,kr.fromCallback=function(n){return Object.defineProperty(function(...c){if(typeof c[c.length-1]=="function")n.apply(this,c);else return new Promise((s,f)=>{c.push((l,r)=>l!=null?f(l):s(r)),n.apply(this,c)})},"name",{value:n.name})},kr.fromPromise=function(n){return Object.defineProperty(function(...c){const s=c[c.length-1];if(typeof s!="function")return n.apply(this,c);c.pop(),n.apply(this,c).then(f=>s(null,f),s)},"name",{value:n.name})}),kr}var pn,Oa;function nd(){if(Oa)return pn;Oa=1;var n=If,c=process.cwd,s=null,f=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=c.call(process)),s};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var l=process.chdir;process.chdir=function(e){s=null,l.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,l)}pn=r;function r(e){n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&i(e),e.lutimes||t(e),e.chown=d(e.chown),e.fchown=d(e.fchown),e.lchown=d(e.lchown),e.chmod=u(e.chmod),e.fchmod=u(e.fchmod),e.lchmod=u(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=p(e.stat),e.fstat=p(e.fstat),e.lstat=p(e.lstat),e.statSync=v(e.statSync),e.fstatSync=v(e.fstatSync),e.lstatSync=v(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(m,_,R){R&&process.nextTick(R)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(m,_,R,O){O&&process.nextTick(O)},e.lchownSync=function(){}),f==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(m){function _(R,O,P){var U=Date.now(),T=0;m(R,O,function S(b){if(b&&(b.code==="EACCES"||b.code==="EPERM"||b.code==="EBUSY")&&Date.now()-U<6e4){setTimeout(function(){e.stat(O,function(E,M){E&&E.code==="ENOENT"?m(R,O,S):P(b)})},T),T<100&&(T+=10);return}P&&P(b)})}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_}(e.rename)),e.read=typeof e.read!="function"?e.read:function(m){function _(R,O,P,U,T,S){var b;if(S&&typeof S=="function"){var E=0;b=function(M,$,x){if(M&&M.code==="EAGAIN"&&E<10)return E++,m.call(e,R,O,P,U,T,b);S.apply(this,arguments)}}return m.call(e,R,O,P,U,T,b)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(m){return function(_,R,O,P,U){for(var T=0;;)try{return m.call(e,_,R,O,P,U)}catch(S){if(S.code==="EAGAIN"&&T<10){T++;continue}throw S}}}(e.readSync);function i(m){m.lchmod=function(_,R,O){m.open(_,n.O_WRONLY|n.O_SYMLINK,R,function(P,U){if(P){O&&O(P);return}m.fchmod(U,R,function(T){m.close(U,function(S){O&&O(T||S)})})})},m.lchmodSync=function(_,R){var O=m.openSync(_,n.O_WRONLY|n.O_SYMLINK,R),P=!0,U;try{U=m.fchmodSync(O,R),P=!1}finally{if(P)try{m.closeSync(O)}catch{}else m.closeSync(O)}return U}}function t(m){n.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(_,R,O,P){m.open(_,n.O_SYMLINK,function(U,T){if(U){P&&P(U);return}m.futimes(T,R,O,function(S){m.close(T,function(b){P&&P(S||b)})})})},m.lutimesSync=function(_,R,O){var P=m.openSync(_,n.O_SYMLINK),U,T=!0;try{U=m.futimesSync(P,R,O),T=!1}finally{if(T)try{m.closeSync(P)}catch{}else m.closeSync(P)}return U}):m.futimes&&(m.lutimes=function(_,R,O,P){P&&process.nextTick(P)},m.lutimesSync=function(){})}function u(m){return m&&function(_,R,O){return m.call(e,_,R,function(P){g(P)&&(P=null),O&&O.apply(this,arguments)})}}function o(m){return m&&function(_,R){try{return m.call(e,_,R)}catch(O){if(!g(O))throw O}}}function d(m){return m&&function(_,R,O,P){return m.call(e,_,R,O,function(U){g(U)&&(U=null),P&&P.apply(this,arguments)})}}function a(m){return m&&function(_,R,O){try{return m.call(e,_,R,O)}catch(P){if(!g(P))throw P}}}function p(m){return m&&function(_,R,O){typeof R=="function"&&(O=R,R=null);function P(U,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),O&&O.apply(this,arguments)}return R?m.call(e,_,R,P):m.call(e,_,P)}}function v(m){return m&&function(_,R){var O=R?m.call(e,_,R):m.call(e,_);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function g(m){if(!m||m.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(m.code==="EINVAL"||m.code==="EPERM"))}}return pn}var mn,Pa;function id(){if(Pa)return mn;Pa=1;var n=wr.Stream;mn=c;function c(s){return{ReadStream:f,WriteStream:l};function f(r,e){if(!(this instanceof f))return new f(r,e);n.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,e=e||{};for(var t=Object.keys(e),u=0,o=t.length;u<o;u++){var d=t[u];this[d]=e[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}s.open(this.path,this.flags,this.mode,function(a,p){if(a){i.emit("error",a),i.readable=!1;return}i.fd=p,i.emit("open",p),i._read()})}function l(r,e){if(!(this instanceof l))return new l(r,e);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,e=e||{};for(var i=Object.keys(e),t=0,u=i.length;t<u;t++){var o=i[t];this[o]=e[o]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=s.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return mn}var gn,Da;function od(){if(Da)return gn;Da=1,gn=c;var n=Object.getPrototypeOf||function(s){return s.__proto__};function c(s){if(s===null||typeof s!="object")return s;if(s instanceof Object)var f={__proto__:n(s)};else var f=Object.create(null);return Object.getOwnPropertyNames(s).forEach(function(l){Object.defineProperty(f,l,Object.getOwnPropertyDescriptor(s,l))}),f}return gn}var qr,Ia;function Xe(){if(Ia)return qr;Ia=1;var n=Ye,c=nd(),s=id(),f=od(),l=Vr,r,e;typeof Symbol=="function"&&typeof Symbol.for=="function"?(r=Symbol.for("graceful-fs.queue"),e=Symbol.for("graceful-fs.previous")):(r="___graceful-fs.queue",e="___graceful-fs.previous");function i(){}function t(m,_){Object.defineProperty(m,r,{get:function(){return _}})}var u=i;if(l.debuglog?u=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(u=function(){var m=l.format.apply(l,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!n[r]){var o=it[r]||[];t(n,o),n.close=function(m){function _(R,O){return m.call(n,R,function(P){P||v(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(_,e,{value:m}),_}(n.close),n.closeSync=function(m){function _(R){m.apply(n,arguments),v()}return Object.defineProperty(_,e,{value:m}),_}(n.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){u(n[r]),ku.equal(n[r].length,0)})}it[r]||t(it,n[r]),qr=d(f(n)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!n.__patched&&(qr=d(n),n.__patched=!0);function d(m){c(m),m.gracefulify=d,m.createReadStream=fe,m.createWriteStream=ue;var _=m.readFile;m.readFile=R;function R(J,Ee,A){return typeof Ee=="function"&&(A=Ee,Ee=null),y(J,Ee,A);function y(j,N,le,ge){return _(j,N,function(me){me&&(me.code==="EMFILE"||me.code==="ENFILE")?a([y,[j,N,le],me,ge||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var O=m.writeFile;m.writeFile=P;function P(J,Ee,A,y){return typeof A=="function"&&(y=A,A=null),j(J,Ee,A,y);function j(N,le,ge,me,Ae){return O(N,le,ge,function(we){we&&(we.code==="EMFILE"||we.code==="ENFILE")?a([j,[N,le,ge,me],we,Ae||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}var U=m.appendFile;U&&(m.appendFile=T);function T(J,Ee,A,y){return typeof A=="function"&&(y=A,A=null),j(J,Ee,A,y);function j(N,le,ge,me,Ae){return U(N,le,ge,function(we){we&&(we.code==="EMFILE"||we.code==="ENFILE")?a([j,[N,le,ge,me],we,Ae||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}var S=m.copyFile;S&&(m.copyFile=b);function b(J,Ee,A,y){return typeof A=="function"&&(y=A,A=0),j(J,Ee,A,y);function j(N,le,ge,me,Ae){return S(N,le,ge,function(we){we&&(we.code==="EMFILE"||we.code==="ENFILE")?a([j,[N,le,ge,me],we,Ae||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}var E=m.readdir;m.readdir=$;var M=/^v[0-5]\./;function $(J,Ee,A){typeof Ee=="function"&&(A=Ee,Ee=null);var y=M.test(process.version)?function(le,ge,me,Ae){return E(le,j(le,ge,me,Ae))}:function(le,ge,me,Ae){return E(le,ge,j(le,ge,me,Ae))};return y(J,Ee,A);function j(N,le,ge,me){return function(Ae,we){Ae&&(Ae.code==="EMFILE"||Ae.code==="ENFILE")?a([y,[N,le,ge],Ae,me||Date.now(),Date.now()]):(we&&we.sort&&we.sort(),typeof ge=="function"&&ge.call(this,Ae,we))}}}if(process.version.substr(0,4)==="v0.8"){var x=s(m);k=x.ReadStream,W=x.WriteStream}var q=m.ReadStream;q&&(k.prototype=Object.create(q.prototype),k.prototype.open=K);var I=m.WriteStream;I&&(W.prototype=Object.create(I.prototype),W.prototype.open=ne),Object.defineProperty(m,"ReadStream",{get:function(){return k},set:function(J){k=J},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return W},set:function(J){W=J},enumerable:!0,configurable:!0});var D=k;Object.defineProperty(m,"FileReadStream",{get:function(){return D},set:function(J){D=J},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(m,"FileWriteStream",{get:function(){return F},set:function(J){F=J},enumerable:!0,configurable:!0});function k(J,Ee){return this instanceof k?(q.apply(this,arguments),this):k.apply(Object.create(k.prototype),arguments)}function K(){var J=this;Re(J.path,J.flags,J.mode,function(Ee,A){Ee?(J.autoClose&&J.destroy(),J.emit("error",Ee)):(J.fd=A,J.emit("open",A),J.read())})}function W(J,Ee){return this instanceof W?(I.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var J=this;Re(J.path,J.flags,J.mode,function(Ee,A){Ee?(J.destroy(),J.emit("error",Ee)):(J.fd=A,J.emit("open",A))})}function fe(J,Ee){return new m.ReadStream(J,Ee)}function ue(J,Ee){return new m.WriteStream(J,Ee)}var ie=m.open;m.open=Re;function Re(J,Ee,A,y){return typeof A=="function"&&(y=A,A=null),j(J,Ee,A,y);function j(N,le,ge,me,Ae){return ie(N,le,ge,function(we,$e){we&&(we.code==="EMFILE"||we.code==="ENFILE")?a([j,[N,le,ge,me],we,Ae||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}}return m}function a(m){u("ENQUEUE",m[0].name,m[1]),n[r].push(m),g()}var p;function v(){for(var m=Date.now(),_=0;_<n[r].length;++_)n[r][_].length>2&&(n[r][_][3]=m,n[r][_][4]=m);g()}function g(){if(clearTimeout(p),p=void 0,n[r].length!==0){var m=n[r].shift(),_=m[0],R=m[1],O=m[2],P=m[3],U=m[4];if(P===void 0)u("RETRY",_.name,R),_.apply(null,R);else if(Date.now()-P>=6e4){u("TIMEOUT",_.name,R);var T=R.pop();typeof T=="function"&&T.call(null,O)}else{var S=Date.now()-U,b=Math.max(U-P,1),E=Math.min(b*1.2,100);S>=E?(u("RETRY",_.name,R),_.apply(null,R.concat([P]))):n[r].push(m)}p===void 0&&(p=setTimeout(g,0))}}return qr}var Na;function Ht(){return Na||(Na=1,function(n){const c=Qe().fromCallback,s=Xe(),f=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(l=>typeof s[l]=="function");Object.assign(n,s),f.forEach(l=>{n[l]=c(s[l])}),n.exists=function(l,r){return typeof r=="function"?s.exists(l,r):new Promise(e=>s.exists(l,e))},n.read=function(l,r,e,i,t,u){return typeof u=="function"?s.read(l,r,e,i,t,u):new Promise((o,d)=>{s.read(l,r,e,i,t,(a,p,v)=>{if(a)return d(a);o({bytesRead:p,buffer:v})})})},n.write=function(l,r,...e){return typeof e[e.length-1]=="function"?s.write(l,r,...e):new Promise((i,t)=>{s.write(l,r,...e,(u,o,d)=>{if(u)return t(u);i({bytesWritten:o,buffer:d})})})},typeof s.writev=="function"&&(n.writev=function(l,r,...e){return typeof e[e.length-1]=="function"?s.writev(l,r,...e):new Promise((i,t)=>{s.writev(l,r,...e,(u,o,d)=>{if(u)return t(u);i({bytesWritten:o,buffers:d})})})}),typeof s.realpath.native=="function"?n.realpath.native=c(s.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(hn)),hn}var Mr={},vn={},Fa;function ad(){if(Fa)return vn;Fa=1;const n=Pe;return vn.checkPath=function(s){if(process.platform==="win32"&&/[<>:"|?*]/.test(s.replace(n.parse(s).root,""))){const l=new Error(`Path contains invalid characters: ${s}`);throw l.code="EINVAL",l}},vn}var La;function sd(){if(La)return Mr;La=1;const n=Ht(),{checkPath:c}=ad(),s=f=>{const l={mode:511};return typeof f=="number"?f:{...l,...f}.mode};return Mr.makeDir=async(f,l)=>(c(f),n.mkdir(f,{mode:s(l),recursive:!0})),Mr.makeDirSync=(f,l)=>(c(f),n.mkdirSync(f,{mode:s(l),recursive:!0})),Mr}var yn,xa;function ut(){if(xa)return yn;xa=1;const n=Qe().fromPromise,{makeDir:c,makeDirSync:s}=sd(),f=n(c);return yn={mkdirs:f,mkdirsSync:s,mkdirp:f,mkdirpSync:s,ensureDir:f,ensureDirSync:s},yn}var En,$a;function Nt(){if($a)return En;$a=1;const n=Qe().fromPromise,c=Ht();function s(f){return c.access(f).then(()=>!0).catch(()=>!1)}return En={pathExists:n(s),pathExistsSync:c.existsSync},En}var wn,Ua;function zu(){if(Ua)return wn;Ua=1;const n=Xe();function c(f,l,r,e){n.open(f,"r+",(i,t)=>{if(i)return e(i);n.futimes(t,l,r,u=>{n.close(t,o=>{e&&e(u||o)})})})}function s(f,l,r){const e=n.openSync(f,"r+");return n.futimesSync(e,l,r),n.closeSync(e)}return wn={utimesMillis:c,utimesMillisSync:s},wn}var _n,ka;function Gt(){if(ka)return _n;ka=1;const n=Ht(),c=Pe,s=Vr;function f(a,p,v){const g=v.dereference?m=>n.stat(m,{bigint:!0}):m=>n.lstat(m,{bigint:!0});return Promise.all([g(a),g(p).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,_])=>({srcStat:m,destStat:_}))}function l(a,p,v){let g;const m=v.dereference?R=>n.statSync(R,{bigint:!0}):R=>n.lstatSync(R,{bigint:!0}),_=m(a);try{g=m(p)}catch(R){if(R.code==="ENOENT")return{srcStat:_,destStat:null};throw R}return{srcStat:_,destStat:g}}function r(a,p,v,g,m){s.callbackify(f)(a,p,g,(_,R)=>{if(_)return m(_);const{srcStat:O,destStat:P}=R;if(P){if(u(O,P)){const U=c.basename(a),T=c.basename(p);return v==="move"&&U!==T&&U.toLowerCase()===T.toLowerCase()?m(null,{srcStat:O,destStat:P,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!P.isDirectory())return m(new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`));if(!O.isDirectory()&&P.isDirectory())return m(new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`))}return O.isDirectory()&&o(a,p)?m(new Error(d(a,p,v))):m(null,{srcStat:O,destStat:P})})}function e(a,p,v,g){const{srcStat:m,destStat:_}=l(a,p,g);if(_){if(u(m,_)){const R=c.basename(a),O=c.basename(p);if(v==="move"&&R!==O&&R.toLowerCase()===O.toLowerCase())return{srcStat:m,destStat:_,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!_.isDirectory())throw new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`);if(!m.isDirectory()&&_.isDirectory())throw new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`)}if(m.isDirectory()&&o(a,p))throw new Error(d(a,p,v));return{srcStat:m,destStat:_}}function i(a,p,v,g,m){const _=c.resolve(c.dirname(a)),R=c.resolve(c.dirname(v));if(R===_||R===c.parse(R).root)return m();n.stat(R,{bigint:!0},(O,P)=>O?O.code==="ENOENT"?m():m(O):u(p,P)?m(new Error(d(a,v,g))):i(a,p,R,g,m))}function t(a,p,v,g){const m=c.resolve(c.dirname(a)),_=c.resolve(c.dirname(v));if(_===m||_===c.parse(_).root)return;let R;try{R=n.statSync(_,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(u(p,R))throw new Error(d(a,v,g));return t(a,p,_,g)}function u(a,p){return p.ino&&p.dev&&p.ino===a.ino&&p.dev===a.dev}function o(a,p){const v=c.resolve(a).split(c.sep).filter(m=>m),g=c.resolve(p).split(c.sep).filter(m=>m);return v.reduce((m,_,R)=>m&&g[R]===_,!0)}function d(a,p,v){return`Cannot ${v} '${a}' to a subdirectory of itself, '${p}'.`}return _n={checkPaths:r,checkPathsSync:e,checkParentPaths:i,checkParentPathsSync:t,isSrcSubdir:o,areIdentical:u},_n}var Sn,qa;function ld(){if(qa)return Sn;qa=1;const n=Xe(),c=Pe,s=ut().mkdirs,f=Nt().pathExists,l=zu().utimesMillis,r=Gt();function e($,x,q,I){typeof q=="function"&&!I?(I=q,q={}):typeof q=="function"&&(q={filter:q}),I=I||function(){},q=q||{},q.clobber="clobber"in q?!!q.clobber:!0,q.overwrite="overwrite"in q?!!q.overwrite:q.clobber,q.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),r.checkPaths($,x,"copy",q,(D,F)=>{if(D)return I(D);const{srcStat:k,destStat:K}=F;r.checkParentPaths($,k,x,"copy",W=>W?I(W):q.filter?t(i,K,$,x,q,I):i(K,$,x,q,I))})}function i($,x,q,I,D){const F=c.dirname(q);f(F,(k,K)=>{if(k)return D(k);if(K)return o($,x,q,I,D);s(F,W=>W?D(W):o($,x,q,I,D))})}function t($,x,q,I,D,F){Promise.resolve(D.filter(q,I)).then(k=>k?$(x,q,I,D,F):F(),k=>F(k))}function u($,x,q,I,D){return I.filter?t(o,$,x,q,I,D):o($,x,q,I,D)}function o($,x,q,I,D){(I.dereference?n.stat:n.lstat)(x,(k,K)=>k?D(k):K.isDirectory()?P(K,$,x,q,I,D):K.isFile()||K.isCharacterDevice()||K.isBlockDevice()?d(K,$,x,q,I,D):K.isSymbolicLink()?E($,x,q,I,D):K.isSocket()?D(new Error(`Cannot copy a socket file: ${x}`)):K.isFIFO()?D(new Error(`Cannot copy a FIFO pipe: ${x}`)):D(new Error(`Unknown file: ${x}`)))}function d($,x,q,I,D,F){return x?a($,q,I,D,F):p($,q,I,D,F)}function a($,x,q,I,D){if(I.overwrite)n.unlink(q,F=>F?D(F):p($,x,q,I,D));else return I.errorOnExist?D(new Error(`'${q}' already exists`)):D()}function p($,x,q,I,D){n.copyFile(x,q,F=>F?D(F):I.preserveTimestamps?v($.mode,x,q,D):R(q,$.mode,D))}function v($,x,q,I){return g($)?m(q,$,D=>D?I(D):_($,x,q,I)):_($,x,q,I)}function g($){return($&128)===0}function m($,x,q){return R($,x|128,q)}function _($,x,q,I){O(x,q,D=>D?I(D):R(q,$,I))}function R($,x,q){return n.chmod($,x,q)}function O($,x,q){n.stat($,(I,D)=>I?q(I):l(x,D.atime,D.mtime,q))}function P($,x,q,I,D,F){return x?T(q,I,D,F):U($.mode,q,I,D,F)}function U($,x,q,I,D){n.mkdir(q,F=>{if(F)return D(F);T(x,q,I,k=>k?D(k):R(q,$,D))})}function T($,x,q,I){n.readdir($,(D,F)=>D?I(D):S(F,$,x,q,I))}function S($,x,q,I,D){const F=$.pop();return F?b($,F,x,q,I,D):D()}function b($,x,q,I,D,F){const k=c.join(q,x),K=c.join(I,x);r.checkPaths(k,K,"copy",D,(W,ne)=>{if(W)return F(W);const{destStat:fe}=ne;u(fe,k,K,D,ue=>ue?F(ue):S($,q,I,D,F))})}function E($,x,q,I,D){n.readlink(x,(F,k)=>{if(F)return D(F);if(I.dereference&&(k=c.resolve(process.cwd(),k)),$)n.readlink(q,(K,W)=>K?K.code==="EINVAL"||K.code==="UNKNOWN"?n.symlink(k,q,D):D(K):(I.dereference&&(W=c.resolve(process.cwd(),W)),r.isSrcSubdir(k,W)?D(new Error(`Cannot copy '${k}' to a subdirectory of itself, '${W}'.`)):$.isDirectory()&&r.isSrcSubdir(W,k)?D(new Error(`Cannot overwrite '${W}' with '${k}'.`)):M(k,q,D)));else return n.symlink(k,q,D)})}function M($,x,q){n.unlink(x,I=>I?q(I):n.symlink($,x,q))}return Sn=e,Sn}var An,Ma;function ud(){if(Ma)return An;Ma=1;const n=Xe(),c=Pe,s=ut().mkdirsSync,f=zu().utimesMillisSync,l=Gt();function r(S,b,E){typeof E=="function"&&(E={filter:E}),E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:M,destStat:$}=l.checkPathsSync(S,b,"copy",E);return l.checkParentPathsSync(S,M,b,"copy"),e($,S,b,E)}function e(S,b,E,M){if(M.filter&&!M.filter(b,E))return;const $=c.dirname(E);return n.existsSync($)||s($),t(S,b,E,M)}function i(S,b,E,M){if(!(M.filter&&!M.filter(b,E)))return t(S,b,E,M)}function t(S,b,E,M){const x=(M.dereference?n.statSync:n.lstatSync)(b);if(x.isDirectory())return _(x,S,b,E,M);if(x.isFile()||x.isCharacterDevice()||x.isBlockDevice())return u(x,S,b,E,M);if(x.isSymbolicLink())return U(S,b,E,M);throw x.isSocket()?new Error(`Cannot copy a socket file: ${b}`):x.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${b}`):new Error(`Unknown file: ${b}`)}function u(S,b,E,M,$){return b?o(S,E,M,$):d(S,E,M,$)}function o(S,b,E,M){if(M.overwrite)return n.unlinkSync(E),d(S,b,E,M);if(M.errorOnExist)throw new Error(`'${E}' already exists`)}function d(S,b,E,M){return n.copyFileSync(b,E),M.preserveTimestamps&&a(S.mode,b,E),g(E,S.mode)}function a(S,b,E){return p(S)&&v(E,S),m(b,E)}function p(S){return(S&128)===0}function v(S,b){return g(S,b|128)}function g(S,b){return n.chmodSync(S,b)}function m(S,b){const E=n.statSync(S);return f(b,E.atime,E.mtime)}function _(S,b,E,M,$){return b?O(E,M,$):R(S.mode,E,M,$)}function R(S,b,E,M){return n.mkdirSync(E),O(b,E,M),g(E,S)}function O(S,b,E){n.readdirSync(S).forEach(M=>P(M,S,b,E))}function P(S,b,E,M){const $=c.join(b,S),x=c.join(E,S),{destStat:q}=l.checkPathsSync($,x,"copy",M);return i(q,$,x,M)}function U(S,b,E,M){let $=n.readlinkSync(b);if(M.dereference&&($=c.resolve(process.cwd(),$)),S){let x;try{x=n.readlinkSync(E)}catch(q){if(q.code==="EINVAL"||q.code==="UNKNOWN")return n.symlinkSync($,E);throw q}if(M.dereference&&(x=c.resolve(process.cwd(),x)),l.isSrcSubdir($,x))throw new Error(`Cannot copy '${$}' to a subdirectory of itself, '${x}'.`);if(n.statSync(E).isDirectory()&&l.isSrcSubdir(x,$))throw new Error(`Cannot overwrite '${x}' with '${$}'.`);return T($,E)}else return n.symlinkSync($,E)}function T(S,b){return n.unlinkSync(b),n.symlinkSync(S,b)}return An=r,An}var bn,Ba;function Uo(){if(Ba)return bn;Ba=1;const n=Qe().fromCallback;return bn={copy:n(ld()),copySync:ud()},bn}var Tn,ja;function cd(){if(ja)return Tn;ja=1;const n=Xe(),c=Pe,s=ku,f=process.platform==="win32";function l(v){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{v[m]=v[m]||n[m],m=m+"Sync",v[m]=v[m]||n[m]}),v.maxBusyTries=v.maxBusyTries||3}function r(v,g,m){let _=0;typeof g=="function"&&(m=g,g={}),s(v,"rimraf: missing path"),s.strictEqual(typeof v,"string","rimraf: path should be a string"),s.strictEqual(typeof m,"function","rimraf: callback function required"),s(g,"rimraf: invalid options argument provided"),s.strictEqual(typeof g,"object","rimraf: options should be object"),l(g),e(v,g,function R(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&_<g.maxBusyTries){_++;const P=_*100;return setTimeout(()=>e(v,g,R),P)}O.code==="ENOENT"&&(O=null)}m(O)})}function e(v,g,m){s(v),s(g),s(typeof m=="function"),g.lstat(v,(_,R)=>{if(_&&_.code==="ENOENT")return m(null);if(_&&_.code==="EPERM"&&f)return i(v,g,_,m);if(R&&R.isDirectory())return u(v,g,_,m);g.unlink(v,O=>{if(O){if(O.code==="ENOENT")return m(null);if(O.code==="EPERM")return f?i(v,g,O,m):u(v,g,O,m);if(O.code==="EISDIR")return u(v,g,O,m)}return m(O)})})}function i(v,g,m,_){s(v),s(g),s(typeof _=="function"),g.chmod(v,438,R=>{R?_(R.code==="ENOENT"?null:m):g.stat(v,(O,P)=>{O?_(O.code==="ENOENT"?null:m):P.isDirectory()?u(v,g,m,_):g.unlink(v,_)})})}function t(v,g,m){let _;s(v),s(g);try{g.chmodSync(v,438)}catch(R){if(R.code==="ENOENT")return;throw m}try{_=g.statSync(v)}catch(R){if(R.code==="ENOENT")return;throw m}_.isDirectory()?a(v,g,m):g.unlinkSync(v)}function u(v,g,m,_){s(v),s(g),s(typeof _=="function"),g.rmdir(v,R=>{R&&(R.code==="ENOTEMPTY"||R.code==="EEXIST"||R.code==="EPERM")?o(v,g,_):R&&R.code==="ENOTDIR"?_(m):_(R)})}function o(v,g,m){s(v),s(g),s(typeof m=="function"),g.readdir(v,(_,R)=>{if(_)return m(_);let O=R.length,P;if(O===0)return g.rmdir(v,m);R.forEach(U=>{r(c.join(v,U),g,T=>{if(!P){if(T)return m(P=T);--O===0&&g.rmdir(v,m)}})})})}function d(v,g){let m;g=g||{},l(g),s(v,"rimraf: missing path"),s.strictEqual(typeof v,"string","rimraf: path should be a string"),s(g,"rimraf: missing options"),s.strictEqual(typeof g,"object","rimraf: options should be object");try{m=g.lstatSync(v)}catch(_){if(_.code==="ENOENT")return;_.code==="EPERM"&&f&&t(v,g,_)}try{m&&m.isDirectory()?a(v,g,null):g.unlinkSync(v)}catch(_){if(_.code==="ENOENT")return;if(_.code==="EPERM")return f?t(v,g,_):a(v,g,_);if(_.code!=="EISDIR")throw _;a(v,g,_)}}function a(v,g,m){s(v),s(g);try{g.rmdirSync(v)}catch(_){if(_.code==="ENOTDIR")throw m;if(_.code==="ENOTEMPTY"||_.code==="EEXIST"||_.code==="EPERM")p(v,g);else if(_.code!=="ENOENT")throw _}}function p(v,g){if(s(v),s(g),g.readdirSync(v).forEach(m=>d(c.join(v,m),g)),f){const m=Date.now();do try{return g.rmdirSync(v,g)}catch{}while(Date.now()-m<500)}else return g.rmdirSync(v,g)}return Tn=r,r.sync=d,Tn}var Rn,Ha;function Xr(){if(Ha)return Rn;Ha=1;const n=Xe(),c=Qe().fromCallback,s=cd();function f(r,e){if(n.rm)return n.rm(r,{recursive:!0,force:!0},e);s(r,e)}function l(r){if(n.rmSync)return n.rmSync(r,{recursive:!0,force:!0});s.sync(r)}return Rn={remove:c(f),removeSync:l},Rn}var Cn,Ga;function fd(){if(Ga)return Cn;Ga=1;const n=Qe().fromPromise,c=Ht(),s=Pe,f=ut(),l=Xr(),r=n(async function(t){let u;try{u=await c.readdir(t)}catch{return f.mkdirs(t)}return Promise.all(u.map(o=>l.remove(s.join(t,o))))});function e(i){let t;try{t=c.readdirSync(i)}catch{return f.mkdirsSync(i)}t.forEach(u=>{u=s.join(i,u),l.removeSync(u)})}return Cn={emptyDirSync:e,emptydirSync:e,emptyDir:r,emptydir:r},Cn}var On,Wa;function dd(){if(Wa)return On;Wa=1;const n=Qe().fromCallback,c=Pe,s=Xe(),f=ut();function l(e,i){function t(){s.writeFile(e,"",u=>{if(u)return i(u);i()})}s.stat(e,(u,o)=>{if(!u&&o.isFile())return i();const d=c.dirname(e);s.stat(d,(a,p)=>{if(a)return a.code==="ENOENT"?f.mkdirs(d,v=>{if(v)return i(v);t()}):i(a);p.isDirectory()?t():s.readdir(d,v=>{if(v)return i(v)})})})}function r(e){let i;try{i=s.statSync(e)}catch{}if(i&&i.isFile())return;const t=c.dirname(e);try{s.statSync(t).isDirectory()||s.readdirSync(t)}catch(u){if(u&&u.code==="ENOENT")f.mkdirsSync(t);else throw u}s.writeFileSync(e,"")}return On={createFile:n(l),createFileSync:r},On}var Pn,za;function hd(){if(za)return Pn;za=1;const n=Qe().fromCallback,c=Pe,s=Xe(),f=ut(),l=Nt().pathExists,{areIdentical:r}=Gt();function e(t,u,o){function d(a,p){s.link(a,p,v=>{if(v)return o(v);o(null)})}s.lstat(u,(a,p)=>{s.lstat(t,(v,g)=>{if(v)return v.message=v.message.replace("lstat","ensureLink"),o(v);if(p&&r(g,p))return o(null);const m=c.dirname(u);l(m,(_,R)=>{if(_)return o(_);if(R)return d(t,u);f.mkdirs(m,O=>{if(O)return o(O);d(t,u)})})})})}function i(t,u){let o;try{o=s.lstatSync(u)}catch{}try{const p=s.lstatSync(t);if(o&&r(p,o))return}catch(p){throw p.message=p.message.replace("lstat","ensureLink"),p}const d=c.dirname(u);return s.existsSync(d)||f.mkdirsSync(d),s.linkSync(t,u)}return Pn={createLink:n(e),createLinkSync:i},Pn}var Dn,Va;function pd(){if(Va)return Dn;Va=1;const n=Pe,c=Xe(),s=Nt().pathExists;function f(r,e,i){if(n.isAbsolute(r))return c.lstat(r,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),i(t)):i(null,{toCwd:r,toDst:r}));{const t=n.dirname(e),u=n.join(t,r);return s(u,(o,d)=>o?i(o):d?i(null,{toCwd:u,toDst:r}):c.lstat(r,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),i(a)):i(null,{toCwd:r,toDst:n.relative(t,r)})))}}function l(r,e){let i;if(n.isAbsolute(r)){if(i=c.existsSync(r),!i)throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}else{const t=n.dirname(e),u=n.join(t,r);if(i=c.existsSync(u),i)return{toCwd:u,toDst:r};if(i=c.existsSync(r),!i)throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:n.relative(t,r)}}}return Dn={symlinkPaths:f,symlinkPathsSync:l},Dn}var In,Ya;function md(){if(Ya)return In;Ya=1;const n=Xe();function c(f,l,r){if(r=typeof l=="function"?l:r,l=typeof l=="function"?!1:l,l)return r(null,l);n.lstat(f,(e,i)=>{if(e)return r(null,"file");l=i&&i.isDirectory()?"dir":"file",r(null,l)})}function s(f,l){let r;if(l)return l;try{r=n.lstatSync(f)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}return In={symlinkType:c,symlinkTypeSync:s},In}var Nn,Xa;function gd(){if(Xa)return Nn;Xa=1;const n=Qe().fromCallback,c=Pe,s=Ht(),f=ut(),l=f.mkdirs,r=f.mkdirsSync,e=pd(),i=e.symlinkPaths,t=e.symlinkPathsSync,u=md(),o=u.symlinkType,d=u.symlinkTypeSync,a=Nt().pathExists,{areIdentical:p}=Gt();function v(_,R,O,P){P=typeof O=="function"?O:P,O=typeof O=="function"?!1:O,s.lstat(R,(U,T)=>{!U&&T.isSymbolicLink()?Promise.all([s.stat(_),s.stat(R)]).then(([S,b])=>{if(p(S,b))return P(null);g(_,R,O,P)}):g(_,R,O,P)})}function g(_,R,O,P){i(_,R,(U,T)=>{if(U)return P(U);_=T.toDst,o(T.toCwd,O,(S,b)=>{if(S)return P(S);const E=c.dirname(R);a(E,(M,$)=>{if(M)return P(M);if($)return s.symlink(_,R,b,P);l(E,x=>{if(x)return P(x);s.symlink(_,R,b,P)})})})})}function m(_,R,O){let P;try{P=s.lstatSync(R)}catch{}if(P&&P.isSymbolicLink()){const b=s.statSync(_),E=s.statSync(R);if(p(b,E))return}const U=t(_,R);_=U.toDst,O=d(U.toCwd,O);const T=c.dirname(R);return s.existsSync(T)||r(T),s.symlinkSync(_,R,O)}return Nn={createSymlink:n(v),createSymlinkSync:m},Nn}var Fn,Ja;function vd(){if(Ja)return Fn;Ja=1;const{createFile:n,createFileSync:c}=dd(),{createLink:s,createLinkSync:f}=hd(),{createSymlink:l,createSymlinkSync:r}=gd();return Fn={createFile:n,createFileSync:c,ensureFile:n,ensureFileSync:c,createLink:s,createLinkSync:f,ensureLink:s,ensureLinkSync:f,createSymlink:l,createSymlinkSync:r,ensureSymlink:l,ensureSymlinkSync:r},Fn}var Ln,Ka;function ko(){if(Ka)return Ln;Ka=1;function n(s,{EOL:f=`
`,finalEOL:l=!0,replacer:r=null,spaces:e}={}){const i=l?f:"";return JSON.stringify(s,r,e).replace(/\n/g,f)+i}function c(s){return Buffer.isBuffer(s)&&(s=s.toString("utf8")),s.replace(/^\uFEFF/,"")}return Ln={stringify:n,stripBom:c},Ln}var xn,Qa;function yd(){if(Qa)return xn;Qa=1;let n;try{n=Xe()}catch{n=Ye}const c=Qe(),{stringify:s,stripBom:f}=ko();async function l(d,a={}){typeof a=="string"&&(a={encoding:a});const p=a.fs||n,v="throws"in a?a.throws:!0;let g=await c.fromCallback(p.readFile)(d,a);g=f(g);let m;try{m=JSON.parse(g,a?a.reviver:null)}catch(_){if(v)throw _.message=`${d}: ${_.message}`,_;return null}return m}const r=c.fromPromise(l);function e(d,a={}){typeof a=="string"&&(a={encoding:a});const p=a.fs||n,v="throws"in a?a.throws:!0;try{let g=p.readFileSync(d,a);return g=f(g),JSON.parse(g,a.reviver)}catch(g){if(v)throw g.message=`${d}: ${g.message}`,g;return null}}async function i(d,a,p={}){const v=p.fs||n,g=s(a,p);await c.fromCallback(v.writeFile)(d,g,p)}const t=c.fromPromise(i);function u(d,a,p={}){const v=p.fs||n,g=s(a,p);return v.writeFileSync(d,g,p)}return xn={readFile:r,readFileSync:e,writeFile:t,writeFileSync:u},xn}var $n,Za;function Ed(){if(Za)return $n;Za=1;const n=yd();return $n={readJson:n.readFile,readJsonSync:n.readFileSync,writeJson:n.writeFile,writeJsonSync:n.writeFileSync},$n}var Un,es;function qo(){if(es)return Un;es=1;const n=Qe().fromCallback,c=Xe(),s=Pe,f=ut(),l=Nt().pathExists;function r(i,t,u,o){typeof u=="function"&&(o=u,u="utf8");const d=s.dirname(i);l(d,(a,p)=>{if(a)return o(a);if(p)return c.writeFile(i,t,u,o);f.mkdirs(d,v=>{if(v)return o(v);c.writeFile(i,t,u,o)})})}function e(i,...t){const u=s.dirname(i);if(c.existsSync(u))return c.writeFileSync(i,...t);f.mkdirsSync(u),c.writeFileSync(i,...t)}return Un={outputFile:n(r),outputFileSync:e},Un}var kn,ts;function wd(){if(ts)return kn;ts=1;const{stringify:n}=ko(),{outputFile:c}=qo();async function s(f,l,r={}){const e=n(l,r);await c(f,e,r)}return kn=s,kn}var qn,rs;function _d(){if(rs)return qn;rs=1;const{stringify:n}=ko(),{outputFileSync:c}=qo();function s(f,l,r){const e=n(l,r);c(f,e,r)}return qn=s,qn}var Mn,ns;function Sd(){if(ns)return Mn;ns=1;const n=Qe().fromPromise,c=Ed();return c.outputJson=n(wd()),c.outputJsonSync=_d(),c.outputJSON=c.outputJson,c.outputJSONSync=c.outputJsonSync,c.writeJSON=c.writeJson,c.writeJSONSync=c.writeJsonSync,c.readJSON=c.readJson,c.readJSONSync=c.readJsonSync,Mn=c,Mn}var Bn,is;function Ad(){if(is)return Bn;is=1;const n=Xe(),c=Pe,s=Uo().copy,f=Xr().remove,l=ut().mkdirp,r=Nt().pathExists,e=Gt();function i(a,p,v,g){typeof v=="function"&&(g=v,v={}),v=v||{};const m=v.overwrite||v.clobber||!1;e.checkPaths(a,p,"move",v,(_,R)=>{if(_)return g(_);const{srcStat:O,isChangingCase:P=!1}=R;e.checkParentPaths(a,O,p,"move",U=>{if(U)return g(U);if(t(p))return u(a,p,m,P,g);l(c.dirname(p),T=>T?g(T):u(a,p,m,P,g))})})}function t(a){const p=c.dirname(a);return c.parse(p).root===p}function u(a,p,v,g,m){if(g)return o(a,p,v,m);if(v)return f(p,_=>_?m(_):o(a,p,v,m));r(p,(_,R)=>_?m(_):R?m(new Error("dest already exists.")):o(a,p,v,m))}function o(a,p,v,g){n.rename(a,p,m=>m?m.code!=="EXDEV"?g(m):d(a,p,v,g):g())}function d(a,p,v,g){s(a,p,{overwrite:v,errorOnExist:!0},_=>_?g(_):f(a,g))}return Bn=i,Bn}var jn,os;function bd(){if(os)return jn;os=1;const n=Xe(),c=Pe,s=Uo().copySync,f=Xr().removeSync,l=ut().mkdirpSync,r=Gt();function e(d,a,p){p=p||{};const v=p.overwrite||p.clobber||!1,{srcStat:g,isChangingCase:m=!1}=r.checkPathsSync(d,a,"move",p);return r.checkParentPathsSync(d,g,a,"move"),i(a)||l(c.dirname(a)),t(d,a,v,m)}function i(d){const a=c.dirname(d);return c.parse(a).root===a}function t(d,a,p,v){if(v)return u(d,a,p);if(p)return f(a),u(d,a,p);if(n.existsSync(a))throw new Error("dest already exists.");return u(d,a,p)}function u(d,a,p){try{n.renameSync(d,a)}catch(v){if(v.code!=="EXDEV")throw v;return o(d,a,p)}}function o(d,a,p){return s(d,a,{overwrite:p,errorOnExist:!0}),f(d)}return jn=e,jn}var Hn,as;function Td(){if(as)return Hn;as=1;const n=Qe().fromCallback;return Hn={move:n(Ad()),moveSync:bd()},Hn}var Gn,ss;function _t(){return ss||(ss=1,Gn={...Ht(),...Uo(),...fd(),...vd(),...Sd(),...ut(),...Td(),...qo(),...Nt(),...Xr()}),Gn}var Qt={},Dt={},We={},Br={},yt={},ls;function Sr(){if(ls)return yt;ls=1;function n(e){return typeof e>"u"||e===null}function c(e){return typeof e=="object"&&e!==null}function s(e){return Array.isArray(e)?e:n(e)?[]:[e]}function f(e,i){var t,u,o,d;if(i)for(d=Object.keys(i),t=0,u=d.length;t<u;t+=1)o=d[t],e[o]=i[o];return e}function l(e,i){var t="",u;for(u=0;u<i;u+=1)t+=e;return t}function r(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}return yt.isNothing=n,yt.isObject=c,yt.toArray=s,yt.repeat=l,yt.isNegativeZero=r,yt.extend=f,yt}var Wn,us;function Ar(){if(us)return Wn;us=1;function n(s,f){var l="",r=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(l+='in "'+s.mark.name+'" '),l+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!f&&s.mark.snippet&&(l+=`

`+s.mark.snippet),r+" "+l):r}function c(s,f){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=f,this.message=n(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.toString=function(f){return this.name+": "+n(this,f)},Wn=c,Wn}var zn,cs;function Rd(){if(cs)return zn;cs=1;var n=Sr();function c(l,r,e,i,t){var u="",o="",d=Math.floor(t/2)-1;return i-r>d&&(u=" ... ",r=i-d+u.length),e-i>d&&(o=" ...",e=i+d-o.length),{str:u+l.slice(r,e).replace(/\t/g,"→")+o,pos:i-r+u.length}}function s(l,r){return n.repeat(" ",r-l.length)+l}function f(l,r){if(r=Object.create(r||null),!l.buffer)return null;r.maxLength||(r.maxLength=79),typeof r.indent!="number"&&(r.indent=1),typeof r.linesBefore!="number"&&(r.linesBefore=3),typeof r.linesAfter!="number"&&(r.linesAfter=2);for(var e=/\r?\n|\r|\0/g,i=[0],t=[],u,o=-1;u=e.exec(l.buffer);)t.push(u.index),i.push(u.index+u[0].length),l.position<=u.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var d="",a,p,v=Math.min(l.line+r.linesAfter,t.length).toString().length,g=r.maxLength-(r.indent+v+3);for(a=1;a<=r.linesBefore&&!(o-a<0);a++)p=c(l.buffer,i[o-a],t[o-a],l.position-(i[o]-i[o-a]),g),d=n.repeat(" ",r.indent)+s((l.line-a+1).toString(),v)+" | "+p.str+`
`+d;for(p=c(l.buffer,i[o],t[o],l.position,g),d+=n.repeat(" ",r.indent)+s((l.line+1).toString(),v)+" | "+p.str+`
`,d+=n.repeat("-",r.indent+v+3+p.pos)+`^
`,a=1;a<=r.linesAfter&&!(o+a>=t.length);a++)p=c(l.buffer,i[o+a],t[o+a],l.position-(i[o]-i[o+a]),g),d+=n.repeat(" ",r.indent)+s((l.line+a+1).toString(),v)+" | "+p.str+`
`;return d.replace(/\n$/,"")}return zn=f,zn}var Vn,fs;function ze(){if(fs)return Vn;fs=1;var n=Ar(),c=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];function f(r){var e={};return r!==null&&Object.keys(r).forEach(function(i){r[i].forEach(function(t){e[String(t)]=i})}),e}function l(r,e){if(e=e||{},Object.keys(e).forEach(function(i){if(c.indexOf(i)===-1)throw new n('Unknown option "'+i+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=f(e.styleAliases||null),s.indexOf(this.kind)===-1)throw new n('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}return Vn=l,Vn}var Yn,ds;function Vu(){if(ds)return Yn;ds=1;var n=Ar(),c=ze();function s(r,e){var i=[];return r[e].forEach(function(t){var u=i.length;i.forEach(function(o,d){o.tag===t.tag&&o.kind===t.kind&&o.multi===t.multi&&(u=d)}),i[u]=t}),i}function f(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function t(u){u.multi?(r.multi[u.kind].push(u),r.multi.fallback.push(u)):r[u.kind][u.tag]=r.fallback[u.tag]=u}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(t);return r}function l(r){return this.extend(r)}return l.prototype.extend=function(e){var i=[],t=[];if(e instanceof c)t.push(e);else if(Array.isArray(e))t=t.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(t=t.concat(e.explicit));else throw new n("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(o){if(!(o instanceof c))throw new n("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new n("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new n("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),t.forEach(function(o){if(!(o instanceof c))throw new n("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var u=Object.create(l.prototype);return u.implicit=(this.implicit||[]).concat(i),u.explicit=(this.explicit||[]).concat(t),u.compiledImplicit=s(u,"implicit"),u.compiledExplicit=s(u,"explicit"),u.compiledTypeMap=f(u.compiledImplicit,u.compiledExplicit),u},Yn=l,Yn}var Xn,hs;function Yu(){if(hs)return Xn;hs=1;var n=ze();return Xn=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(c){return c!==null?c:""}}),Xn}var Jn,ps;function Xu(){if(ps)return Jn;ps=1;var n=ze();return Jn=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(c){return c!==null?c:[]}}),Jn}var Kn,ms;function Ju(){if(ms)return Kn;ms=1;var n=ze();return Kn=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(c){return c!==null?c:{}}}),Kn}var Qn,gs;function Ku(){if(gs)return Qn;gs=1;var n=Vu();return Qn=new n({explicit:[Yu(),Xu(),Ju()]}),Qn}var Zn,vs;function Qu(){if(vs)return Zn;vs=1;var n=ze();function c(l){if(l===null)return!0;var r=l.length;return r===1&&l==="~"||r===4&&(l==="null"||l==="Null"||l==="NULL")}function s(){return null}function f(l){return l===null}return Zn=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:c,construct:s,predicate:f,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Zn}var ei,ys;function Zu(){if(ys)return ei;ys=1;var n=ze();function c(l){if(l===null)return!1;var r=l.length;return r===4&&(l==="true"||l==="True"||l==="TRUE")||r===5&&(l==="false"||l==="False"||l==="FALSE")}function s(l){return l==="true"||l==="True"||l==="TRUE"}function f(l){return Object.prototype.toString.call(l)==="[object Boolean]"}return ei=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c,construct:s,predicate:f,represent:{lowercase:function(l){return l?"true":"false"},uppercase:function(l){return l?"TRUE":"FALSE"},camelcase:function(l){return l?"True":"False"}},defaultStyle:"lowercase"}),ei}var ti,Es;function ec(){if(Es)return ti;Es=1;var n=Sr(),c=ze();function s(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function f(t){return 48<=t&&t<=55}function l(t){return 48<=t&&t<=57}function r(t){if(t===null)return!1;var u=t.length,o=0,d=!1,a;if(!u)return!1;if(a=t[o],(a==="-"||a==="+")&&(a=t[++o]),a==="0"){if(o+1===u)return!0;if(a=t[++o],a==="b"){for(o++;o<u;o++)if(a=t[o],a!=="_"){if(a!=="0"&&a!=="1")return!1;d=!0}return d&&a!=="_"}if(a==="x"){for(o++;o<u;o++)if(a=t[o],a!=="_"){if(!s(t.charCodeAt(o)))return!1;d=!0}return d&&a!=="_"}if(a==="o"){for(o++;o<u;o++)if(a=t[o],a!=="_"){if(!f(t.charCodeAt(o)))return!1;d=!0}return d&&a!=="_"}}if(a==="_")return!1;for(;o<u;o++)if(a=t[o],a!=="_"){if(!l(t.charCodeAt(o)))return!1;d=!0}return!(!d||a==="_")}function e(t){var u=t,o=1,d;if(u.indexOf("_")!==-1&&(u=u.replace(/_/g,"")),d=u[0],(d==="-"||d==="+")&&(d==="-"&&(o=-1),u=u.slice(1),d=u[0]),u==="0")return 0;if(d==="0"){if(u[1]==="b")return o*parseInt(u.slice(2),2);if(u[1]==="x")return o*parseInt(u.slice(2),16);if(u[1]==="o")return o*parseInt(u.slice(2),8)}return o*parseInt(u,10)}function i(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!n.isNegativeZero(t)}return ti=new c("tag:yaml.org,2002:int",{kind:"scalar",resolve:r,construct:e,predicate:i,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ti}var ri,ws;function tc(){if(ws)return ri;ws=1;var n=Sr(),c=ze(),s=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function f(t){return!(t===null||!s.test(t)||t[t.length-1]==="_")}function l(t){var u,o;return u=t.replace(/_/g,"").toLowerCase(),o=u[0]==="-"?-1:1,"+-".indexOf(u[0])>=0&&(u=u.slice(1)),u===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:u===".nan"?NaN:o*parseFloat(u,10)}var r=/^[-+]?[0-9]+e/;function e(t,u){var o;if(isNaN(t))switch(u){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(u){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(u){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(t))return"-0.0";return o=t.toString(10),r.test(o)?o.replace("e",".e"):o}function i(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||n.isNegativeZero(t))}return ri=new c("tag:yaml.org,2002:float",{kind:"scalar",resolve:f,construct:l,predicate:i,represent:e,defaultStyle:"lowercase"}),ri}var ni,_s;function rc(){return _s||(_s=1,ni=Ku().extend({implicit:[Qu(),Zu(),ec(),tc()]})),ni}var ii,Ss;function nc(){return Ss||(Ss=1,ii=rc()),ii}var oi,As;function ic(){if(As)return oi;As=1;var n=ze(),c=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function f(e){return e===null?!1:c.exec(e)!==null||s.exec(e)!==null}function l(e){var i,t,u,o,d,a,p,v=0,g=null,m,_,R;if(i=c.exec(e),i===null&&(i=s.exec(e)),i===null)throw new Error("Date resolve error");if(t=+i[1],u=+i[2]-1,o=+i[3],!i[4])return new Date(Date.UTC(t,u,o));if(d=+i[4],a=+i[5],p=+i[6],i[7]){for(v=i[7].slice(0,3);v.length<3;)v+="0";v=+v}return i[9]&&(m=+i[10],_=+(i[11]||0),g=(m*60+_)*6e4,i[9]==="-"&&(g=-g)),R=new Date(Date.UTC(t,u,o,d,a,p,v)),g&&R.setTime(R.getTime()-g),R}function r(e){return e.toISOString()}return oi=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:f,construct:l,instanceOf:Date,represent:r}),oi}var ai,bs;function oc(){if(bs)return ai;bs=1;var n=ze();function c(s){return s==="<<"||s===null}return ai=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:c}),ai}var si,Ts;function ac(){if(Ts)return si;Ts=1;var n=ze(),c=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function s(e){if(e===null)return!1;var i,t,u=0,o=e.length,d=c;for(t=0;t<o;t++)if(i=d.indexOf(e.charAt(t)),!(i>64)){if(i<0)return!1;u+=6}return u%8===0}function f(e){var i,t,u=e.replace(/[\r\n=]/g,""),o=u.length,d=c,a=0,p=[];for(i=0;i<o;i++)i%4===0&&i&&(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)),a=a<<6|d.indexOf(u.charAt(i));return t=o%4*6,t===0?(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)):t===18?(p.push(a>>10&255),p.push(a>>2&255)):t===12&&p.push(a>>4&255),new Uint8Array(p)}function l(e){var i="",t=0,u,o,d=e.length,a=c;for(u=0;u<d;u++)u%3===0&&u&&(i+=a[t>>18&63],i+=a[t>>12&63],i+=a[t>>6&63],i+=a[t&63]),t=(t<<8)+e[u];return o=d%3,o===0?(i+=a[t>>18&63],i+=a[t>>12&63],i+=a[t>>6&63],i+=a[t&63]):o===2?(i+=a[t>>10&63],i+=a[t>>4&63],i+=a[t<<2&63],i+=a[64]):o===1&&(i+=a[t>>2&63],i+=a[t<<4&63],i+=a[64],i+=a[64]),i}function r(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}return si=new n("tag:yaml.org,2002:binary",{kind:"scalar",resolve:s,construct:f,predicate:r,represent:l}),si}var li,Rs;function sc(){if(Rs)return li;Rs=1;var n=ze(),c=Object.prototype.hasOwnProperty,s=Object.prototype.toString;function f(r){if(r===null)return!0;var e=[],i,t,u,o,d,a=r;for(i=0,t=a.length;i<t;i+=1){if(u=a[i],d=!1,s.call(u)!=="[object Object]")return!1;for(o in u)if(c.call(u,o))if(!d)d=!0;else return!1;if(!d)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function l(r){return r!==null?r:[]}return li=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:f,construct:l}),li}var ui,Cs;function lc(){if(Cs)return ui;Cs=1;var n=ze(),c=Object.prototype.toString;function s(l){if(l===null)return!0;var r,e,i,t,u,o=l;for(u=new Array(o.length),r=0,e=o.length;r<e;r+=1){if(i=o[r],c.call(i)!=="[object Object]"||(t=Object.keys(i),t.length!==1))return!1;u[r]=[t[0],i[t[0]]]}return!0}function f(l){if(l===null)return[];var r,e,i,t,u,o=l;for(u=new Array(o.length),r=0,e=o.length;r<e;r+=1)i=o[r],t=Object.keys(i),u[r]=[t[0],i[t[0]]];return u}return ui=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:s,construct:f}),ui}var ci,Os;function uc(){if(Os)return ci;Os=1;var n=ze(),c=Object.prototype.hasOwnProperty;function s(l){if(l===null)return!0;var r,e=l;for(r in e)if(c.call(e,r)&&e[r]!==null)return!1;return!0}function f(l){return l!==null?l:{}}return ci=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:s,construct:f}),ci}var fi,Ps;function Mo(){return Ps||(Ps=1,fi=nc().extend({implicit:[ic(),oc()],explicit:[ac(),sc(),lc(),uc()]})),fi}var Ds;function Cd(){if(Ds)return Br;Ds=1;var n=Sr(),c=Ar(),s=Rd(),f=Mo(),l=Object.prototype.hasOwnProperty,r=1,e=2,i=3,t=4,u=1,o=2,d=3,a=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,v=/[,\[\]\{\}]/,g=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _(h){return Object.prototype.toString.call(h)}function R(h){return h===10||h===13}function O(h){return h===9||h===32}function P(h){return h===9||h===32||h===10||h===13}function U(h){return h===44||h===91||h===93||h===123||h===125}function T(h){var B;return 48<=h&&h<=57?h-48:(B=h|32,97<=B&&B<=102?B-97+10:-1)}function S(h){return h===120?2:h===117?4:h===85?8:0}function b(h){return 48<=h&&h<=57?h-48:-1}function E(h){return h===48?"\0":h===97?"\x07":h===98?"\b":h===116||h===9?"	":h===110?`
`:h===118?"\v":h===102?"\f":h===114?"\r":h===101?"\x1B":h===32?" ":h===34?'"':h===47?"/":h===92?"\\":h===78?"":h===95?" ":h===76?"\u2028":h===80?"\u2029":""}function M(h){return h<=65535?String.fromCharCode(h):String.fromCharCode((h-65536>>10)+55296,(h-65536&1023)+56320)}for(var $=new Array(256),x=new Array(256),q=0;q<256;q++)$[q]=E(q)?1:0,x[q]=E(q);function I(h,B){this.input=h,this.filename=B.filename||null,this.schema=B.schema||f,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=h.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function D(h,B){var G={name:h.filename,buffer:h.input.slice(0,-1),position:h.position,line:h.line,column:h.position-h.lineStart};return G.snippet=s(G),new c(B,G)}function F(h,B){throw D(h,B)}function k(h,B){h.onWarning&&h.onWarning.call(null,D(h,B))}var K={YAML:function(B,G,re){var z,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),z=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),z===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(z[1],10),Z=parseInt(z[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&k(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var z,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),z=re[0],te=re[1],g.test(z)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),l.call(B.tagMap,z)&&F(B,'there is a previously declared suffix for "'+z+'" tag handle'),m.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[z]=te}};function W(h,B,G,re){var z,te,Z,oe;if(B<G){if(oe=h.input.slice(B,G),re)for(z=0,te=oe.length;z<te;z+=1)Z=oe.charCodeAt(z),Z===9||32<=Z&&Z<=1114111||F(h,"expected valid JSON character");else a.test(oe)&&F(h,"the stream contains non-printable characters");h.result+=oe}}function ne(h,B,G,re){var z,te,Z,oe;for(n.isObject(G)||F(h,"cannot merge mappings; the provided source object is unacceptable"),z=Object.keys(G),Z=0,oe=z.length;Z<oe;Z+=1)te=z[Z],l.call(B,te)||(B[te]=G[te],re[te]=!0)}function fe(h,B,G,re,z,te,Z,oe,ve){var ye,Ce;if(Array.isArray(z))for(z=Array.prototype.slice.call(z),ye=0,Ce=z.length;ye<Ce;ye+=1)Array.isArray(z[ye])&&F(h,"nested arrays are not supported inside keys"),typeof z=="object"&&_(z[ye])==="[object Object]"&&(z[ye]="[object Object]");if(typeof z=="object"&&_(z)==="[object Object]"&&(z="[object Object]"),z=String(z),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ye=0,Ce=te.length;ye<Ce;ye+=1)ne(h,B,te[ye],G);else ne(h,B,te,G);else!h.json&&!l.call(G,z)&&l.call(B,z)&&(h.line=Z||h.line,h.lineStart=oe||h.lineStart,h.position=ve||h.position,F(h,"duplicated mapping key")),z==="__proto__"?Object.defineProperty(B,z,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[z]=te,delete G[z];return B}function ue(h){var B;B=h.input.charCodeAt(h.position),B===10?h.position++:B===13?(h.position++,h.input.charCodeAt(h.position)===10&&h.position++):F(h,"a line break is expected"),h.line+=1,h.lineStart=h.position,h.firstTabInLine=-1}function ie(h,B,G){for(var re=0,z=h.input.charCodeAt(h.position);z!==0;){for(;O(z);)z===9&&h.firstTabInLine===-1&&(h.firstTabInLine=h.position),z=h.input.charCodeAt(++h.position);if(B&&z===35)do z=h.input.charCodeAt(++h.position);while(z!==10&&z!==13&&z!==0);if(R(z))for(ue(h),z=h.input.charCodeAt(h.position),re++,h.lineIndent=0;z===32;)h.lineIndent++,z=h.input.charCodeAt(++h.position);else break}return G!==-1&&re!==0&&h.lineIndent<G&&k(h,"deficient indentation"),re}function Re(h){var B=h.position,G;return G=h.input.charCodeAt(B),!!((G===45||G===46)&&G===h.input.charCodeAt(B+1)&&G===h.input.charCodeAt(B+2)&&(B+=3,G=h.input.charCodeAt(B),G===0||P(G)))}function J(h,B){B===1?h.result+=" ":B>1&&(h.result+=n.repeat(`
`,B-1))}function Ee(h,B,G){var re,z,te,Z,oe,ve,ye,Ce,he=h.kind,Ue=h.result,w;if(w=h.input.charCodeAt(h.position),P(w)||U(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(z=h.input.charCodeAt(h.position+1),P(z)||G&&U(z)))return!1;for(h.kind="scalar",h.result="",te=Z=h.position,oe=!1;w!==0;){if(w===58){if(z=h.input.charCodeAt(h.position+1),P(z)||G&&U(z))break}else if(w===35){if(re=h.input.charCodeAt(h.position-1),P(re))break}else{if(h.position===h.lineStart&&Re(h)||G&&U(w))break;if(R(w))if(ve=h.line,ye=h.lineStart,Ce=h.lineIndent,ie(h,!1,-1),h.lineIndent>=B){oe=!0,w=h.input.charCodeAt(h.position);continue}else{h.position=Z,h.line=ve,h.lineStart=ye,h.lineIndent=Ce;break}}oe&&(W(h,te,Z,!1),J(h,h.line-ve),te=Z=h.position,oe=!1),O(w)||(Z=h.position+1),w=h.input.charCodeAt(++h.position)}return W(h,te,Z,!1),h.result?!0:(h.kind=he,h.result=Ue,!1)}function A(h,B){var G,re,z;if(G=h.input.charCodeAt(h.position),G!==39)return!1;for(h.kind="scalar",h.result="",h.position++,re=z=h.position;(G=h.input.charCodeAt(h.position))!==0;)if(G===39)if(W(h,re,h.position,!0),G=h.input.charCodeAt(++h.position),G===39)re=h.position,h.position++,z=h.position;else return!0;else R(G)?(W(h,re,z,!0),J(h,ie(h,!1,B)),re=z=h.position):h.position===h.lineStart&&Re(h)?F(h,"unexpected end of the document within a single quoted scalar"):(h.position++,z=h.position);F(h,"unexpected end of the stream within a single quoted scalar")}function y(h,B){var G,re,z,te,Z,oe;if(oe=h.input.charCodeAt(h.position),oe!==34)return!1;for(h.kind="scalar",h.result="",h.position++,G=re=h.position;(oe=h.input.charCodeAt(h.position))!==0;){if(oe===34)return W(h,G,h.position,!0),h.position++,!0;if(oe===92){if(W(h,G,h.position,!0),oe=h.input.charCodeAt(++h.position),R(oe))ie(h,!1,B);else if(oe<256&&$[oe])h.result+=x[oe],h.position++;else if((Z=S(oe))>0){for(z=Z,te=0;z>0;z--)oe=h.input.charCodeAt(++h.position),(Z=T(oe))>=0?te=(te<<4)+Z:F(h,"expected hexadecimal character");h.result+=M(te),h.position++}else F(h,"unknown escape sequence");G=re=h.position}else R(oe)?(W(h,G,re,!0),J(h,ie(h,!1,B)),G=re=h.position):h.position===h.lineStart&&Re(h)?F(h,"unexpected end of the document within a double quoted scalar"):(h.position++,re=h.position)}F(h,"unexpected end of the stream within a double quoted scalar")}function j(h,B){var G=!0,re,z,te,Z=h.tag,oe,ve=h.anchor,ye,Ce,he,Ue,w,H=Object.create(null),X,V,Q,ee;if(ee=h.input.charCodeAt(h.position),ee===91)Ce=93,w=!1,oe=[];else if(ee===123)Ce=125,w=!0,oe={};else return!1;for(h.anchor!==null&&(h.anchorMap[h.anchor]=oe),ee=h.input.charCodeAt(++h.position);ee!==0;){if(ie(h,!0,B),ee=h.input.charCodeAt(h.position),ee===Ce)return h.position++,h.tag=Z,h.anchor=ve,h.kind=w?"mapping":"sequence",h.result=oe,!0;G?ee===44&&F(h,"expected the node content, but found ','"):F(h,"missed comma between flow collection entries"),V=X=Q=null,he=Ue=!1,ee===63&&(ye=h.input.charCodeAt(h.position+1),P(ye)&&(he=Ue=!0,h.position++,ie(h,!0,B))),re=h.line,z=h.lineStart,te=h.position,$e(h,B,r,!1,!0),V=h.tag,X=h.result,ie(h,!0,B),ee=h.input.charCodeAt(h.position),(Ue||h.line===re)&&ee===58&&(he=!0,ee=h.input.charCodeAt(++h.position),ie(h,!0,B),$e(h,B,r,!1,!0),Q=h.result),w?fe(h,oe,H,V,X,Q,re,z,te):he?oe.push(fe(h,null,H,V,X,Q,re,z,te)):oe.push(X),ie(h,!0,B),ee=h.input.charCodeAt(h.position),ee===44?(G=!0,ee=h.input.charCodeAt(++h.position)):G=!1}F(h,"unexpected end of the stream within a flow collection")}function N(h,B){var G,re,z=u,te=!1,Z=!1,oe=B,ve=0,ye=!1,Ce,he;if(he=h.input.charCodeAt(h.position),he===124)re=!1;else if(he===62)re=!0;else return!1;for(h.kind="scalar",h.result="";he!==0;)if(he=h.input.charCodeAt(++h.position),he===43||he===45)u===z?z=he===43?d:o:F(h,"repeat of a chomping mode identifier");else if((Ce=b(he))>=0)Ce===0?F(h,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(h,"repeat of an indentation width identifier"):(oe=B+Ce-1,Z=!0);else break;if(O(he)){do he=h.input.charCodeAt(++h.position);while(O(he));if(he===35)do he=h.input.charCodeAt(++h.position);while(!R(he)&&he!==0)}for(;he!==0;){for(ue(h),h.lineIndent=0,he=h.input.charCodeAt(h.position);(!Z||h.lineIndent<oe)&&he===32;)h.lineIndent++,he=h.input.charCodeAt(++h.position);if(!Z&&h.lineIndent>oe&&(oe=h.lineIndent),R(he)){ve++;continue}if(h.lineIndent<oe){z===d?h.result+=n.repeat(`
`,te?1+ve:ve):z===u&&te&&(h.result+=`
`);break}for(re?O(he)?(ye=!0,h.result+=n.repeat(`
`,te?1+ve:ve)):ye?(ye=!1,h.result+=n.repeat(`
`,ve+1)):ve===0?te&&(h.result+=" "):h.result+=n.repeat(`
`,ve):h.result+=n.repeat(`
`,te?1+ve:ve),te=!0,Z=!0,ve=0,G=h.position;!R(he)&&he!==0;)he=h.input.charCodeAt(++h.position);W(h,G,h.position,!1)}return!0}function le(h,B){var G,re=h.tag,z=h.anchor,te=[],Z,oe=!1,ve;if(h.firstTabInLine!==-1)return!1;for(h.anchor!==null&&(h.anchorMap[h.anchor]=te),ve=h.input.charCodeAt(h.position);ve!==0&&(h.firstTabInLine!==-1&&(h.position=h.firstTabInLine,F(h,"tab characters must not be used in indentation")),!(ve!==45||(Z=h.input.charCodeAt(h.position+1),!P(Z))));){if(oe=!0,h.position++,ie(h,!0,-1)&&h.lineIndent<=B){te.push(null),ve=h.input.charCodeAt(h.position);continue}if(G=h.line,$e(h,B,i,!1,!0),te.push(h.result),ie(h,!0,-1),ve=h.input.charCodeAt(h.position),(h.line===G||h.lineIndent>B)&&ve!==0)F(h,"bad indentation of a sequence entry");else if(h.lineIndent<B)break}return oe?(h.tag=re,h.anchor=z,h.kind="sequence",h.result=te,!0):!1}function ge(h,B,G){var re,z,te,Z,oe,ve,ye=h.tag,Ce=h.anchor,he={},Ue=Object.create(null),w=null,H=null,X=null,V=!1,Q=!1,ee;if(h.firstTabInLine!==-1)return!1;for(h.anchor!==null&&(h.anchorMap[h.anchor]=he),ee=h.input.charCodeAt(h.position);ee!==0;){if(!V&&h.firstTabInLine!==-1&&(h.position=h.firstTabInLine,F(h,"tab characters must not be used in indentation")),re=h.input.charCodeAt(h.position+1),te=h.line,(ee===63||ee===58)&&P(re))ee===63?(V&&(fe(h,he,Ue,w,H,null,Z,oe,ve),w=H=X=null),Q=!0,V=!0,z=!0):V?(V=!1,z=!0):F(h,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),h.position+=1,ee=re;else{if(Z=h.line,oe=h.lineStart,ve=h.position,!$e(h,G,e,!1,!0))break;if(h.line===te){for(ee=h.input.charCodeAt(h.position);O(ee);)ee=h.input.charCodeAt(++h.position);if(ee===58)ee=h.input.charCodeAt(++h.position),P(ee)||F(h,"a whitespace character is expected after the key-value separator within a block mapping"),V&&(fe(h,he,Ue,w,H,null,Z,oe,ve),w=H=X=null),Q=!0,V=!1,z=!1,w=h.tag,H=h.result;else if(Q)F(h,"can not read an implicit mapping pair; a colon is missed");else return h.tag=ye,h.anchor=Ce,!0}else if(Q)F(h,"can not read a block mapping entry; a multiline key may not be an implicit key");else return h.tag=ye,h.anchor=Ce,!0}if((h.line===te||h.lineIndent>B)&&(V&&(Z=h.line,oe=h.lineStart,ve=h.position),$e(h,B,t,!0,z)&&(V?H=h.result:X=h.result),V||(fe(h,he,Ue,w,H,X,Z,oe,ve),w=H=X=null),ie(h,!0,-1),ee=h.input.charCodeAt(h.position)),(h.line===te||h.lineIndent>B)&&ee!==0)F(h,"bad indentation of a mapping entry");else if(h.lineIndent<B)break}return V&&fe(h,he,Ue,w,H,null,Z,oe,ve),Q&&(h.tag=ye,h.anchor=Ce,h.kind="mapping",h.result=he),Q}function me(h){var B,G=!1,re=!1,z,te,Z;if(Z=h.input.charCodeAt(h.position),Z!==33)return!1;if(h.tag!==null&&F(h,"duplication of a tag property"),Z=h.input.charCodeAt(++h.position),Z===60?(G=!0,Z=h.input.charCodeAt(++h.position)):Z===33?(re=!0,z="!!",Z=h.input.charCodeAt(++h.position)):z="!",B=h.position,G){do Z=h.input.charCodeAt(++h.position);while(Z!==0&&Z!==62);h.position<h.length?(te=h.input.slice(B,h.position),Z=h.input.charCodeAt(++h.position)):F(h,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!P(Z);)Z===33&&(re?F(h,"tag suffix cannot contain exclamation marks"):(z=h.input.slice(B-1,h.position+1),g.test(z)||F(h,"named tag handle cannot contain such characters"),re=!0,B=h.position+1)),Z=h.input.charCodeAt(++h.position);te=h.input.slice(B,h.position),v.test(te)&&F(h,"tag suffix cannot contain flow indicator characters")}te&&!m.test(te)&&F(h,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(h,"tag name is malformed: "+te)}return G?h.tag=te:l.call(h.tagMap,z)?h.tag=h.tagMap[z]+te:z==="!"?h.tag="!"+te:z==="!!"?h.tag="tag:yaml.org,2002:"+te:F(h,'undeclared tag handle "'+z+'"'),!0}function Ae(h){var B,G;if(G=h.input.charCodeAt(h.position),G!==38)return!1;for(h.anchor!==null&&F(h,"duplication of an anchor property"),G=h.input.charCodeAt(++h.position),B=h.position;G!==0&&!P(G)&&!U(G);)G=h.input.charCodeAt(++h.position);return h.position===B&&F(h,"name of an anchor node must contain at least one character"),h.anchor=h.input.slice(B,h.position),!0}function we(h){var B,G,re;if(re=h.input.charCodeAt(h.position),re!==42)return!1;for(re=h.input.charCodeAt(++h.position),B=h.position;re!==0&&!P(re)&&!U(re);)re=h.input.charCodeAt(++h.position);return h.position===B&&F(h,"name of an alias node must contain at least one character"),G=h.input.slice(B,h.position),l.call(h.anchorMap,G)||F(h,'unidentified alias "'+G+'"'),h.result=h.anchorMap[G],ie(h,!0,-1),!0}function $e(h,B,G,re,z){var te,Z,oe,ve=1,ye=!1,Ce=!1,he,Ue,w,H,X,V;if(h.listener!==null&&h.listener("open",h),h.tag=null,h.anchor=null,h.kind=null,h.result=null,te=Z=oe=t===G||i===G,re&&ie(h,!0,-1)&&(ye=!0,h.lineIndent>B?ve=1:h.lineIndent===B?ve=0:h.lineIndent<B&&(ve=-1)),ve===1)for(;me(h)||Ae(h);)ie(h,!0,-1)?(ye=!0,oe=te,h.lineIndent>B?ve=1:h.lineIndent===B?ve=0:h.lineIndent<B&&(ve=-1)):oe=!1;if(oe&&(oe=ye||z),(ve===1||t===G)&&(r===G||e===G?X=B:X=B+1,V=h.position-h.lineStart,ve===1?oe&&(le(h,V)||ge(h,V,X))||j(h,X)?Ce=!0:(Z&&N(h,X)||A(h,X)||y(h,X)?Ce=!0:we(h)?(Ce=!0,(h.tag!==null||h.anchor!==null)&&F(h,"alias node should not have any properties")):Ee(h,X,r===G)&&(Ce=!0,h.tag===null&&(h.tag="?")),h.anchor!==null&&(h.anchorMap[h.anchor]=h.result)):ve===0&&(Ce=oe&&le(h,V))),h.tag===null)h.anchor!==null&&(h.anchorMap[h.anchor]=h.result);else if(h.tag==="?"){for(h.result!==null&&h.kind!=="scalar"&&F(h,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+h.kind+'"'),he=0,Ue=h.implicitTypes.length;he<Ue;he+=1)if(H=h.implicitTypes[he],H.resolve(h.result)){h.result=H.construct(h.result),h.tag=H.tag,h.anchor!==null&&(h.anchorMap[h.anchor]=h.result);break}}else if(h.tag!=="!"){if(l.call(h.typeMap[h.kind||"fallback"],h.tag))H=h.typeMap[h.kind||"fallback"][h.tag];else for(H=null,w=h.typeMap.multi[h.kind||"fallback"],he=0,Ue=w.length;he<Ue;he+=1)if(h.tag.slice(0,w[he].tag.length)===w[he].tag){H=w[he];break}H||F(h,"unknown tag !<"+h.tag+">"),h.result!==null&&H.kind!==h.kind&&F(h,"unacceptable node kind for !<"+h.tag+'> tag; it should be "'+H.kind+'", not "'+h.kind+'"'),H.resolve(h.result,h.tag)?(h.result=H.construct(h.result,h.tag),h.anchor!==null&&(h.anchorMap[h.anchor]=h.result)):F(h,"cannot resolve a node with !<"+h.tag+"> explicit tag")}return h.listener!==null&&h.listener("close",h),h.tag!==null||h.anchor!==null||Ce}function De(h){var B=h.position,G,re,z,te=!1,Z;for(h.version=null,h.checkLineBreaks=h.legacy,h.tagMap=Object.create(null),h.anchorMap=Object.create(null);(Z=h.input.charCodeAt(h.position))!==0&&(ie(h,!0,-1),Z=h.input.charCodeAt(h.position),!(h.lineIndent>0||Z!==37));){for(te=!0,Z=h.input.charCodeAt(++h.position),G=h.position;Z!==0&&!P(Z);)Z=h.input.charCodeAt(++h.position);for(re=h.input.slice(G,h.position),z=[],re.length<1&&F(h,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=h.input.charCodeAt(++h.position);if(Z===35){do Z=h.input.charCodeAt(++h.position);while(Z!==0&&!R(Z));break}if(R(Z))break;for(G=h.position;Z!==0&&!P(Z);)Z=h.input.charCodeAt(++h.position);z.push(h.input.slice(G,h.position))}Z!==0&&ue(h),l.call(K,re)?K[re](h,re,z):k(h,'unknown document directive "'+re+'"')}if(ie(h,!0,-1),h.lineIndent===0&&h.input.charCodeAt(h.position)===45&&h.input.charCodeAt(h.position+1)===45&&h.input.charCodeAt(h.position+2)===45?(h.position+=3,ie(h,!0,-1)):te&&F(h,"directives end mark is expected"),$e(h,h.lineIndent-1,t,!1,!0),ie(h,!0,-1),h.checkLineBreaks&&p.test(h.input.slice(B,h.position))&&k(h,"non-ASCII line breaks are interpreted as content"),h.documents.push(h.result),h.position===h.lineStart&&Re(h)){h.input.charCodeAt(h.position)===46&&(h.position+=3,ie(h,!0,-1));return}if(h.position<h.length-1)F(h,"end of the stream or a document separator is expected");else return}function je(h,B){h=String(h),B=B||{},h.length!==0&&(h.charCodeAt(h.length-1)!==10&&h.charCodeAt(h.length-1)!==13&&(h+=`
`),h.charCodeAt(0)===65279&&(h=h.slice(1)));var G=new I(h,B),re=h.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)De(G);return G.documents}function St(h,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=je(h,G);if(typeof B!="function")return re;for(var z=0,te=re.length;z<te;z+=1)B(re[z])}function ct(h,B){var G=je(h,B);if(G.length!==0){if(G.length===1)return G[0];throw new c("expected a single document in the stream, but found more")}}return Br.loadAll=St,Br.load=ct,Br}var di={},Is;function Od(){if(Is)return di;Is=1;var n=Sr(),c=Ar(),s=Mo(),f=Object.prototype.toString,l=Object.prototype.hasOwnProperty,r=65279,e=9,i=10,t=13,u=32,o=33,d=34,a=35,p=37,v=38,g=39,m=42,_=44,R=45,O=58,P=61,U=62,T=63,S=64,b=91,E=93,M=96,$=123,x=124,q=125,I={};I[0]="\\0",I[7]="\\a",I[8]="\\b",I[9]="\\t",I[10]="\\n",I[11]="\\v",I[12]="\\f",I[13]="\\r",I[27]="\\e",I[34]='\\"',I[92]="\\\\",I[133]="\\N",I[160]="\\_",I[8232]="\\L",I[8233]="\\P";var D=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function k(w,H){var X,V,Q,ee,de,ae,pe;if(H===null)return{};for(X={},V=Object.keys(H),Q=0,ee=V.length;Q<ee;Q+=1)de=V[Q],ae=String(H[de]),de.slice(0,2)==="!!"&&(de="tag:yaml.org,2002:"+de.slice(2)),pe=w.compiledTypeMap.fallback[de],pe&&l.call(pe.styleAliases,ae)&&(ae=pe.styleAliases[ae]),X[de]=ae;return X}function K(w){var H,X,V;if(H=w.toString(16).toUpperCase(),w<=255)X="x",V=2;else if(w<=65535)X="u",V=4;else if(w<=4294967295)X="U",V=8;else throw new c("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+n.repeat("0",V-H.length)+H}var W=1,ne=2;function fe(w){this.schema=w.schema||s,this.indent=Math.max(1,w.indent||2),this.noArrayIndent=w.noArrayIndent||!1,this.skipInvalid=w.skipInvalid||!1,this.flowLevel=n.isNothing(w.flowLevel)?-1:w.flowLevel,this.styleMap=k(this.schema,w.styles||null),this.sortKeys=w.sortKeys||!1,this.lineWidth=w.lineWidth||80,this.noRefs=w.noRefs||!1,this.noCompatMode=w.noCompatMode||!1,this.condenseFlow=w.condenseFlow||!1,this.quotingType=w.quotingType==='"'?ne:W,this.forceQuotes=w.forceQuotes||!1,this.replacer=typeof w.replacer=="function"?w.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(w,H){for(var X=n.repeat(" ",H),V=0,Q=-1,ee="",de,ae=w.length;V<ae;)Q=w.indexOf(`
`,V),Q===-1?(de=w.slice(V),V=ae):(de=w.slice(V,Q+1),V=Q+1),de.length&&de!==`
`&&(ee+=X),ee+=de;return ee}function ie(w,H){return`
`+n.repeat(" ",w.indent*H)}function Re(w,H){var X,V,Q;for(X=0,V=w.implicitTypes.length;X<V;X+=1)if(Q=w.implicitTypes[X],Q.resolve(H))return!0;return!1}function J(w){return w===u||w===e}function Ee(w){return 32<=w&&w<=126||161<=w&&w<=55295&&w!==8232&&w!==8233||57344<=w&&w<=65533&&w!==r||65536<=w&&w<=1114111}function A(w){return Ee(w)&&w!==r&&w!==t&&w!==i}function y(w,H,X){var V=A(w),Q=V&&!J(w);return(X?V:V&&w!==_&&w!==b&&w!==E&&w!==$&&w!==q)&&w!==a&&!(H===O&&!Q)||A(H)&&!J(H)&&w===a||H===O&&Q}function j(w){return Ee(w)&&w!==r&&!J(w)&&w!==R&&w!==T&&w!==O&&w!==_&&w!==b&&w!==E&&w!==$&&w!==q&&w!==a&&w!==v&&w!==m&&w!==o&&w!==x&&w!==P&&w!==U&&w!==g&&w!==d&&w!==p&&w!==S&&w!==M}function N(w){return!J(w)&&w!==O}function le(w,H){var X=w.charCodeAt(H),V;return X>=55296&&X<=56319&&H+1<w.length&&(V=w.charCodeAt(H+1),V>=56320&&V<=57343)?(X-55296)*1024+V-56320+65536:X}function ge(w){var H=/^\n* /;return H.test(w)}var me=1,Ae=2,we=3,$e=4,De=5;function je(w,H,X,V,Q,ee,de,ae){var pe,Se=0,Ie=null,Le=!1,Oe=!1,xt=V!==-1,rt=-1,At=j(le(w,0))&&N(le(w,w.length-1));if(H||de)for(pe=0;pe<w.length;Se>=65536?pe+=2:pe++){if(Se=le(w,pe),!Ee(Se))return De;At=At&&y(Se,Ie,ae),Ie=Se}else{for(pe=0;pe<w.length;Se>=65536?pe+=2:pe++){if(Se=le(w,pe),Se===i)Le=!0,xt&&(Oe=Oe||pe-rt-1>V&&w[rt+1]!==" ",rt=pe);else if(!Ee(Se))return De;At=At&&y(Se,Ie,ae),Ie=Se}Oe=Oe||xt&&pe-rt-1>V&&w[rt+1]!==" "}return!Le&&!Oe?At&&!de&&!Q(w)?me:ee===ne?De:Ae:X>9&&ge(w)?De:de?ee===ne?De:Ae:Oe?$e:we}function St(w,H,X,V,Q){w.dump=function(){if(H.length===0)return w.quotingType===ne?'""':"''";if(!w.noCompatMode&&(D.indexOf(H)!==-1||F.test(H)))return w.quotingType===ne?'"'+H+'"':"'"+H+"'";var ee=w.indent*Math.max(1,X),de=w.lineWidth===-1?-1:Math.max(Math.min(w.lineWidth,40),w.lineWidth-ee),ae=V||w.flowLevel>-1&&X>=w.flowLevel;function pe(Se){return Re(w,Se)}switch(je(H,ae,w.indent,de,pe,w.quotingType,w.forceQuotes&&!V,Q)){case me:return H;case Ae:return"'"+H.replace(/'/g,"''")+"'";case we:return"|"+ct(H,w.indent)+h(ue(H,ee));case $e:return">"+ct(H,w.indent)+h(ue(B(H,de),ee));case De:return'"'+re(H)+'"';default:throw new c("impossible error: invalid scalar style")}}()}function ct(w,H){var X=ge(w)?String(H):"",V=w[w.length-1]===`
`,Q=V&&(w[w.length-2]===`
`||w===`
`),ee=Q?"+":V?"":"-";return X+ee+`
`}function h(w){return w[w.length-1]===`
`?w.slice(0,-1):w}function B(w,H){for(var X=/(\n+)([^\n]*)/g,V=function(){var Se=w.indexOf(`
`);return Se=Se!==-1?Se:w.length,X.lastIndex=Se,G(w.slice(0,Se),H)}(),Q=w[0]===`
`||w[0]===" ",ee,de;de=X.exec(w);){var ae=de[1],pe=de[2];ee=pe[0]===" ",V+=ae+(!Q&&!ee&&pe!==""?`
`:"")+G(pe,H),Q=ee}return V}function G(w,H){if(w===""||w[0]===" ")return w;for(var X=/ [^ ]/g,V,Q=0,ee,de=0,ae=0,pe="";V=X.exec(w);)ae=V.index,ae-Q>H&&(ee=de>Q?de:ae,pe+=`
`+w.slice(Q,ee),Q=ee+1),de=ae;return pe+=`
`,w.length-Q>H&&de>Q?pe+=w.slice(Q,de)+`
`+w.slice(de+1):pe+=w.slice(Q),pe.slice(1)}function re(w){for(var H="",X=0,V,Q=0;Q<w.length;X>=65536?Q+=2:Q++)X=le(w,Q),V=I[X],!V&&Ee(X)?(H+=w[Q],X>=65536&&(H+=w[Q+1])):H+=V||K(X);return H}function z(w,H,X){var V="",Q=w.tag,ee,de,ae;for(ee=0,de=X.length;ee<de;ee+=1)ae=X[ee],w.replacer&&(ae=w.replacer.call(X,String(ee),ae)),(ye(w,H,ae,!1,!1)||typeof ae>"u"&&ye(w,H,null,!1,!1))&&(V!==""&&(V+=","+(w.condenseFlow?"":" ")),V+=w.dump);w.tag=Q,w.dump="["+V+"]"}function te(w,H,X,V){var Q="",ee=w.tag,de,ae,pe;for(de=0,ae=X.length;de<ae;de+=1)pe=X[de],w.replacer&&(pe=w.replacer.call(X,String(de),pe)),(ye(w,H+1,pe,!0,!0,!1,!0)||typeof pe>"u"&&ye(w,H+1,null,!0,!0,!1,!0))&&((!V||Q!=="")&&(Q+=ie(w,H)),w.dump&&i===w.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=w.dump);w.tag=ee,w.dump=Q||"[]"}function Z(w,H,X){var V="",Q=w.tag,ee=Object.keys(X),de,ae,pe,Se,Ie;for(de=0,ae=ee.length;de<ae;de+=1)Ie="",V!==""&&(Ie+=", "),w.condenseFlow&&(Ie+='"'),pe=ee[de],Se=X[pe],w.replacer&&(Se=w.replacer.call(X,pe,Se)),ye(w,H,pe,!1,!1)&&(w.dump.length>1024&&(Ie+="? "),Ie+=w.dump+(w.condenseFlow?'"':"")+":"+(w.condenseFlow?"":" "),ye(w,H,Se,!1,!1)&&(Ie+=w.dump,V+=Ie));w.tag=Q,w.dump="{"+V+"}"}function oe(w,H,X,V){var Q="",ee=w.tag,de=Object.keys(X),ae,pe,Se,Ie,Le,Oe;if(w.sortKeys===!0)de.sort();else if(typeof w.sortKeys=="function")de.sort(w.sortKeys);else if(w.sortKeys)throw new c("sortKeys must be a boolean or a function");for(ae=0,pe=de.length;ae<pe;ae+=1)Oe="",(!V||Q!=="")&&(Oe+=ie(w,H)),Se=de[ae],Ie=X[Se],w.replacer&&(Ie=w.replacer.call(X,Se,Ie)),ye(w,H+1,Se,!0,!0,!0)&&(Le=w.tag!==null&&w.tag!=="?"||w.dump&&w.dump.length>1024,Le&&(w.dump&&i===w.dump.charCodeAt(0)?Oe+="?":Oe+="? "),Oe+=w.dump,Le&&(Oe+=ie(w,H)),ye(w,H+1,Ie,!0,Le)&&(w.dump&&i===w.dump.charCodeAt(0)?Oe+=":":Oe+=": ",Oe+=w.dump,Q+=Oe));w.tag=ee,w.dump=Q||"{}"}function ve(w,H,X){var V,Q,ee,de,ae,pe;for(Q=X?w.explicitTypes:w.implicitTypes,ee=0,de=Q.length;ee<de;ee+=1)if(ae=Q[ee],(ae.instanceOf||ae.predicate)&&(!ae.instanceOf||typeof H=="object"&&H instanceof ae.instanceOf)&&(!ae.predicate||ae.predicate(H))){if(X?ae.multi&&ae.representName?w.tag=ae.representName(H):w.tag=ae.tag:w.tag="?",ae.represent){if(pe=w.styleMap[ae.tag]||ae.defaultStyle,f.call(ae.represent)==="[object Function]")V=ae.represent(H,pe);else if(l.call(ae.represent,pe))V=ae.represent[pe](H,pe);else throw new c("!<"+ae.tag+'> tag resolver accepts not "'+pe+'" style');w.dump=V}return!0}return!1}function ye(w,H,X,V,Q,ee,de){w.tag=null,w.dump=X,ve(w,X,!1)||ve(w,X,!0);var ae=f.call(w.dump),pe=V,Se;V&&(V=w.flowLevel<0||w.flowLevel>H);var Ie=ae==="[object Object]"||ae==="[object Array]",Le,Oe;if(Ie&&(Le=w.duplicates.indexOf(X),Oe=Le!==-1),(w.tag!==null&&w.tag!=="?"||Oe||w.indent!==2&&H>0)&&(Q=!1),Oe&&w.usedDuplicates[Le])w.dump="*ref_"+Le;else{if(Ie&&Oe&&!w.usedDuplicates[Le]&&(w.usedDuplicates[Le]=!0),ae==="[object Object]")V&&Object.keys(w.dump).length!==0?(oe(w,H,w.dump,Q),Oe&&(w.dump="&ref_"+Le+w.dump)):(Z(w,H,w.dump),Oe&&(w.dump="&ref_"+Le+" "+w.dump));else if(ae==="[object Array]")V&&w.dump.length!==0?(w.noArrayIndent&&!de&&H>0?te(w,H-1,w.dump,Q):te(w,H,w.dump,Q),Oe&&(w.dump="&ref_"+Le+w.dump)):(z(w,H,w.dump),Oe&&(w.dump="&ref_"+Le+" "+w.dump));else if(ae==="[object String]")w.tag!=="?"&&St(w,w.dump,H,ee,pe);else{if(ae==="[object Undefined]")return!1;if(w.skipInvalid)return!1;throw new c("unacceptable kind of an object to dump "+ae)}w.tag!==null&&w.tag!=="?"&&(Se=encodeURI(w.tag[0]==="!"?w.tag.slice(1):w.tag).replace(/!/g,"%21"),w.tag[0]==="!"?Se="!"+Se:Se.slice(0,18)==="tag:yaml.org,2002:"?Se="!!"+Se.slice(18):Se="!<"+Se+">",w.dump=Se+" "+w.dump)}return!0}function Ce(w,H){var X=[],V=[],Q,ee;for(he(w,X,V),Q=0,ee=V.length;Q<ee;Q+=1)H.duplicates.push(X[V[Q]]);H.usedDuplicates=new Array(ee)}function he(w,H,X){var V,Q,ee;if(w!==null&&typeof w=="object")if(Q=H.indexOf(w),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(H.push(w),Array.isArray(w))for(Q=0,ee=w.length;Q<ee;Q+=1)he(w[Q],H,X);else for(V=Object.keys(w),Q=0,ee=V.length;Q<ee;Q+=1)he(w[V[Q]],H,X)}function Ue(w,H){H=H||{};var X=new fe(H);X.noRefs||Ce(w,X);var V=w;return X.replacer&&(V=X.replacer.call({"":V},"",V)),ye(X,0,V,!0,!0)?X.dump+`
`:""}return di.dump=Ue,di}var Ns;function Bo(){if(Ns)return We;Ns=1;var n=Cd(),c=Od();function s(f,l){return function(){throw new Error("Function yaml."+f+" is removed in js-yaml 4. Use yaml."+l+" instead, which is now safe by default.")}}return We.Type=ze(),We.Schema=Vu(),We.FAILSAFE_SCHEMA=Ku(),We.JSON_SCHEMA=rc(),We.CORE_SCHEMA=nc(),We.DEFAULT_SCHEMA=Mo(),We.load=n.load,We.loadAll=n.loadAll,We.dump=c.dump,We.YAMLException=Ar(),We.types={binary:ac(),float:tc(),map:Ju(),null:Qu(),pairs:lc(),set:uc(),timestamp:ic(),bool:Zu(),int:ec(),merge:oc(),omap:sc(),seq:Xu(),str:Yu()},We.safeLoad=s("safeLoad","load"),We.safeLoadAll=s("safeLoadAll","loadAll"),We.safeDump=s("safeDump","dump"),We}var Zt={},Fs;function Pd(){if(Fs)return Zt;Fs=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.Lazy=void 0;class n{constructor(s){this._value=null,this.creator=s}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const s=this.creator();return this.value=s,s}set value(s){this._value=s,this.creator=null}}return Zt.Lazy=n,Zt}var jr={exports:{}},hi,Ls;function Jr(){if(Ls)return hi;Ls=1;const n="2.0.0",c=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,f=16,l=c-6;return hi={MAX_LENGTH:c,MAX_SAFE_COMPONENT_LENGTH:f,MAX_SAFE_BUILD_LENGTH:l,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},hi}var pi,xs;function Kr(){return xs||(xs=1,pi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...c)=>console.error("SEMVER",...c):()=>{}),pi}var $s;function br(){return $s||($s=1,function(n,c){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:f,MAX_LENGTH:l}=Jr(),r=Kr();c=n.exports={};const e=c.re=[],i=c.safeRe=[],t=c.src=[],u=c.safeSrc=[],o=c.t={};let d=0;const a="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",l],[a,f]],v=m=>{for(const[_,R]of p)m=m.split(`${_}*`).join(`${_}{0,${R}}`).split(`${_}+`).join(`${_}{1,${R}}`);return m},g=(m,_,R)=>{const O=v(_),P=d++;r(m,P,_),o[m]=P,t[P]=_,u[P]=O,e[P]=new RegExp(_,R?"g":void 0),i[P]=new RegExp(O,R?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),g("MAINVERSION",`(${t[o.NUMERICIDENTIFIER]})\\.(${t[o.NUMERICIDENTIFIER]})\\.(${t[o.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${t[o.NUMERICIDENTIFIERLOOSE]})\\.(${t[o.NUMERICIDENTIFIERLOOSE]})\\.(${t[o.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${t[o.NUMERICIDENTIFIER]}|${t[o.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${t[o.NUMERICIDENTIFIERLOOSE]}|${t[o.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${t[o.PRERELEASEIDENTIFIER]}(?:\\.${t[o.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${t[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${t[o.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${a}+`),g("BUILD",`(?:\\+(${t[o.BUILDIDENTIFIER]}(?:\\.${t[o.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${t[o.MAINVERSION]}${t[o.PRERELEASE]}?${t[o.BUILD]}?`),g("FULL",`^${t[o.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${t[o.MAINVERSIONLOOSE]}${t[o.PRERELEASELOOSE]}?${t[o.BUILD]}?`),g("LOOSE",`^${t[o.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${t[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${t[o.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${t[o.XRANGEIDENTIFIER]})(?:\\.(${t[o.XRANGEIDENTIFIER]})(?:\\.(${t[o.XRANGEIDENTIFIER]})(?:${t[o.PRERELEASE]})?${t[o.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${t[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[o.XRANGEIDENTIFIERLOOSE]})(?:${t[o.PRERELEASELOOSE]})?${t[o.BUILD]}?)?)?`),g("XRANGE",`^${t[o.GTLT]}\\s*${t[o.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${t[o.GTLT]}\\s*${t[o.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),g("COERCE",`${t[o.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",t[o.COERCEPLAIN]+`(?:${t[o.PRERELEASE]})?(?:${t[o.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",t[o.COERCE],!0),g("COERCERTLFULL",t[o.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${t[o.LONETILDE]}\\s+`,!0),c.tildeTrimReplace="$1~",g("TILDE",`^${t[o.LONETILDE]}${t[o.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${t[o.LONETILDE]}${t[o.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${t[o.LONECARET]}\\s+`,!0),c.caretTrimReplace="$1^",g("CARET",`^${t[o.LONECARET]}${t[o.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${t[o.LONECARET]}${t[o.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${t[o.GTLT]}\\s*(${t[o.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${t[o.GTLT]}\\s*(${t[o.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${t[o.GTLT]}\\s*(${t[o.LOOSEPLAIN]}|${t[o.XRANGEPLAIN]})`,!0),c.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${t[o.XRANGEPLAIN]})\\s+-\\s+(${t[o.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${t[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${t[o.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(jr,jr.exports)),jr.exports}var mi,Us;function jo(){if(Us)return mi;Us=1;const n=Object.freeze({loose:!0}),c=Object.freeze({});return mi=f=>f?typeof f!="object"?n:f:c,mi}var gi,ks;function cc(){if(ks)return gi;ks=1;const n=/^[0-9]+$/,c=(f,l)=>{const r=n.test(f),e=n.test(l);return r&&e&&(f=+f,l=+l),f===l?0:r&&!e?-1:e&&!r?1:f<l?-1:1};return gi={compareIdentifiers:c,rcompareIdentifiers:(f,l)=>c(l,f)},gi}var vi,qs;function Ve(){if(qs)return vi;qs=1;const n=Kr(),{MAX_LENGTH:c,MAX_SAFE_INTEGER:s}=Jr(),{safeRe:f,safeSrc:l,t:r}=br(),e=jo(),{compareIdentifiers:i}=cc();class t{constructor(o,d){if(d=e(d),o instanceof t){if(o.loose===!!d.loose&&o.includePrerelease===!!d.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>c)throw new TypeError(`version is longer than ${c} characters`);n("SemVer",o,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const a=o.trim().match(d.loose?f[r.LOOSE]:f[r.FULL]);if(!a)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const v=+p;if(v>=0&&v<s)return v}return p}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(n("SemVer.compare",this.version,this.options,o),!(o instanceof t)){if(typeof o=="string"&&o===this.version)return 0;o=new t(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof t||(o=new t(o,this.options)),i(this.major,o.major)||i(this.minor,o.minor)||i(this.patch,o.patch)}comparePre(o){if(o instanceof t||(o=new t(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let d=0;do{const a=this.prerelease[d],p=o.prerelease[d];if(n("prerelease compare",d,a,p),a===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(a===void 0)return-1;if(a===p)continue;return i(a,p)}while(++d)}compareBuild(o){o instanceof t||(o=new t(o,this.options));let d=0;do{const a=this.build[d],p=o.build[d];if(n("build compare",d,a,p),a===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(a===void 0)return-1;if(a===p)continue;return i(a,p)}while(++d)}inc(o,d,a){if(o.startsWith("pre")){if(!d&&a===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=new RegExp(`^${this.options.loose?l[r.PRERELEASELOOSE]:l[r.PRERELEASE]}$`),v=`-${d}`.match(p);if(!v||v[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,a),this.inc("pre",d,a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,a),this.inc("pre",d,a);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(a)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(d===this.prerelease.join(".")&&a===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let v=[d,p];a===!1&&(v=[d]),i(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${o}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return vi=t,vi}var yi,Ms;function Wt(){if(Ms)return yi;Ms=1;const n=Ve();return yi=(s,f,l=!1)=>{if(s instanceof n)return s;try{return new n(s,f)}catch(r){if(!l)return null;throw r}},yi}var Ei,Bs;function Dd(){if(Bs)return Ei;Bs=1;const n=Wt();return Ei=(s,f)=>{const l=n(s,f);return l?l.version:null},Ei}var wi,js;function Id(){if(js)return wi;js=1;const n=Wt();return wi=(s,f)=>{const l=n(s.trim().replace(/^[=v]+/,""),f);return l?l.version:null},wi}var _i,Hs;function Nd(){if(Hs)return _i;Hs=1;const n=Ve();return _i=(s,f,l,r,e)=>{typeof l=="string"&&(e=r,r=l,l=void 0);try{return new n(s instanceof n?s.version:s,l).inc(f,r,e).version}catch{return null}},_i}var Si,Gs;function Fd(){if(Gs)return Si;Gs=1;const n=Wt();return Si=(s,f)=>{const l=n(s,null,!0),r=n(f,null,!0),e=l.compare(r);if(e===0)return null;const i=e>0,t=i?l:r,u=i?r:l,o=!!t.prerelease.length;if(!!u.prerelease.length&&!o){if(!u.patch&&!u.minor)return"major";if(u.compareMain(t)===0)return u.minor&&!u.patch?"minor":"patch"}const a=o?"pre":"";return l.major!==r.major?a+"major":l.minor!==r.minor?a+"minor":l.patch!==r.patch?a+"patch":"prerelease"},Si}var Ai,Ws;function Ld(){if(Ws)return Ai;Ws=1;const n=Ve();return Ai=(s,f)=>new n(s,f).major,Ai}var bi,zs;function xd(){if(zs)return bi;zs=1;const n=Ve();return bi=(s,f)=>new n(s,f).minor,bi}var Ti,Vs;function $d(){if(Vs)return Ti;Vs=1;const n=Ve();return Ti=(s,f)=>new n(s,f).patch,Ti}var Ri,Ys;function Ud(){if(Ys)return Ri;Ys=1;const n=Wt();return Ri=(s,f)=>{const l=n(s,f);return l&&l.prerelease.length?l.prerelease:null},Ri}var Ci,Xs;function ot(){if(Xs)return Ci;Xs=1;const n=Ve();return Ci=(s,f,l)=>new n(s,l).compare(new n(f,l)),Ci}var Oi,Js;function kd(){if(Js)return Oi;Js=1;const n=ot();return Oi=(s,f,l)=>n(f,s,l),Oi}var Pi,Ks;function qd(){if(Ks)return Pi;Ks=1;const n=ot();return Pi=(s,f)=>n(s,f,!0),Pi}var Di,Qs;function Ho(){if(Qs)return Di;Qs=1;const n=Ve();return Di=(s,f,l)=>{const r=new n(s,l),e=new n(f,l);return r.compare(e)||r.compareBuild(e)},Di}var Ii,Zs;function Md(){if(Zs)return Ii;Zs=1;const n=Ho();return Ii=(s,f)=>s.sort((l,r)=>n(l,r,f)),Ii}var Ni,el;function Bd(){if(el)return Ni;el=1;const n=Ho();return Ni=(s,f)=>s.sort((l,r)=>n(r,l,f)),Ni}var Fi,tl;function Qr(){if(tl)return Fi;tl=1;const n=ot();return Fi=(s,f,l)=>n(s,f,l)>0,Fi}var Li,rl;function Go(){if(rl)return Li;rl=1;const n=ot();return Li=(s,f,l)=>n(s,f,l)<0,Li}var xi,nl;function fc(){if(nl)return xi;nl=1;const n=ot();return xi=(s,f,l)=>n(s,f,l)===0,xi}var $i,il;function dc(){if(il)return $i;il=1;const n=ot();return $i=(s,f,l)=>n(s,f,l)!==0,$i}var Ui,ol;function Wo(){if(ol)return Ui;ol=1;const n=ot();return Ui=(s,f,l)=>n(s,f,l)>=0,Ui}var ki,al;function zo(){if(al)return ki;al=1;const n=ot();return ki=(s,f,l)=>n(s,f,l)<=0,ki}var qi,sl;function hc(){if(sl)return qi;sl=1;const n=fc(),c=dc(),s=Qr(),f=Wo(),l=Go(),r=zo();return qi=(i,t,u,o)=>{switch(t){case"===":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i===u;case"!==":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i!==u;case"":case"=":case"==":return n(i,u,o);case"!=":return c(i,u,o);case">":return s(i,u,o);case">=":return f(i,u,o);case"<":return l(i,u,o);case"<=":return r(i,u,o);default:throw new TypeError(`Invalid operator: ${t}`)}},qi}var Mi,ll;function jd(){if(ll)return Mi;ll=1;const n=Ve(),c=Wt(),{safeRe:s,t:f}=br();return Mi=(r,e)=>{if(r instanceof n)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let i=null;if(!e.rtl)i=r.match(e.includePrerelease?s[f.COERCEFULL]:s[f.COERCE]);else{const p=e.includePrerelease?s[f.COERCERTLFULL]:s[f.COERCERTL];let v;for(;(v=p.exec(r))&&(!i||i.index+i[0].length!==r.length);)(!i||v.index+v[0].length!==i.index+i[0].length)&&(i=v),p.lastIndex=v.index+v[1].length+v[2].length;p.lastIndex=-1}if(i===null)return null;const t=i[2],u=i[3]||"0",o=i[4]||"0",d=e.includePrerelease&&i[5]?`-${i[5]}`:"",a=e.includePrerelease&&i[6]?`+${i[6]}`:"";return c(`${t}.${u}.${o}${d}${a}`,e)},Mi}var Bi,ul;function Hd(){if(ul)return Bi;ul=1;class n{constructor(){this.max=1e3,this.map=new Map}get(s){const f=this.map.get(s);if(f!==void 0)return this.map.delete(s),this.map.set(s,f),f}delete(s){return this.map.delete(s)}set(s,f){if(!this.delete(s)&&f!==void 0){if(this.map.size>=this.max){const r=this.map.keys().next().value;this.delete(r)}this.map.set(s,f)}return this}}return Bi=n,Bi}var ji,cl;function at(){if(cl)return ji;cl=1;const n=/\s+/g;class c{constructor(D,F){if(F=l(F),D instanceof c)return D.loose===!!F.loose&&D.includePrerelease===!!F.includePrerelease?D:new c(D.raw,F);if(D instanceof r)return this.raw=D.value,this.set=[[D]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=D.trim().replace(n," "),this.set=this.raw.split("||").map(k=>this.parseRange(k.trim())).filter(k=>k.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const k=this.set[0];if(this.set=this.set.filter(K=>!g(K[0])),this.set.length===0)this.set=[k];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&m(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let D=0;D<this.set.length;D++){D>0&&(this.formatted+="||");const F=this.set[D];for(let k=0;k<F.length;k++)k>0&&(this.formatted+=" "),this.formatted+=F[k].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(D){const k=((this.options.includePrerelease&&p)|(this.options.loose&&v))+":"+D,K=f.get(k);if(K)return K;const W=this.options.loose,ne=W?t[u.HYPHENRANGELOOSE]:t[u.HYPHENRANGE];D=D.replace(ne,x(this.options.includePrerelease)),e("hyphen replace",D),D=D.replace(t[u.COMPARATORTRIM],o),e("comparator trim",D),D=D.replace(t[u.TILDETRIM],d),e("tilde trim",D),D=D.replace(t[u.CARETTRIM],a),e("caret trim",D);let fe=D.split(" ").map(J=>R(J,this.options)).join(" ").split(/\s+/).map(J=>$(J,this.options));W&&(fe=fe.filter(J=>(e("loose invalid filter",J,this.options),!!J.match(t[u.COMPARATORLOOSE])))),e("range list",fe);const ue=new Map,ie=fe.map(J=>new r(J,this.options));for(const J of ie){if(g(J))return[J];ue.set(J.value,J)}ue.size>1&&ue.has("")&&ue.delete("");const Re=[...ue.values()];return f.set(k,Re),Re}intersects(D,F){if(!(D instanceof c))throw new TypeError("a Range is required");return this.set.some(k=>_(k,F)&&D.set.some(K=>_(K,F)&&k.every(W=>K.every(ne=>W.intersects(ne,F)))))}test(D){if(!D)return!1;if(typeof D=="string")try{D=new i(D,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(q(this.set[F],D,this.options))return!0;return!1}}ji=c;const s=Hd(),f=new s,l=jo(),r=Zr(),e=Kr(),i=Ve(),{safeRe:t,t:u,comparatorTrimReplace:o,tildeTrimReplace:d,caretTrimReplace:a}=br(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:v}=Jr(),g=I=>I.value==="<0.0.0-0",m=I=>I.value==="",_=(I,D)=>{let F=!0;const k=I.slice();let K=k.pop();for(;F&&k.length;)F=k.every(W=>K.intersects(W,D)),K=k.pop();return F},R=(I,D)=>(e("comp",I,D),I=T(I,D),e("caret",I),I=P(I,D),e("tildes",I),I=b(I,D),e("xrange",I),I=M(I,D),e("stars",I),I),O=I=>!I||I.toLowerCase()==="x"||I==="*",P=(I,D)=>I.trim().split(/\s+/).map(F=>U(F,D)).join(" "),U=(I,D)=>{const F=D.loose?t[u.TILDELOOSE]:t[u.TILDE];return I.replace(F,(k,K,W,ne,fe)=>{e("tilde",I,k,K,W,ne,fe);let ue;return O(K)?ue="":O(W)?ue=`>=${K}.0.0 <${+K+1}.0.0-0`:O(ne)?ue=`>=${K}.${W}.0 <${K}.${+W+1}.0-0`:fe?(e("replaceTilde pr",fe),ue=`>=${K}.${W}.${ne}-${fe} <${K}.${+W+1}.0-0`):ue=`>=${K}.${W}.${ne} <${K}.${+W+1}.0-0`,e("tilde return",ue),ue})},T=(I,D)=>I.trim().split(/\s+/).map(F=>S(F,D)).join(" "),S=(I,D)=>{e("caret",I,D);const F=D.loose?t[u.CARETLOOSE]:t[u.CARET],k=D.includePrerelease?"-0":"";return I.replace(F,(K,W,ne,fe,ue)=>{e("caret",I,K,W,ne,fe,ue);let ie;return O(W)?ie="":O(ne)?ie=`>=${W}.0.0${k} <${+W+1}.0.0-0`:O(fe)?W==="0"?ie=`>=${W}.${ne}.0${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${k} <${+W+1}.0.0-0`:ue?(e("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${fe}-${ue} <${W}.${ne}.${+fe+1}-0`:ie=`>=${W}.${ne}.${fe}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${fe}-${ue} <${+W+1}.0.0-0`):(e("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${fe}${k} <${W}.${ne}.${+fe+1}-0`:ie=`>=${W}.${ne}.${fe}${k} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${fe} <${+W+1}.0.0-0`),e("caret return",ie),ie})},b=(I,D)=>(e("replaceXRanges",I,D),I.split(/\s+/).map(F=>E(F,D)).join(" ")),E=(I,D)=>{I=I.trim();const F=D.loose?t[u.XRANGELOOSE]:t[u.XRANGE];return I.replace(F,(k,K,W,ne,fe,ue)=>{e("xRange",I,k,K,W,ne,fe,ue);const ie=O(W),Re=ie||O(ne),J=Re||O(fe),Ee=J;return K==="="&&Ee&&(K=""),ue=D.includePrerelease?"-0":"",ie?K===">"||K==="<"?k="<0.0.0-0":k="*":K&&Ee?(Re&&(ne=0),fe=0,K===">"?(K=">=",Re?(W=+W+1,ne=0,fe=0):(ne=+ne+1,fe=0)):K==="<="&&(K="<",Re?W=+W+1:ne=+ne+1),K==="<"&&(ue="-0"),k=`${K+W}.${ne}.${fe}${ue}`):Re?k=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:J&&(k=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),e("xRange return",k),k})},M=(I,D)=>(e("replaceStars",I,D),I.trim().replace(t[u.STAR],"")),$=(I,D)=>(e("replaceGTE0",I,D),I.trim().replace(t[D.includePrerelease?u.GTE0PRE:u.GTE0],"")),x=I=>(D,F,k,K,W,ne,fe,ue,ie,Re,J,Ee)=>(O(k)?F="":O(K)?F=`>=${k}.0.0${I?"-0":""}`:O(W)?F=`>=${k}.${K}.0${I?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${I?"-0":""}`,O(ie)?ue="":O(Re)?ue=`<${+ie+1}.0.0-0`:O(J)?ue=`<${ie}.${+Re+1}.0-0`:Ee?ue=`<=${ie}.${Re}.${J}-${Ee}`:I?ue=`<${ie}.${Re}.${+J+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),q=(I,D,F)=>{for(let k=0;k<I.length;k++)if(!I[k].test(D))return!1;if(D.prerelease.length&&!F.includePrerelease){for(let k=0;k<I.length;k++)if(e(I[k].semver),I[k].semver!==r.ANY&&I[k].semver.prerelease.length>0){const K=I[k].semver;if(K.major===D.major&&K.minor===D.minor&&K.patch===D.patch)return!0}return!1}return!0};return ji}var Hi,fl;function Zr(){if(fl)return Hi;fl=1;const n=Symbol("SemVer ANY");class c{static get ANY(){return n}constructor(o,d){if(d=s(d),o instanceof c){if(o.loose===!!d.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),e("comparator",o,d),this.options=d,this.loose=!!d.loose,this.parse(o),this.semver===n?this.value="":this.value=this.operator+this.semver.version,e("comp",this)}parse(o){const d=this.options.loose?f[l.COMPARATORLOOSE]:f[l.COMPARATOR],a=o.match(d);if(!a)throw new TypeError(`Invalid comparator: ${o}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new i(a[2],this.options.loose):this.semver=n}toString(){return this.value}test(o){if(e("Comparator.test",o,this.options.loose),this.semver===n||o===n)return!0;if(typeof o=="string")try{o=new i(o,this.options)}catch{return!1}return r(o,this.operator,this.semver,this.options)}intersects(o,d){if(!(o instanceof c))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new t(o.value,d).test(this.value):o.operator===""?o.value===""?!0:new t(this.value,d).test(o.semver):(d=s(d),d.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||r(this.semver,"<",o.semver,d)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||r(this.semver,">",o.semver,d)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}Hi=c;const s=jo(),{safeRe:f,t:l}=br(),r=hc(),e=Kr(),i=Ve(),t=at();return Hi}var Gi,dl;function en(){if(dl)return Gi;dl=1;const n=at();return Gi=(s,f,l)=>{try{f=new n(f,l)}catch{return!1}return f.test(s)},Gi}var Wi,hl;function Gd(){if(hl)return Wi;hl=1;const n=at();return Wi=(s,f)=>new n(s,f).set.map(l=>l.map(r=>r.value).join(" ").trim().split(" ")),Wi}var zi,pl;function Wd(){if(pl)return zi;pl=1;const n=Ve(),c=at();return zi=(f,l,r)=>{let e=null,i=null,t=null;try{t=new c(l,r)}catch{return null}return f.forEach(u=>{t.test(u)&&(!e||i.compare(u)===-1)&&(e=u,i=new n(e,r))}),e},zi}var Vi,ml;function zd(){if(ml)return Vi;ml=1;const n=Ve(),c=at();return Vi=(f,l,r)=>{let e=null,i=null,t=null;try{t=new c(l,r)}catch{return null}return f.forEach(u=>{t.test(u)&&(!e||i.compare(u)===1)&&(e=u,i=new n(e,r))}),e},Vi}var Yi,gl;function Vd(){if(gl)return Yi;gl=1;const n=Ve(),c=at(),s=Qr();return Yi=(l,r)=>{l=new c(l,r);let e=new n("0.0.0");if(l.test(e)||(e=new n("0.0.0-0"),l.test(e)))return e;e=null;for(let i=0;i<l.set.length;++i){const t=l.set[i];let u=null;t.forEach(o=>{const d=new n(o.semver.version);switch(o.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!u||s(d,u))&&(u=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),u&&(!e||s(e,u))&&(e=u)}return e&&l.test(e)?e:null},Yi}var Xi,vl;function Yd(){if(vl)return Xi;vl=1;const n=at();return Xi=(s,f)=>{try{return new n(s,f).range||"*"}catch{return null}},Xi}var Ji,yl;function Vo(){if(yl)return Ji;yl=1;const n=Ve(),c=Zr(),{ANY:s}=c,f=at(),l=en(),r=Qr(),e=Go(),i=zo(),t=Wo();return Ji=(o,d,a,p)=>{o=new n(o,p),d=new f(d,p);let v,g,m,_,R;switch(a){case">":v=r,g=i,m=e,_=">",R=">=";break;case"<":v=e,g=t,m=r,_="<",R="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(l(o,d,p))return!1;for(let O=0;O<d.set.length;++O){const P=d.set[O];let U=null,T=null;if(P.forEach(S=>{S.semver===s&&(S=new c(">=0.0.0")),U=U||S,T=T||S,v(S.semver,U.semver,p)?U=S:m(S.semver,T.semver,p)&&(T=S)}),U.operator===_||U.operator===R||(!T.operator||T.operator===_)&&g(o,T.semver))return!1;if(T.operator===R&&m(o,T.semver))return!1}return!0},Ji}var Ki,El;function Xd(){if(El)return Ki;El=1;const n=Vo();return Ki=(s,f,l)=>n(s,f,">",l),Ki}var Qi,wl;function Jd(){if(wl)return Qi;wl=1;const n=Vo();return Qi=(s,f,l)=>n(s,f,"<",l),Qi}var Zi,_l;function Kd(){if(_l)return Zi;_l=1;const n=at();return Zi=(s,f,l)=>(s=new n(s,l),f=new n(f,l),s.intersects(f,l)),Zi}var eo,Sl;function Qd(){if(Sl)return eo;Sl=1;const n=en(),c=ot();return eo=(s,f,l)=>{const r=[];let e=null,i=null;const t=s.sort((a,p)=>c(a,p,l));for(const a of t)n(a,f,l)?(i=a,e||(e=a)):(i&&r.push([e,i]),i=null,e=null);e&&r.push([e,null]);const u=[];for(const[a,p]of r)a===p?u.push(a):!p&&a===t[0]?u.push("*"):p?a===t[0]?u.push(`<=${p}`):u.push(`${a} - ${p}`):u.push(`>=${a}`);const o=u.join(" || "),d=typeof f.raw=="string"?f.raw:String(f);return o.length<d.length?o:f},eo}var to,Al;function Zd(){if(Al)return to;Al=1;const n=at(),c=Zr(),{ANY:s}=c,f=en(),l=ot(),r=(d,a,p={})=>{if(d===a)return!0;d=new n(d,p),a=new n(a,p);let v=!1;e:for(const g of d.set){for(const m of a.set){const _=t(g,m,p);if(v=v||_!==null,_)continue e}if(v)return!1}return!0},e=[new c(">=0.0.0-0")],i=[new c(">=0.0.0")],t=(d,a,p)=>{if(d===a)return!0;if(d.length===1&&d[0].semver===s){if(a.length===1&&a[0].semver===s)return!0;p.includePrerelease?d=e:d=i}if(a.length===1&&a[0].semver===s){if(p.includePrerelease)return!0;a=i}const v=new Set;let g,m;for(const b of d)b.operator===">"||b.operator===">="?g=u(g,b,p):b.operator==="<"||b.operator==="<="?m=o(m,b,p):v.add(b.semver);if(v.size>1)return null;let _;if(g&&m){if(_=l(g.semver,m.semver,p),_>0)return null;if(_===0&&(g.operator!==">="||m.operator!=="<="))return null}for(const b of v){if(g&&!f(b,String(g),p)||m&&!f(b,String(m),p))return null;for(const E of a)if(!f(b,String(E),p))return!1;return!0}let R,O,P,U,T=m&&!p.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=g&&!p.includePrerelease&&g.semver.prerelease.length?g.semver:!1;T&&T.prerelease.length===1&&m.operator==="<"&&T.prerelease[0]===0&&(T=!1);for(const b of a){if(U=U||b.operator===">"||b.operator===">=",P=P||b.operator==="<"||b.operator==="<=",g){if(S&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===S.major&&b.semver.minor===S.minor&&b.semver.patch===S.patch&&(S=!1),b.operator===">"||b.operator===">="){if(R=u(g,b,p),R===b&&R!==g)return!1}else if(g.operator===">="&&!f(g.semver,String(b),p))return!1}if(m){if(T&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===T.major&&b.semver.minor===T.minor&&b.semver.patch===T.patch&&(T=!1),b.operator==="<"||b.operator==="<="){if(O=o(m,b,p),O===b&&O!==m)return!1}else if(m.operator==="<="&&!f(m.semver,String(b),p))return!1}if(!b.operator&&(m||g)&&_!==0)return!1}return!(g&&P&&!m&&_!==0||m&&U&&!g&&_!==0||S||T)},u=(d,a,p)=>{if(!d)return a;const v=l(d.semver,a.semver,p);return v>0?d:v<0||a.operator===">"&&d.operator===">="?a:d},o=(d,a,p)=>{if(!d)return a;const v=l(d.semver,a.semver,p);return v<0?d:v>0||a.operator==="<"&&d.operator==="<="?a:d};return to=r,to}var ro,bl;function pc(){if(bl)return ro;bl=1;const n=br(),c=Jr(),s=Ve(),f=cc(),l=Wt(),r=Dd(),e=Id(),i=Nd(),t=Fd(),u=Ld(),o=xd(),d=$d(),a=Ud(),p=ot(),v=kd(),g=qd(),m=Ho(),_=Md(),R=Bd(),O=Qr(),P=Go(),U=fc(),T=dc(),S=Wo(),b=zo(),E=hc(),M=jd(),$=Zr(),x=at(),q=en(),I=Gd(),D=Wd(),F=zd(),k=Vd(),K=Yd(),W=Vo(),ne=Xd(),fe=Jd(),ue=Kd(),ie=Qd(),Re=Zd();return ro={parse:l,valid:r,clean:e,inc:i,diff:t,major:u,minor:o,patch:d,prerelease:a,compare:p,rcompare:v,compareLoose:g,compareBuild:m,sort:_,rsort:R,gt:O,lt:P,eq:U,neq:T,gte:S,lte:b,cmp:E,coerce:M,Comparator:$,Range:x,satisfies:q,toComparators:I,maxSatisfying:D,minSatisfying:F,minVersion:k,validRange:K,outside:W,gtr:ne,ltr:fe,intersects:ue,simplifyRange:ie,subset:Re,SemVer:s,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:c.SEMVER_SPEC_VERSION,RELEASE_TYPES:c.RELEASE_TYPES,compareIdentifiers:f.compareIdentifiers,rcompareIdentifiers:f.rcompareIdentifiers},ro}var kt={},vr={exports:{}};vr.exports;var Tl;function eh(){return Tl||(Tl=1,function(n,c){var s=200,f="__lodash_hash_undefined__",l=1,r=2,e=9007199254740991,i="[object Arguments]",t="[object Array]",u="[object AsyncFunction]",o="[object Boolean]",d="[object Date]",a="[object Error]",p="[object Function]",v="[object GeneratorFunction]",g="[object Map]",m="[object Number]",_="[object Null]",R="[object Object]",O="[object Promise]",P="[object Proxy]",U="[object RegExp]",T="[object Set]",S="[object String]",b="[object Symbol]",E="[object Undefined]",M="[object WeakMap]",$="[object ArrayBuffer]",x="[object DataView]",q="[object Float32Array]",I="[object Float64Array]",D="[object Int8Array]",F="[object Int16Array]",k="[object Int32Array]",K="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",fe="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Re=/^(?:0|[1-9]\d*)$/,J={};J[q]=J[I]=J[D]=J[F]=J[k]=J[K]=J[W]=J[ne]=J[fe]=!0,J[i]=J[t]=J[$]=J[o]=J[x]=J[d]=J[a]=J[p]=J[g]=J[m]=J[R]=J[U]=J[T]=J[S]=J[M]=!1;var Ee=typeof it=="object"&&it&&it.Object===Object&&it,A=typeof self=="object"&&self&&self.Object===Object&&self,y=Ee||A||Function("return this")(),j=c&&!c.nodeType&&c,N=j&&!0&&n&&!n.nodeType&&n,le=N&&N.exports===j,ge=le&&Ee.process,me=function(){try{return ge&&ge.binding&&ge.binding("util")}catch{}}(),Ae=me&&me.isTypedArray;function we(C,L){for(var Y=-1,se=C==null?0:C.length,Ne=0,be=[];++Y<se;){var xe=C[Y];L(xe,Y,C)&&(be[Ne++]=xe)}return be}function $e(C,L){for(var Y=-1,se=L.length,Ne=C.length;++Y<se;)C[Ne+Y]=L[Y];return C}function De(C,L){for(var Y=-1,se=C==null?0:C.length;++Y<se;)if(L(C[Y],Y,C))return!0;return!1}function je(C,L){for(var Y=-1,se=Array(C);++Y<C;)se[Y]=L(Y);return se}function St(C){return function(L){return C(L)}}function ct(C,L){return C.has(L)}function h(C,L){return C==null?void 0:C[L]}function B(C){var L=-1,Y=Array(C.size);return C.forEach(function(se,Ne){Y[++L]=[Ne,se]}),Y}function G(C,L){return function(Y){return C(L(Y))}}function re(C){var L=-1,Y=Array(C.size);return C.forEach(function(se){Y[++L]=se}),Y}var z=Array.prototype,te=Function.prototype,Z=Object.prototype,oe=y["__core-js_shared__"],ve=te.toString,ye=Z.hasOwnProperty,Ce=function(){var C=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),he=Z.toString,Ue=RegExp("^"+ve.call(ye).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=le?y.Buffer:void 0,H=y.Symbol,X=y.Uint8Array,V=Z.propertyIsEnumerable,Q=z.splice,ee=H?H.toStringTag:void 0,de=Object.getOwnPropertySymbols,ae=w?w.isBuffer:void 0,pe=G(Object.keys,Object),Se=$t(y,"DataView"),Ie=$t(y,"Map"),Le=$t(y,"Promise"),Oe=$t(y,"Set"),xt=$t(y,"WeakMap"),rt=$t(Object,"create"),At=Rt(Se),Cc=Rt(Ie),Oc=Rt(Le),Pc=Rt(Oe),Dc=Rt(xt),Ko=H?H.prototype:void 0,rn=Ko?Ko.valueOf:void 0;function bt(C){var L=-1,Y=C==null?0:C.length;for(this.clear();++L<Y;){var se=C[L];this.set(se[0],se[1])}}function Ic(){this.__data__=rt?rt(null):{},this.size=0}function Nc(C){var L=this.has(C)&&delete this.__data__[C];return this.size-=L?1:0,L}function Fc(C){var L=this.__data__;if(rt){var Y=L[C];return Y===f?void 0:Y}return ye.call(L,C)?L[C]:void 0}function Lc(C){var L=this.__data__;return rt?L[C]!==void 0:ye.call(L,C)}function xc(C,L){var Y=this.__data__;return this.size+=this.has(C)?0:1,Y[C]=rt&&L===void 0?f:L,this}bt.prototype.clear=Ic,bt.prototype.delete=Nc,bt.prototype.get=Fc,bt.prototype.has=Lc,bt.prototype.set=xc;function ft(C){var L=-1,Y=C==null?0:C.length;for(this.clear();++L<Y;){var se=C[L];this.set(se[0],se[1])}}function $c(){this.__data__=[],this.size=0}function Uc(C){var L=this.__data__,Y=Cr(L,C);if(Y<0)return!1;var se=L.length-1;return Y==se?L.pop():Q.call(L,Y,1),--this.size,!0}function kc(C){var L=this.__data__,Y=Cr(L,C);return Y<0?void 0:L[Y][1]}function qc(C){return Cr(this.__data__,C)>-1}function Mc(C,L){var Y=this.__data__,se=Cr(Y,C);return se<0?(++this.size,Y.push([C,L])):Y[se][1]=L,this}ft.prototype.clear=$c,ft.prototype.delete=Uc,ft.prototype.get=kc,ft.prototype.has=qc,ft.prototype.set=Mc;function Tt(C){var L=-1,Y=C==null?0:C.length;for(this.clear();++L<Y;){var se=C[L];this.set(se[0],se[1])}}function Bc(){this.size=0,this.__data__={hash:new bt,map:new(Ie||ft),string:new bt}}function jc(C){var L=Or(this,C).delete(C);return this.size-=L?1:0,L}function Hc(C){return Or(this,C).get(C)}function Gc(C){return Or(this,C).has(C)}function Wc(C,L){var Y=Or(this,C),se=Y.size;return Y.set(C,L),this.size+=Y.size==se?0:1,this}Tt.prototype.clear=Bc,Tt.prototype.delete=jc,Tt.prototype.get=Hc,Tt.prototype.has=Gc,Tt.prototype.set=Wc;function Rr(C){var L=-1,Y=C==null?0:C.length;for(this.__data__=new Tt;++L<Y;)this.add(C[L])}function zc(C){return this.__data__.set(C,f),this}function Vc(C){return this.__data__.has(C)}Rr.prototype.add=Rr.prototype.push=zc,Rr.prototype.has=Vc;function mt(C){var L=this.__data__=new ft(C);this.size=L.size}function Yc(){this.__data__=new ft,this.size=0}function Xc(C){var L=this.__data__,Y=L.delete(C);return this.size=L.size,Y}function Jc(C){return this.__data__.get(C)}function Kc(C){return this.__data__.has(C)}function Qc(C,L){var Y=this.__data__;if(Y instanceof ft){var se=Y.__data__;if(!Ie||se.length<s-1)return se.push([C,L]),this.size=++Y.size,this;Y=this.__data__=new Tt(se)}return Y.set(C,L),this.size=Y.size,this}mt.prototype.clear=Yc,mt.prototype.delete=Xc,mt.prototype.get=Jc,mt.prototype.has=Kc,mt.prototype.set=Qc;function Zc(C,L){var Y=Pr(C),se=!Y&&mf(C),Ne=!Y&&!se&&nn(C),be=!Y&&!se&&!Ne&&aa(C),xe=Y||se||Ne||be,qe=xe?je(C.length,String):[],Me=qe.length;for(var Fe in C)ye.call(C,Fe)&&!(xe&&(Fe=="length"||Ne&&(Fe=="offset"||Fe=="parent")||be&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||cf(Fe,Me)))&&qe.push(Fe);return qe}function Cr(C,L){for(var Y=C.length;Y--;)if(ra(C[Y][0],L))return Y;return-1}function ef(C,L,Y){var se=L(C);return Pr(C)?se:$e(se,Y(C))}function Vt(C){return C==null?C===void 0?E:_:ee&&ee in Object(C)?lf(C):pf(C)}function Qo(C){return Yt(C)&&Vt(C)==i}function Zo(C,L,Y,se,Ne){return C===L?!0:C==null||L==null||!Yt(C)&&!Yt(L)?C!==C&&L!==L:tf(C,L,Y,se,Zo,Ne)}function tf(C,L,Y,se,Ne,be){var xe=Pr(C),qe=Pr(L),Me=xe?t:gt(C),Fe=qe?t:gt(L);Me=Me==i?R:Me,Fe=Fe==i?R:Fe;var Je=Me==R,nt=Fe==R,He=Me==Fe;if(He&&nn(C)){if(!nn(L))return!1;xe=!0,Je=!1}if(He&&!Je)return be||(be=new mt),xe||aa(C)?ea(C,L,Y,se,Ne,be):af(C,L,Me,Y,se,Ne,be);if(!(Y&l)){var Ze=Je&&ye.call(C,"__wrapped__"),et=nt&&ye.call(L,"__wrapped__");if(Ze||et){var vt=Ze?C.value():C,dt=et?L.value():L;return be||(be=new mt),Ne(vt,dt,Y,se,be)}}return He?(be||(be=new mt),sf(C,L,Y,se,Ne,be)):!1}function rf(C){if(!oa(C)||df(C))return!1;var L=na(C)?Ue:ie;return L.test(Rt(C))}function nf(C){return Yt(C)&&ia(C.length)&&!!J[Vt(C)]}function of(C){if(!hf(C))return pe(C);var L=[];for(var Y in Object(C))ye.call(C,Y)&&Y!="constructor"&&L.push(Y);return L}function ea(C,L,Y,se,Ne,be){var xe=Y&l,qe=C.length,Me=L.length;if(qe!=Me&&!(xe&&Me>qe))return!1;var Fe=be.get(C);if(Fe&&be.get(L))return Fe==L;var Je=-1,nt=!0,He=Y&r?new Rr:void 0;for(be.set(C,L),be.set(L,C);++Je<qe;){var Ze=C[Je],et=L[Je];if(se)var vt=xe?se(et,Ze,Je,L,C,be):se(Ze,et,Je,C,L,be);if(vt!==void 0){if(vt)continue;nt=!1;break}if(He){if(!De(L,function(dt,Ct){if(!ct(He,Ct)&&(Ze===dt||Ne(Ze,dt,Y,se,be)))return He.push(Ct)})){nt=!1;break}}else if(!(Ze===et||Ne(Ze,et,Y,se,be))){nt=!1;break}}return be.delete(C),be.delete(L),nt}function af(C,L,Y,se,Ne,be,xe){switch(Y){case x:if(C.byteLength!=L.byteLength||C.byteOffset!=L.byteOffset)return!1;C=C.buffer,L=L.buffer;case $:return!(C.byteLength!=L.byteLength||!be(new X(C),new X(L)));case o:case d:case m:return ra(+C,+L);case a:return C.name==L.name&&C.message==L.message;case U:case S:return C==L+"";case g:var qe=B;case T:var Me=se&l;if(qe||(qe=re),C.size!=L.size&&!Me)return!1;var Fe=xe.get(C);if(Fe)return Fe==L;se|=r,xe.set(C,L);var Je=ea(qe(C),qe(L),se,Ne,be,xe);return xe.delete(C),Je;case b:if(rn)return rn.call(C)==rn.call(L)}return!1}function sf(C,L,Y,se,Ne,be){var xe=Y&l,qe=ta(C),Me=qe.length,Fe=ta(L),Je=Fe.length;if(Me!=Je&&!xe)return!1;for(var nt=Me;nt--;){var He=qe[nt];if(!(xe?He in L:ye.call(L,He)))return!1}var Ze=be.get(C);if(Ze&&be.get(L))return Ze==L;var et=!0;be.set(C,L),be.set(L,C);for(var vt=xe;++nt<Me;){He=qe[nt];var dt=C[He],Ct=L[He];if(se)var sa=xe?se(Ct,dt,He,L,C,be):se(dt,Ct,He,C,L,be);if(!(sa===void 0?dt===Ct||Ne(dt,Ct,Y,se,be):sa)){et=!1;break}vt||(vt=He=="constructor")}if(et&&!vt){var Dr=C.constructor,Ir=L.constructor;Dr!=Ir&&"constructor"in C&&"constructor"in L&&!(typeof Dr=="function"&&Dr instanceof Dr&&typeof Ir=="function"&&Ir instanceof Ir)&&(et=!1)}return be.delete(C),be.delete(L),et}function ta(C){return ef(C,yf,uf)}function Or(C,L){var Y=C.__data__;return ff(L)?Y[typeof L=="string"?"string":"hash"]:Y.map}function $t(C,L){var Y=h(C,L);return rf(Y)?Y:void 0}function lf(C){var L=ye.call(C,ee),Y=C[ee];try{C[ee]=void 0;var se=!0}catch{}var Ne=he.call(C);return se&&(L?C[ee]=Y:delete C[ee]),Ne}var uf=de?function(C){return C==null?[]:(C=Object(C),we(de(C),function(L){return V.call(C,L)}))}:Ef,gt=Vt;(Se&&gt(new Se(new ArrayBuffer(1)))!=x||Ie&&gt(new Ie)!=g||Le&&gt(Le.resolve())!=O||Oe&&gt(new Oe)!=T||xt&&gt(new xt)!=M)&&(gt=function(C){var L=Vt(C),Y=L==R?C.constructor:void 0,se=Y?Rt(Y):"";if(se)switch(se){case At:return x;case Cc:return g;case Oc:return O;case Pc:return T;case Dc:return M}return L});function cf(C,L){return L=L??e,!!L&&(typeof C=="number"||Re.test(C))&&C>-1&&C%1==0&&C<L}function ff(C){var L=typeof C;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?C!=="__proto__":C===null}function df(C){return!!Ce&&Ce in C}function hf(C){var L=C&&C.constructor,Y=typeof L=="function"&&L.prototype||Z;return C===Y}function pf(C){return he.call(C)}function Rt(C){if(C!=null){try{return ve.call(C)}catch{}try{return C+""}catch{}}return""}function ra(C,L){return C===L||C!==C&&L!==L}var mf=Qo(function(){return arguments}())?Qo:function(C){return Yt(C)&&ye.call(C,"callee")&&!V.call(C,"callee")},Pr=Array.isArray;function gf(C){return C!=null&&ia(C.length)&&!na(C)}var nn=ae||wf;function vf(C,L){return Zo(C,L)}function na(C){if(!oa(C))return!1;var L=Vt(C);return L==p||L==v||L==u||L==P}function ia(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=e}function oa(C){var L=typeof C;return C!=null&&(L=="object"||L=="function")}function Yt(C){return C!=null&&typeof C=="object"}var aa=Ae?St(Ae):nf;function yf(C){return gf(C)?Zc(C):of(C)}function Ef(){return[]}function wf(){return!1}n.exports=vf}(vr,vr.exports)),vr.exports}var Rl;function th(){if(Rl)return kt;Rl=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.DownloadedUpdateHelper=void 0,kt.createTempUpdateFile=i;const n=Er,c=Ye,s=eh(),f=_t(),l=Pe;let r=class{constructor(u){this.cacheDir=u,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return l.join(this.cacheDir,"pending")}async validateDownloadedPath(u,o,d,a){if(this.versionInfo!=null&&this.file===u&&this.fileInfo!=null)return s(this.versionInfo,o)&&s(this.fileInfo.info,d.info)&&await(0,f.pathExists)(u)?u:null;const p=await this.getValidCachedUpdateFile(d,a);return p===null?null:(a.info(`Update has already been downloaded to ${u}).`),this._file=p,p)}async setDownloadedFile(u,o,d,a,p,v){this._file=u,this._packageFile=o,this.versionInfo=d,this.fileInfo=a,this._downloadedFileInfo={fileName:p,sha512:a.info.sha512,isAdminRightsRequired:a.info.isAdminRightsRequired===!0},v&&await(0,f.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,f.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(u,o){const d=this.getUpdateInfoFile();if(!await(0,f.pathExists)(d))return null;let p;try{p=await(0,f.readJson)(d)}catch(_){let R="No cached update info available";return _.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),R+=` (error on read: ${_.message})`),o.info(R),null}if(!((p==null?void 0:p.fileName)!==null))return o.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(u.info.sha512!==p.sha512)return o.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p.sha512}, expected: ${u.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const g=l.join(this.cacheDirForPendingUpdate,p.fileName);if(!await(0,f.pathExists)(g))return o.info("Cached update file doesn't exist"),null;const m=await e(g);return u.info.sha512!==m?(o.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${u.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=p,g)}getUpdateInfoFile(){return l.join(this.cacheDirForPendingUpdate,"update-info.json")}};kt.DownloadedUpdateHelper=r;function e(t,u="sha512",o="base64",d){return new Promise((a,p)=>{const v=(0,n.createHash)(u);v.on("error",p).setEncoding(o),(0,c.createReadStream)(t,{...d,highWaterMark:1024*1024}).on("error",p).on("end",()=>{v.end(),a(v.read())}).pipe(v,{end:!1})})}async function i(t,u,o){let d=0,a=l.join(u,t);for(let p=0;p<3;p++)try{return await(0,f.unlink)(a),a}catch(v){if(v.code==="ENOENT")return a;o.warn(`Error on remove temp update file: ${v}`),a=l.join(u,`${d++}-${t}`)}return a}return kt}var er={},Hr={},Cl;function rh(){if(Cl)return Hr;Cl=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.getAppCacheDir=s;const n=Pe,c=wt;function s(){const f=(0,c.homedir)();let l;return process.platform==="win32"?l=process.env.LOCALAPPDATA||n.join(f,"AppData","Local"):process.platform==="darwin"?l=n.join(f,"Library","Caches"):l=process.env.XDG_CACHE_HOME||n.join(f,".cache"),l}return Hr}var Ol;function nh(){if(Ol)return er;Ol=1,Object.defineProperty(er,"__esModule",{value:!0}),er.ElectronAppAdapter=void 0;const n=Pe,c=rh();let s=class{constructor(l=ce.app){this.app=l}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?n.join(process.resourcesPath,"app-update.yml"):n.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,c.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(l){this.app.once("quit",(r,e)=>l(e))}};return er.ElectronAppAdapter=s,er}var no={},Pl;function ih(){return Pl||(Pl=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ElectronHttpExecutor=n.NET_SESSION_NAME=void 0,n.getNetSession=s;const c=Be();n.NET_SESSION_NAME="electron-updater";function s(){return ce.session.fromPartition(n.NET_SESSION_NAME,{cache:!1})}class f extends c.HttpExecutor{constructor(r){super(),this.proxyLoginCallback=r,this.cachedSession=null}async download(r,e,i){return await i.cancellationToken.createPromise((t,u,o)=>{const d={headers:i.headers||void 0,redirect:"manual"};(0,c.configureRequestUrl)(r,d),(0,c.configureRequestOptions)(d),this.doDownload(d,{destination:e,options:i,onCancel:o,callback:a=>{a==null?t(e):u(a)},responseHandler:null},0)})}createRequest(r,e){r.headers&&r.headers.Host&&(r.host=r.headers.Host,delete r.headers.Host),this.cachedSession==null&&(this.cachedSession=s());const i=ce.net.request({...r,session:this.cachedSession});return i.on("response",e),this.proxyLoginCallback!=null&&i.on("login",this.proxyLoginCallback),i}addRedirectHandlers(r,e,i,t,u){r.on("redirect",(o,d,a)=>{r.abort(),t>this.maxRedirects?i(this.createMaxRedirectError()):u(c.HttpExecutor.prepareRedirectUrlOptions(a,e))})}}n.ElectronHttpExecutor=f}(no)),no}var tr={},It={},io,Dl;function oh(){if(Dl)return io;Dl=1;var n="[object Symbol]",c=/[\\^$.*+?()[\]{}|]/g,s=RegExp(c.source),f=typeof it=="object"&&it&&it.Object===Object&&it,l=typeof self=="object"&&self&&self.Object===Object&&self,r=f||l||Function("return this")(),e=Object.prototype,i=e.toString,t=r.Symbol,u=t?t.prototype:void 0,o=u?u.toString:void 0;function d(m){if(typeof m=="string")return m;if(p(m))return o?o.call(m):"";var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}function a(m){return!!m&&typeof m=="object"}function p(m){return typeof m=="symbol"||a(m)&&i.call(m)==n}function v(m){return m==null?"":d(m)}function g(m){return m=v(m),m&&s.test(m)?m.replace(c,"\\$&"):m}return io=g,io}var Il;function Ft(){if(Il)return It;Il=1,Object.defineProperty(It,"__esModule",{value:!0}),It.newBaseUrl=s,It.newUrlFromBase=f,It.getChannelFilename=l,It.blockmapFiles=r;const n=jt,c=oh();function s(e){const i=new n.URL(e);return i.pathname.endsWith("/")||(i.pathname+="/"),i}function f(e,i,t=!1){const u=new n.URL(e,i),o=i.search;return o!=null&&o.length!==0?u.search=o:t&&(u.search=`noCache=${Date.now().toString(32)}`),u}function l(e){return`${e}.yml`}function r(e,i,t){const u=f(`${e.pathname}.blockmap`,e);return[f(`${e.pathname.replace(new RegExp(c(t),"g"),i)}.blockmap`,e),u]}return It}var ht={},Nl;function st(){if(Nl)return ht;Nl=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.Provider=void 0,ht.findFile=l,ht.parseUpdateInfo=r,ht.getFileList=e,ht.resolveFiles=i;const n=Be(),c=Bo(),s=Ft();let f=class{constructor(u){this.runtimeOptions=u,this.requestHeaders=null,this.executor=u.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const u=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(u==="x64"?"":`-${u}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(u){return`${u}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(u){this.requestHeaders=u}httpRequest(u,o,d){return this.executor.request(this.createRequestOptions(u,o),d)}createRequestOptions(u,o){const d={};return this.requestHeaders==null?o!=null&&(d.headers=o):d.headers=o==null?this.requestHeaders:{...this.requestHeaders,...o},(0,n.configureRequestUrl)(u,d),d}};ht.Provider=f;function l(t,u,o){if(t.length===0)throw(0,n.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const d=t.find(a=>a.url.pathname.toLowerCase().endsWith(`.${u}`));return d??(o==null?t[0]:t.find(a=>!o.some(p=>a.url.pathname.toLowerCase().endsWith(`.${p}`))))}function r(t,u,o){if(t==null)throw(0,n.newError)(`Cannot parse update info from ${u} in the latest release artifacts (${o}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let d;try{d=(0,c.load)(t)}catch(a){throw(0,n.newError)(`Cannot parse update info from ${u} in the latest release artifacts (${o}): ${a.stack||a.message}, rawData: ${t}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return d}function e(t){const u=t.files;if(u!=null&&u.length>0)return u;if(t.path!=null)return[{url:t.path,sha2:t.sha2,sha512:t.sha512}];throw(0,n.newError)(`No files provided: ${(0,n.safeStringifyJson)(t)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function i(t,u,o=d=>d){const a=e(t).map(g=>{if(g.sha2==null&&g.sha512==null)throw(0,n.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,n.safeStringifyJson)(g)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,s.newUrlFromBase)(o(g.url),u),info:g}}),p=t.packages,v=p==null?null:p[process.arch]||p.ia32;return v!=null&&(a[0].packageInfo={...v,path:(0,s.newUrlFromBase)(o(v.path),u).href}),a}return ht}var Fl;function mc(){if(Fl)return tr;Fl=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.GenericProvider=void 0;const n=Be(),c=Ft(),s=st();let f=class extends s.Provider{constructor(r,e,i){super(i),this.configuration=r,this.updater=e,this.baseUrl=(0,c.newBaseUrl)(this.configuration.url)}get channel(){const r=this.updater.channel||this.configuration.channel;return r==null?this.getDefaultChannelName():this.getCustomChannelName(r)}async getLatestVersion(){const r=(0,c.getChannelFilename)(this.channel),e=(0,c.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);for(let i=0;;i++)try{return(0,s.parseUpdateInfo)(await this.httpRequest(e),r,e)}catch(t){if(t instanceof n.HttpError&&t.statusCode===404)throw(0,n.newError)(`Cannot find channel "${r}" update info: ${t.stack||t.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(t.code==="ECONNREFUSED"&&i<3){await new Promise((u,o)=>{try{setTimeout(u,1e3*i)}catch(d){o(d)}});continue}throw t}}resolveFiles(r){return(0,s.resolveFiles)(r,this.baseUrl)}};return tr.GenericProvider=f,tr}var rr={},nr={},Ll;function ah(){if(Ll)return nr;Ll=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.BitbucketProvider=void 0;const n=Be(),c=Ft(),s=st();let f=class extends s.Provider{constructor(r,e,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=r,this.updater=e;const{owner:t,slug:u}=r;this.baseUrl=(0,c.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${t}/${u}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const r=new n.CancellationToken,e=(0,c.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,c.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(i,void 0,r);return(0,s.parseUpdateInfo)(t,e,i)}catch(t){throw(0,n.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(r){return(0,s.resolveFiles)(r,this.baseUrl)}toString(){const{owner:r,slug:e}=this.configuration;return`Bitbucket (owner: ${r}, slug: ${e}, channel: ${this.channel})`}};return nr.BitbucketProvider=f,nr}var Et={},xl;function gc(){if(xl)return Et;xl=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.GitHubProvider=Et.BaseGitHubProvider=void 0,Et.computeReleaseNotes=u;const n=Be(),c=pc(),s=jt,f=Ft(),l=st(),r=/\/tag\/([^/]+)$/;class e extends l.Provider{constructor(d,a,p){super({...p,isUseMultipleRangeRequest:!1}),this.options=d,this.baseUrl=(0,f.newBaseUrl)((0,n.githubUrl)(d,a));const v=a==="github.com"?"api.github.com":a;this.baseApiUrl=(0,f.newBaseUrl)((0,n.githubUrl)(d,v))}computeGithubBasePath(d){const a=this.options.host;return a&&!["github.com","api.github.com"].includes(a)?`/api/v3${d}`:d}}Et.BaseGitHubProvider=e;let i=class extends e{constructor(d,a,p){super(d,"github.com",p),this.options=d,this.updater=a}get channel(){const d=this.updater.channel||this.options.channel;return d==null?this.getDefaultChannelName():this.getCustomChannelName(d)}async getLatestVersion(){var d,a,p,v,g;const m=new n.CancellationToken,_=await this.httpRequest((0,f.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),R=(0,n.parseXml)(_);let O=R.element("entry",!1,"No published versions on GitHub"),P=null;try{if(this.updater.allowPrerelease){const M=((d=this.updater)===null||d===void 0?void 0:d.channel)||((a=c.prerelease(this.updater.currentVersion))===null||a===void 0?void 0:a[0])||null;if(M===null)P=r.exec(O.element("link").attribute("href"))[1];else for(const $ of R.getElements("entry")){const x=r.exec($.element("link").attribute("href"));if(x===null)continue;const q=x[1],I=((p=c.prerelease(q))===null||p===void 0?void 0:p[0])||null,D=!M||["alpha","beta"].includes(M),F=I!==null&&!["alpha","beta"].includes(String(I));if(D&&!F&&!(M==="beta"&&I==="alpha")){P=q;break}if(I&&I===M){P=q;break}}}else{P=await this.getLatestTagName(m);for(const M of R.getElements("entry"))if(r.exec(M.element("link").attribute("href"))[1]===P){O=M;break}}}catch(M){throw(0,n.newError)(`Cannot parse releases feed: ${M.stack||M.message},
XML:
${_}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(P==null)throw(0,n.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let U,T="",S="";const b=async M=>{T=(0,f.getChannelFilename)(M),S=(0,f.newUrlFromBase)(this.getBaseDownloadPath(String(P),T),this.baseUrl);const $=this.createRequestOptions(S);try{return await this.executor.request($,m)}catch(x){throw x instanceof n.HttpError&&x.statusCode===404?(0,n.newError)(`Cannot find ${T} in the latest release artifacts (${S}): ${x.stack||x.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):x}};try{let M=this.channel;this.updater.allowPrerelease&&(!((v=c.prerelease(P))===null||v===void 0)&&v[0])&&(M=this.getCustomChannelName(String((g=c.prerelease(P))===null||g===void 0?void 0:g[0]))),U=await b(M)}catch(M){if(this.updater.allowPrerelease)U=await b(this.getDefaultChannelName());else throw M}const E=(0,l.parseUpdateInfo)(U,T,S);return E.releaseName==null&&(E.releaseName=O.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=u(this.updater.currentVersion,this.updater.fullChangelog,R,O)),{tag:P,...E}}async getLatestTagName(d){const a=this.options,p=a.host==null||a.host==="github.com"?(0,f.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new s.URL(`${this.computeGithubBasePath(`/repos/${a.owner}/${a.repo}/releases`)}/latest`,this.baseApiUrl);try{const v=await this.httpRequest(p,{Accept:"application/json"},d);return v==null?null:JSON.parse(v).tag_name}catch(v){throw(0,n.newError)(`Unable to find latest version on GitHub (${p}), please ensure a production release exists: ${v.stack||v.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(d){return(0,l.resolveFiles)(d,this.baseUrl,a=>this.getBaseDownloadPath(d.tag,a.replace(/ /g,"-")))}getBaseDownloadPath(d,a){return`${this.basePath}/download/${d}/${a}`}};Et.GitHubProvider=i;function t(o){const d=o.elementValueOrEmpty("content");return d==="No content."?"":d}function u(o,d,a,p){if(!d)return t(p);const v=[];for(const g of a.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(g.element("link").attribute("href"))[1];c.lt(o,m)&&v.push({version:m,note:t(g)})}return v.sort((g,m)=>c.rcompare(g.version,m.version))}return Et}var ir={},$l;function sh(){if($l)return ir;$l=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.KeygenProvider=void 0;const n=Be(),c=Ft(),s=st();let f=class extends s.Provider{constructor(r,e,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=r,this.updater=e,this.baseUrl=(0,c.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const r=new n.CancellationToken,e=(0,c.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,c.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(i,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},r);return(0,s.parseUpdateInfo)(t,e,i)}catch(t){throw(0,n.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(r){return(0,s.resolveFiles)(r,this.baseUrl)}toString(){const{account:r,product:e,platform:i}=this.configuration;return`Keygen (account: ${r}, product: ${e}, platform: ${i}, channel: ${this.channel})`}};return ir.KeygenProvider=f,ir}var or={},Ul;function lh(){if(Ul)return or;Ul=1,Object.defineProperty(or,"__esModule",{value:!0}),or.PrivateGitHubProvider=void 0;const n=Be(),c=Bo(),s=Pe,f=jt,l=Ft(),r=gc(),e=st();let i=class extends r.BaseGitHubProvider{constructor(u,o,d,a){super(u,"api.github.com",a),this.updater=o,this.token=d}createRequestOptions(u,o){const d=super.createRequestOptions(u,o);return d.redirect="manual",d}async getLatestVersion(){const u=new n.CancellationToken,o=(0,l.getChannelFilename)(this.getDefaultChannelName()),d=await this.getLatestVersionInfo(u),a=d.assets.find(g=>g.name===o);if(a==null)throw(0,n.newError)(`Cannot find ${o} in the release ${d.html_url||d.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const p=new f.URL(a.url);let v;try{v=(0,c.load)(await this.httpRequest(p,this.configureHeaders("application/octet-stream"),u))}catch(g){throw g instanceof n.HttpError&&g.statusCode===404?(0,n.newError)(`Cannot find ${o} in the latest release artifacts (${p}): ${g.stack||g.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):g}return v.assets=d.assets,v}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(u){return{accept:u,authorization:`token ${this.token}`}}async getLatestVersionInfo(u){const o=this.updater.allowPrerelease;let d=this.basePath;o||(d=`${d}/latest`);const a=(0,l.newUrlFromBase)(d,this.baseUrl);try{const p=JSON.parse(await this.httpRequest(a,this.configureHeaders("application/vnd.github.v3+json"),u));return o?p.find(v=>v.prerelease)||p[0]:p}catch(p){throw(0,n.newError)(`Unable to find latest version on GitHub (${a}), please ensure a production release exists: ${p.stack||p.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(u){return(0,e.getFileList)(u).map(o=>{const d=s.posix.basename(o.url).replace(/ /g,"-"),a=u.assets.find(p=>p!=null&&p.name===d);if(a==null)throw(0,n.newError)(`Cannot find asset "${d}" in: ${JSON.stringify(u.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new f.URL(a.url),info:o}})}};return or.PrivateGitHubProvider=i,or}var kl;function uh(){if(kl)return rr;kl=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.isUrlProbablySupportMultiRangeRequests=e,rr.createClient=i;const n=Be(),c=ah(),s=mc(),f=gc(),l=sh(),r=lh();function e(t){return!t.includes("s3.amazonaws.com")}function i(t,u,o){if(typeof t=="string")throw(0,n.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const d=t.provider;switch(d){case"github":{const a=t,p=(a.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||a.token;return p==null?new f.GitHubProvider(a,u,o):new r.PrivateGitHubProvider(a,u,p,o)}case"bitbucket":return new c.BitbucketProvider(t,u,o);case"keygen":return new l.KeygenProvider(t,u,o);case"s3":case"spaces":return new s.GenericProvider({provider:"generic",url:(0,n.getS3LikeProviderBaseUrl)(t),channel:t.channel||null},u,{...o,isUseMultipleRangeRequest:!1});case"generic":{const a=t;return new s.GenericProvider(a,u,{...o,isUseMultipleRangeRequest:a.useMultipleRangeRequest!==!1&&e(a.url)})}case"custom":{const a=t,p=a.updateProvider;if(!p)throw(0,n.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new p(a,u,o)}default:throw(0,n.newError)(`Unsupported provider: ${d}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return rr}var ar={},sr={},qt={},Mt={},ql;function Yo(){if(ql)return Mt;ql=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.OperationKind=void 0,Mt.computeOperations=c;var n;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(n||(Mt.OperationKind=n={}));function c(e,i,t){const u=r(e.files),o=r(i.files);let d=null;const a=i.files[0],p=[],v=a.name,g=u.get(v);if(g==null)throw new Error(`no file ${v} in old blockmap`);const m=o.get(v);let _=0;const{checksumToOffset:R,checksumToOldSize:O}=l(u.get(v),g.offset,t);let P=a.offset;for(let U=0;U<m.checksums.length;P+=m.sizes[U],U++){const T=m.sizes[U],S=m.checksums[U];let b=R.get(S);b!=null&&O.get(S)!==T&&(t.warn(`Checksum ("${S}") matches, but size differs (old: ${O.get(S)}, new: ${T})`),b=void 0),b===void 0?(_++,d!=null&&d.kind===n.DOWNLOAD&&d.end===P?d.end+=T:(d={kind:n.DOWNLOAD,start:P,end:P+T},f(d,p,S,U))):d!=null&&d.kind===n.COPY&&d.end===b?d.end+=T:(d={kind:n.COPY,start:b,end:b+T},f(d,p,S,U))}return _>0&&t.info(`File${a.name==="file"?"":" "+a.name} has ${_} changed blocks`),p}const s=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function f(e,i,t,u){if(s&&i.length!==0){const o=i[i.length-1];if(o.kind===e.kind&&e.start<o.end&&e.start>o.start){const d=[o.start,o.end,e.start,e.end].reduce((a,p)=>a<p?a:p);throw new Error(`operation (block index: ${u}, checksum: ${t}, kind: ${n[e.kind]}) overlaps previous operation (checksum: ${t}):
abs: ${o.start} until ${o.end} and ${e.start} until ${e.end}
rel: ${o.start-d} until ${o.end-d} and ${e.start-d} until ${e.end-d}`)}}i.push(e)}function l(e,i,t){const u=new Map,o=new Map;let d=i;for(let a=0;a<e.checksums.length;a++){const p=e.checksums[a],v=e.sizes[a],g=o.get(p);if(g===void 0)u.set(p,d),o.set(p,v);else if(t.debug!=null){const m=g===v?"(same size)":`(size: ${g}, this size: ${v})`;t.debug(`${p} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}d+=v}return{checksumToOffset:u,checksumToOldSize:o}}function r(e){const i=new Map;for(const t of e)i.set(t.name,t);return i}return Mt}var Ml;function vc(){if(Ml)return qt;Ml=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.DataSplitter=void 0,qt.copyData=e;const n=Be(),c=Ye,s=wr,f=Yo(),l=Buffer.from(`\r
\r
`);var r;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(r||(r={}));function e(t,u,o,d,a){const p=(0,c.createReadStream)("",{fd:o,autoClose:!1,start:t.start,end:t.end-1});p.on("error",d),p.once("end",a),p.pipe(u,{end:!1})}let i=class extends s.Writable{constructor(u,o,d,a,p,v){super(),this.out=u,this.options=o,this.partIndexToTaskIndex=d,this.partIndexToLength=p,this.finishHandler=v,this.partIndex=-1,this.headerListBuffer=null,this.readState=r.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=a.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(u,o,d){if(this.isFinished){console.error(`Trailing ignored data: ${u.length} bytes`);return}this.handleData(u).then(d).catch(d)}async handleData(u){let o=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,n.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const d=Math.min(this.ignoreByteCount,u.length);this.ignoreByteCount-=d,o=d}else if(this.remainingPartDataCount>0){const d=Math.min(this.remainingPartDataCount,u.length);this.remainingPartDataCount-=d,await this.processPartData(u,0,d),o=d}if(o!==u.length){if(this.readState===r.HEADER){const d=this.searchHeaderListEnd(u,o);if(d===-1)return;o=d,this.readState=r.BODY,this.headerListBuffer=null}for(;;){if(this.readState===r.BODY)this.readState=r.INIT;else{this.partIndex++;let v=this.partIndexToTaskIndex.get(this.partIndex);if(v==null)if(this.isFinished)v=this.options.end;else throw(0,n.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const g=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(g<v)await this.copyExistingData(g,v);else if(g>v)throw(0,n.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(o=this.searchHeaderListEnd(u,o),o===-1){this.readState=r.HEADER;return}}const d=this.partIndexToLength[this.partIndex],a=o+d,p=Math.min(a,u.length);if(await this.processPartStarted(u,o,p),this.remainingPartDataCount=d-(p-o),this.remainingPartDataCount>0)return;if(o=a+this.boundaryLength,o>=u.length){this.ignoreByteCount=this.boundaryLength-(u.length-a);return}}}}copyExistingData(u,o){return new Promise((d,a)=>{const p=()=>{if(u===o){d();return}const v=this.options.tasks[u];if(v.kind!==f.OperationKind.COPY){a(new Error("Task kind must be COPY"));return}e(v,this.out,this.options.oldFileFd,a,()=>{u++,p()})};p()})}searchHeaderListEnd(u,o){const d=u.indexOf(l,o);if(d!==-1)return d+l.length;const a=o===0?u:u.slice(o);return this.headerListBuffer==null?this.headerListBuffer=a:this.headerListBuffer=Buffer.concat([this.headerListBuffer,a]),-1}onPartEnd(){const u=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==u)throw(0,n.newError)(`Expected length: ${u} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(u,o,d){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(u,o,d)}processPartData(u,o,d){this.actualPartLength+=d-o;const a=this.out;return a.write(o===0&&u.length===d?u:u.slice(o,d))?Promise.resolve():new Promise((p,v)=>{a.on("error",v),a.once("drain",()=>{a.removeListener("error",v),p()})})}};return qt.DataSplitter=i,qt}var lr={},Bl;function ch(){if(Bl)return lr;Bl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.executeTasksUsingMultipleRangeRequests=f,lr.checkIsRangesSupported=r;const n=Be(),c=vc(),s=Yo();function f(e,i,t,u,o){const d=a=>{if(a>=i.length){e.fileMetadataBuffer!=null&&t.write(e.fileMetadataBuffer),t.end();return}const p=a+1e3;l(e,{tasks:i,start:a,end:Math.min(i.length,p),oldFileFd:u},t,()=>d(p),o)};return d}function l(e,i,t,u,o){let d="bytes=",a=0;const p=new Map,v=[];for(let _=i.start;_<i.end;_++){const R=i.tasks[_];R.kind===s.OperationKind.DOWNLOAD&&(d+=`${R.start}-${R.end-1}, `,p.set(a,_),a++,v.push(R.end-R.start))}if(a<=1){const _=R=>{if(R>=i.end){u();return}const O=i.tasks[R++];if(O.kind===s.OperationKind.COPY)(0,c.copyData)(O,t,i.oldFileFd,o,()=>_(R));else{const P=e.createRequestOptions();P.headers.Range=`bytes=${O.start}-${O.end-1}`;const U=e.httpExecutor.createRequest(P,T=>{r(T,o)&&(T.pipe(t,{end:!1}),T.once("end",()=>_(R)))});e.httpExecutor.addErrorAndTimeoutHandlers(U,o),U.end()}};_(i.start);return}const g=e.createRequestOptions();g.headers.Range=d.substring(0,d.length-2);const m=e.httpExecutor.createRequest(g,_=>{if(!r(_,o))return;const R=(0,n.safeGetHeader)(_,"content-type"),O=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(R);if(O==null){o(new Error(`Content-Type "multipart/byteranges" is expected, but got "${R}"`));return}const P=new c.DataSplitter(t,i,p,O[1]||O[2],v,u);P.on("error",o),_.pipe(P),_.on("end",()=>{setTimeout(()=>{m.abort(),o(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(m,o),m.end()}function r(e,i){if(e.statusCode>=400)return i((0,n.createHttpError)(e)),!1;if(e.statusCode!==206){const t=(0,n.safeGetHeader)(e,"accept-ranges");if(t==null||t==="none")return i(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}return lr}var ur={},jl;function fh(){if(jl)return ur;jl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.ProgressDifferentialDownloadCallbackTransform=void 0;const n=wr;var c;(function(f){f[f.COPY=0]="COPY",f[f.DOWNLOAD=1]="DOWNLOAD"})(c||(c={}));let s=class extends n.Transform{constructor(l,r,e){super(),this.progressDifferentialDownloadInfo=l,this.cancellationToken=r,this.onProgress=e,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=c.COPY,this.nextUpdate=this.start+1e3}_transform(l,r,e){if(this.cancellationToken.cancelled){e(new Error("cancelled"),null);return}if(this.operationType==c.COPY){e(null,l);return}this.transferred+=l.length,this.delta+=l.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),e(null,l)}beginFileCopy(){this.operationType=c.COPY}beginRangeDownload(){this.operationType=c.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(l){if(this.cancellationToken.cancelled){l(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,l(null)}};return ur.ProgressDifferentialDownloadCallbackTransform=s,ur}var Hl;function yc(){if(Hl)return sr;Hl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.DifferentialDownloader=void 0;const n=Be(),c=_t(),s=Ye,f=vc(),l=jt,r=Yo(),e=ch(),i=fh();let t=class{constructor(a,p,v){this.blockAwareFileInfo=a,this.httpExecutor=p,this.options=v,this.fileMetadataBuffer=null,this.logger=v.logger}createRequestOptions(){const a={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,n.configureRequestUrl)(this.options.newUrl,a),(0,n.configureRequestOptions)(a),a}doDownload(a,p){if(a.version!==p.version)throw new Error(`version is different (${a.version} - ${p.version}), full download is required`);const v=this.logger,g=(0,r.computeOperations)(a,p,v);v.debug!=null&&v.debug(JSON.stringify(g,null,2));let m=0,_=0;for(const O of g){const P=O.end-O.start;O.kind===r.OperationKind.DOWNLOAD?m+=P:_+=P}const R=this.blockAwareFileInfo.size;if(m+_+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==R)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${_}, newSize: ${R}`);return v.info(`Full: ${u(R)}, To download: ${u(m)} (${Math.round(m/(R/100))}%)`),this.downloadFile(g)}downloadFile(a){const p=[],v=()=>Promise.all(p.map(g=>(0,c.close)(g.descriptor).catch(m=>{this.logger.error(`cannot close file "${g.path}": ${m}`)})));return this.doDownloadFile(a,p).then(v).catch(g=>v().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(_){try{console.error(_)}catch{}}throw g}).then(()=>{throw g}))}async doDownloadFile(a,p){const v=await(0,c.open)(this.options.oldFile,"r");p.push({descriptor:v,path:this.options.oldFile});const g=await(0,c.open)(this.options.newFile,"w");p.push({descriptor:g,path:this.options.newFile});const m=(0,s.createWriteStream)(this.options.newFile,{fd:g});await new Promise((_,R)=>{const O=[];let P;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const x=[];let q=0;for(const D of a)D.kind===r.OperationKind.DOWNLOAD&&(x.push(D.end-D.start),q+=D.end-D.start);const I={expectedByteCounts:x,grandTotal:q};P=new i.ProgressDifferentialDownloadCallbackTransform(I,this.options.cancellationToken,this.options.onProgress),O.push(P)}const U=new n.DigestTransform(this.blockAwareFileInfo.sha512);U.isValidateOnEnd=!1,O.push(U),m.on("finish",()=>{m.close(()=>{p.splice(1,1);try{U.validate()}catch(x){R(x);return}_(void 0)})}),O.push(m);let T=null;for(const x of O)x.on("error",R),T==null?T=x:T=T.pipe(x);const S=O[0];let b;if(this.options.isUseMultipleRangeRequest){b=(0,e.executeTasksUsingMultipleRangeRequests)(this,a,S,v,R),b(0);return}let E=0,M=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const $=this.createRequestOptions();$.redirect="manual",b=x=>{var q,I;if(x>=a.length){this.fileMetadataBuffer!=null&&S.write(this.fileMetadataBuffer),S.end();return}const D=a[x++];if(D.kind===r.OperationKind.COPY){P&&P.beginFileCopy(),(0,f.copyData)(D,S,v,R,()=>b(x));return}const F=`bytes=${D.start}-${D.end-1}`;$.headers.range=F,(I=(q=this.logger)===null||q===void 0?void 0:q.debug)===null||I===void 0||I.call(q,`download range: ${F}`),P&&P.beginRangeDownload();const k=this.httpExecutor.createRequest($,K=>{K.on("error",R),K.on("aborted",()=>{R(new Error("response has been aborted by the server"))}),K.statusCode>=400&&R((0,n.createHttpError)(K)),K.pipe(S,{end:!1}),K.once("end",()=>{P&&P.endRangeDownload(),++E===100?(E=0,setTimeout(()=>b(x),1e3)):b(x)})});k.on("redirect",(K,W,ne)=>{this.logger.info(`Redirect to ${o(ne)}`),M=ne,(0,n.configureRequestUrl)(new l.URL(M),$),k.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(k,R),k.end()},b(0)})}async readRemoteBytes(a,p){const v=Buffer.allocUnsafe(p+1-a),g=this.createRequestOptions();g.headers.range=`bytes=${a}-${p}`;let m=0;if(await this.request(g,_=>{_.copy(v,m),m+=_.length}),m!==v.length)throw new Error(`Received data length ${m} is not equal to expected ${v.length}`);return v}request(a,p){return new Promise((v,g)=>{const m=this.httpExecutor.createRequest(a,_=>{(0,e.checkIsRangesSupported)(_,g)&&(_.on("error",g),_.on("aborted",()=>{g(new Error("response has been aborted by the server"))}),_.on("data",p),_.on("end",()=>v()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,g),m.end()})}};sr.DifferentialDownloader=t;function u(d,a=" KB"){return new Intl.NumberFormat("en").format((d/1024).toFixed(2))+a}function o(d){const a=d.indexOf("?");return a<0?d:d.substring(0,a)}return sr}var Gl;function dh(){if(Gl)return ar;Gl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.GenericDifferentialDownloader=void 0;const n=yc();let c=class extends n.DifferentialDownloader{download(f,l){return this.doDownload(f,l)}};return ar.GenericDifferentialDownloader=c,ar}var Wl;function Xo(){if(Wl)return Dt;Wl=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.NoOpLogger=Dt.AppUpdater=void 0;const n=Be(),c=Er,s=wt,f=zr,l=_t(),r=Bo(),e=Pd(),i=Pe,t=pc(),u=th(),o=nh(),d=ih(),a=mc(),p=zt(),v=uh(),g=qu,m=Ft(),_=dh();let R=class Ec extends f.EventEmitter{get channel(){return this._channel}set channel(T){if(this._channel!=null){if(typeof T!="string")throw(0,n.newError)(`Channel must be a string, but got: ${T}`,"ERR_UPDATER_INVALID_CHANNEL");if(T.length===0)throw(0,n.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=T,this.allowDowngrade=!0}addAuthHeader(T){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:T})}get netSession(){return(0,d.getNetSession)()}get logger(){return this._logger}set logger(T){this._logger=T??new P}set updateConfigPath(T){this.clientPromise=null,this._appUpdateConfigPath=T,this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig())}constructor(T,S){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new p.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new e.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",M=>{this._logger.error(`Error: ${M.stack||M.message}`)}),S==null?(this.app=new o.ElectronAppAdapter,this.httpExecutor=new d.ElectronHttpExecutor((M,$)=>this.emit("login",M,$))):(this.app=S,this.httpExecutor=null);const b=this.app.version,E=(0,t.parse)(b);if(E==null)throw(0,n.newError)(`App version is not a valid semver version: "${b}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=E,this.allowPrerelease=O(E),T!=null&&(this.setFeedURL(T),typeof T!="string"&&T.requestHeaders&&(this.requestHeaders=T.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(T){const S=this.createProviderRuntimeOptions();let b;typeof T=="string"?b=new a.GenericProvider({provider:"generic",url:T},this,{...S,isUseMultipleRangeRequest:(0,v.isUrlProbablySupportMultiRangeRequests)(T)}):b=(0,v.createClient)(T,this,S),this.clientPromise=Promise.resolve(b)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let T=this.checkForUpdatesPromise;if(T!=null)return this._logger.info("Checking for update (already in progress)"),T;const S=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),T=this.doCheckForUpdates().then(b=>(S(),b)).catch(b=>{throw S(),this.emit("error",b,`Cannot check for updates: ${(b.stack||b).toString()}`),b}),this.checkForUpdatesPromise=T,T}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(T){return this.checkForUpdates().then(S=>S!=null&&S.downloadPromise?(S.downloadPromise.then(()=>{const b=Ec.formatDownloadNotification(S.updateInfo.version,this.app.name,T);new ce.Notification(b).show()}),S):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),S))}static formatDownloadNotification(T,S,b){return b==null&&(b={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),b={title:b.title.replace("{appName}",S).replace("{version}",T),body:b.body.replace("{appName}",S).replace("{version}",T)},b}async isStagingMatch(T){const S=T.stagingPercentage;let b=S;if(b==null)return!0;if(b=parseInt(b,10),isNaN(b))return this._logger.warn(`Staging percentage is NaN: ${S}`),!0;b=b/100;const E=await this.stagingUserIdPromise.value,$=n.UUID.parse(E).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${b}, percentage: ${$}, user id: ${E}`),$<b}computeFinalHeaders(T){return this.requestHeaders!=null&&Object.assign(T,this.requestHeaders),T}async isUpdateAvailable(T){const S=(0,t.parse)(T.version);if(S==null)throw(0,n.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${T.version}"`,"ERR_UPDATER_INVALID_VERSION");const b=this.currentVersion;if((0,t.eq)(S,b))return!1;const E=T==null?void 0:T.minimumSystemVersion,M=(0,s.release)();if(E)try{if((0,t.lt)(M,E))return this._logger.info(`Current OS version ${M} is less than the minimum OS version required ${E} for version ${M}`),!1}catch(I){this._logger.warn(`Failed to compare current OS version(${M}) with minimum OS version(${E}): ${(I.message||I).toString()}`)}if(!await this.isStagingMatch(T))return!1;const x=(0,t.gt)(S,b),q=(0,t.lt)(S,b);return x?!0:this.allowDowngrade&&q}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(b=>(0,v.createClient)(b,this,this.createProviderRuntimeOptions())));const T=await this.clientPromise,S=await this.stagingUserIdPromise.value;return T.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":S})),{info:await T.getLatestVersion(),provider:T}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const T=await this.getUpdateInfoAndProvider(),S=T.info;if(!await this.isUpdateAvailable(S))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${S.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",S),{versionInfo:S,updateInfo:S};this.updateInfoAndProvider=T,this.onUpdateAvailable(S);const b=new n.CancellationToken;return{versionInfo:S,updateInfo:S,cancellationToken:b,downloadPromise:this.autoDownload?this.downloadUpdate(b):null}}onUpdateAvailable(T){this._logger.info(`Found version ${T.version} (url: ${(0,n.asArray)(T.files).map(S=>S.url).join(", ")})`),this.emit("update-available",T)}downloadUpdate(T=new n.CancellationToken){const S=this.updateInfoAndProvider;if(S==null){const E=new Error("Please check update first");return this.dispatchError(E),Promise.reject(E)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,n.asArray)(S.info.files).map(E=>E.url).join(", ")}`);const b=E=>{if(!(E instanceof n.CancellationError))try{this.dispatchError(E)}catch(M){this._logger.warn(`Cannot dispatch error event: ${M.stack||M}`)}return E};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:S,requestHeaders:this.computeRequestHeaders(S.provider),cancellationToken:T,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(E=>{throw b(E)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(T){this.emit("error",T,(T.stack||T).toString())}dispatchUpdateDownloaded(T){this.emit(p.UPDATE_DOWNLOADED,T)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,r.load)(await(0,l.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(T){const S=T.fileExtraDownloadHeaders;if(S!=null){const b=this.requestHeaders;return b==null?S:{...S,...b}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const T=i.join(this.app.userDataPath,".updaterId");try{const b=await(0,l.readFile)(T,"utf-8");if(n.UUID.check(b))return b;this._logger.warn(`Staging user id file exists, but content was invalid: ${b}`)}catch(b){b.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${b}`)}const S=n.UUID.v5((0,c.randomBytes)(4096),n.UUID.OID);this._logger.info(`Generated new staging user ID: ${S}`);try{await(0,l.outputFile)(T,S)}catch(b){this._logger.warn(`Couldn't write out staging user ID: ${b}`)}return S}get isAddNoCacheQuery(){const T=this.requestHeaders;if(T==null)return!0;for(const S of Object.keys(T)){const b=S.toLowerCase();if(b==="authorization"||b==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let T=this.downloadedUpdateHelper;if(T==null){const S=(await this.configOnDisk.value).updaterCacheDirName,b=this._logger;S==null&&b.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const E=i.join(this.app.baseCachePath,S||this.app.name);b.debug!=null&&b.debug(`updater cache dir: ${E}`),T=new u.DownloadedUpdateHelper(E),this.downloadedUpdateHelper=T}return T}async executeDownload(T){const S=T.fileInfo,b={headers:T.downloadUpdateOptions.requestHeaders,cancellationToken:T.downloadUpdateOptions.cancellationToken,sha2:S.info.sha2,sha512:S.info.sha512};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(b.onProgress=ie=>this.emit(p.DOWNLOAD_PROGRESS,ie));const E=T.downloadUpdateOptions.updateInfoAndProvider.info,M=E.version,$=S.packageInfo;function x(){const ie=decodeURIComponent(T.fileInfo.url.pathname);return ie.endsWith(`.${T.fileExtension}`)?i.basename(ie):T.fileInfo.info.url}const q=await this.getOrCreateDownloadHelper(),I=q.cacheDirForPendingUpdate;await(0,l.mkdir)(I,{recursive:!0});const D=x();let F=i.join(I,D);const k=$==null?null:i.join(I,`package-${M}${i.extname($.path)||".7z"}`),K=async ie=>(await q.setDownloadedFile(F,k,E,S,D,ie),await T.done({...E,downloadedFile:F}),k==null?[F]:[F,k]),W=this._logger,ne=await q.validateDownloadedPath(F,E,S,W);if(ne!=null)return F=ne,await K(!1);const fe=async()=>(await q.clear().catch(()=>{}),await(0,l.unlink)(F).catch(()=>{})),ue=await(0,u.createTempUpdateFile)(`temp-${D}`,I,W);try{await T.task(ue,b,k,fe),await(0,n.retry)(()=>(0,l.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await fe(),ie instanceof n.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",E)),ie}return W.info(`New version ${M} has been downloaded to ${F}`),await K(!0)}async differentialDownloadInstaller(T,S,b,E,M){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const $=(0,m.blockmapFiles)(T.url,this.app.version,S.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${$[0]}", new: ${$[1]})`);const x=async D=>{const F=await this.httpExecutor.downloadToBuffer(D,{headers:S.requestHeaders,cancellationToken:S.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${D.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(F).toString())}catch(k){throw new Error(`Cannot parse blockmap "${D.href}", error: ${k}`)}},q={newUrl:T.url,oldFile:i.join(this.downloadedUpdateHelper.cacheDir,M),logger:this._logger,newFile:b,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,requestHeaders:S.requestHeaders,cancellationToken:S.cancellationToken};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(q.onProgress=D=>this.emit(p.DOWNLOAD_PROGRESS,D));const I=await Promise.all($.map(D=>x(D)));return await new _.GenericDifferentialDownloader(T.info,this.httpExecutor,q).download(I[0],I[1]),!1}catch($){if(this._logger.error(`Cannot download differentially, fallback to full download: ${$.stack||$}`),this._testOnlyOptions!=null)throw $;return!0}}};Dt.AppUpdater=R;function O(U){const T=(0,t.prerelease)(U);return T!=null&&T.length>0}class P{info(T){}warn(T){}error(T){}}return Dt.NoOpLogger=P,Dt}var zl;function Tr(){if(zl)return Qt;zl=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.BaseUpdater=void 0;const n=_r,c=Xo();let s=class extends c.AppUpdater{constructor(l,r){super(l,r),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(l=!1,r=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(l,l?r:this.autoRunAppAfterInstall)?setImmediate(()=>{ce.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(l){return super.executeDownload({...l,done:r=>(this.dispatchUpdateDownloaded(r),this.addQuitHandler(),Promise.resolve())})}install(l=!1,r=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const e=this.downloadedUpdateHelper,i=e&&e.file?process.platform==="linux"?e.file.replace(/ /g,"\\ "):e.file:null,t=e==null?null:e.downloadedFileInfo;if(i==null||t==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${l}, isForceRunAfter: ${r}`),this.doInstall({installerPath:i,isSilent:l,isForceRunAfter:r,isAdminRightsRequired:t.isAdminRightsRequired})}catch(u){return this.dispatchError(u),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(l=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(l!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${l}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:l}=this.app,r=`"${l} would like to update"`,e=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),i=[e];return/kdesudo/i.test(e)?(i.push("--comment",r),i.push("-c")):/gksudo/i.test(e)?i.push("--message",r):/pkexec/i.test(e)&&i.push("--disable-internal-agent"),i.join(" ")}spawnSyncLog(l,r=[],e={}){return this._logger.info(`Executing: ${l} with args: ${r}`),(0,n.spawnSync)(l,r,{env:{...process.env,...e},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(l,r=[],e=void 0,i="ignore"){return this._logger.info(`Executing: ${l} with args: ${r}`),new Promise((t,u)=>{try{const o={stdio:i,env:e,detached:!0},d=(0,n.spawn)(l,r,o);d.on("error",a=>{u(a)}),d.unref(),d.pid!==void 0&&t(!0)}catch(o){u(o)}})}};return Qt.BaseUpdater=s,Qt}var cr={},fr={},Vl;function wc(){if(Vl)return fr;Vl=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const n=_t(),c=yc(),s=qu;let f=class extends c.DifferentialDownloader{async download(){const i=this.blockAwareFileInfo,t=i.size,u=t-(i.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(u,t-1);const o=l(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await r(this.options.oldFile),o)}};fr.FileWithEmbeddedBlockMapDifferentialDownloader=f;function l(e){return JSON.parse((0,s.inflateRawSync)(e).toString())}async function r(e){const i=await(0,n.open)(e,"r");try{const t=(await(0,n.fstat)(i)).size,u=Buffer.allocUnsafe(4);await(0,n.read)(i,u,0,u.length,t-u.length);const o=Buffer.allocUnsafe(u.readUInt32BE(0));return await(0,n.read)(i,o,0,o.length,t-u.length-o.length),await(0,n.close)(i),l(o)}catch(t){throw await(0,n.close)(i),t}}return fr}var Yl;function Xl(){if(Yl)return cr;Yl=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.AppImageUpdater=void 0;const n=Be(),c=_r,s=_t(),f=Ye,l=Pe,r=Tr(),e=wc(),i=zt(),t=st();let u=class extends r.BaseUpdater{constructor(d,a){super(d,a)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(d){const a=d.updateInfoAndProvider.provider,p=(0,t.findFile)(a.resolveFiles(d.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:d,task:async(v,g)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,n.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let _=!1;try{const R={newUrl:p.url,oldFile:m,logger:this._logger,newFile:v,isUseMultipleRangeRequest:a.isUseMultipleRangeRequest,requestHeaders:d.requestHeaders,cancellationToken:d.cancellationToken};this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(R.onProgress=O=>this.emit(i.DOWNLOAD_PROGRESS,O)),await new e.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,R).download()}catch(R){this._logger.error(`Cannot download differentially, fallback to full download: ${R.stack||R}`),_=process.platform==="linux"}_&&await this.httpExecutor.download(p.url,v,g),await(0,s.chmod)(v,493)}})}doInstall(d){const a=process.env.APPIMAGE;if(a==null)throw(0,n.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,f.unlinkSync)(a);let p;const v=l.basename(a);l.basename(d.installerPath)===v||!/\d+\.\d+\.\d+/.test(v)?p=a:p=l.join(l.dirname(a),l.basename(d.installerPath)),(0,c.execFileSync)("mv",["-f",d.installerPath,p]),p!==a&&this.emit("appimage-filename-updated",p);const g={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return d.isForceRunAfter?this.spawnLog(p,[],g):(g.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,c.execFileSync)(p,[],{env:g})),!0}};return cr.AppImageUpdater=u,cr}var dr={},Jl;function Kl(){if(Jl)return dr;Jl=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.DebUpdater=void 0;const n=Tr(),c=zt(),s=st();let f=class extends n.BaseUpdater{constructor(r,e){super(r,e)}doDownloadUpdate(r){const e=r.updateInfoAndProvider.provider,i=(0,s.findFile)(e.resolveFiles(r.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:i,downloadUpdateOptions:r,task:async(t,u)=>{this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(u.onProgress=o=>this.emit(c.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,t,u)}})}doInstall(r){const e=this.wrapSudo(),i=/pkexec/i.test(e)?"":'"',t=["dpkg","-i",r.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(e,[`${i}/bin/bash`,"-c",`'${t.join(" ")}'${i}`]),r.isForceRunAfter&&this.app.relaunch(),!0}};return dr.DebUpdater=f,dr}var hr={},Ql;function Zl(){if(Ql)return hr;Ql=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.RpmUpdater=void 0;const n=Tr(),c=zt(),s=st();let f=class extends n.BaseUpdater{constructor(r,e){super(r,e)}doDownloadUpdate(r){const e=r.updateInfoAndProvider.provider,i=(0,s.findFile)(e.resolveFiles(r.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:i,downloadUpdateOptions:r,task:async(t,u)=>{this.listenerCount(c.DOWNLOAD_PROGRESS)>0&&(u.onProgress=o=>this.emit(c.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,t,u)}})}doInstall(r){const e=r.installerPath,i=this.wrapSudo(),t=/pkexec/i.test(i)?"":'"',u=this.spawnSyncLog("which zypper");let o;return u?o=[u,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",e]:o=[this.spawnSyncLog("which dnf || which yum"),"-y","install",e],this.spawnSyncLog(i,[`${t}/bin/bash`,"-c",`'${o.join(" ")}'${t}`]),r.isForceRunAfter&&this.app.relaunch(),!0}};return hr.RpmUpdater=f,hr}var pr={},eu;function tu(){if(eu)return pr;eu=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.MacUpdater=void 0;const n=Be(),c=_t(),s=Ye,f=Pe,l=Mu,r=Xo(),e=st(),i=_r,t=Er;let u=class extends r.AppUpdater{constructor(d,a){super(d,a),this.nativeUpdater=ce.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(d){this._logger.debug!=null&&this._logger.debug(d)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(d=>{d&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(d){let a=d.updateInfoAndProvider.provider.resolveFiles(d.updateInfoAndProvider.info);const p=this._logger,v="sysctl.proc_translated";let g=!1;try{this.debug("Checking for macOS Rosetta environment"),g=(0,i.execFileSync)("sysctl",[v],{encoding:"utf8"}).includes(`${v}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${g})`)}catch(U){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${U}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const T=(0,i.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${T}`),m=m||T}catch(U){p.warn(`uname shell command to check for arm64 failed: ${U}`)}m=m||process.arch==="arm64"||g;const _=U=>{var T;return U.url.pathname.includes("arm64")||((T=U.info.url)===null||T===void 0?void 0:T.includes("arm64"))};m&&a.some(_)?a=a.filter(U=>m===_(U)):a=a.filter(U=>!_(U));const R=(0,e.findFile)(a,"zip",["pkg","dmg"]);if(R==null)throw(0,n.newError)(`ZIP file not provided: ${(0,n.safeStringifyJson)(a)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=d.updateInfoAndProvider.provider,P="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:R,downloadUpdateOptions:d,task:async(U,T)=>{const S=f.join(this.downloadedUpdateHelper.cacheDir,P),b=()=>(0,c.pathExistsSync)(S)?!d.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;b()&&(E=await this.differentialDownloadInstaller(R,d,U,O,P)),E&&await this.httpExecutor.download(R.url,U,T)},done:U=>{if(!d.disableDifferentialDownload)try{const T=f.join(this.downloadedUpdateHelper.cacheDir,P);(0,s.copyFileSync)(U.downloadedFile,T)}catch(T){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${T.message}`)}return this.updateDownloaded(R,U)}})}async updateDownloaded(d,a){var p;const v=a.downloadedFile,g=(p=d.info.size)!==null&&p!==void 0?p:(await(0,c.stat)(v)).size,m=this._logger,_=`fileToProxy=${d.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${_})`),this.server=(0,l.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${_})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${_})`)});const R=O=>{const P=O.address();return typeof P=="string"?P:`http://127.0.0.1:${P==null?void 0:P.port}`};return await new Promise((O,P)=>{const U=(0,t.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),T=Buffer.from(`autoupdater:${U}`,"ascii"),S=`/${(0,t.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(b,E)=>{const M=b.url;if(m.info(`${M} requested`),M==="/"){if(!b.headers.authorization||b.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),m.warn("No authenthication info");return}const q=b.headers.authorization.split(" ")[1],I=Buffer.from(q,"base64").toString("ascii"),[D,F]=I.split(":");if(D!=="autoupdater"||F!==U){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),m.warn("Invalid authenthication credentials");return}const k=Buffer.from(`{ "url": "${R(this.server)}${S}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":k.length}),E.end(k);return}if(!M.startsWith(S)){m.warn(`${M} requested, but not supported`),E.writeHead(404),E.end();return}m.info(`${S} requested by Squirrel.Mac, pipe ${v}`);let $=!1;E.on("finish",()=>{$||(this.nativeUpdater.removeListener("error",P),O([]))});const x=(0,s.createReadStream)(v);x.on("error",q=>{try{E.end()}catch(I){m.warn(`cannot end response: ${I}`)}$=!0,this.nativeUpdater.removeListener("error",P),P(new Error(`Cannot pipe "${v}": ${q}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":g}),x.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${_})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${R(this.server)}, ${_})`),this.nativeUpdater.setFeedURL({url:R(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${T.toString("base64")}`}}),this.dispatchUpdateDownloaded(a),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",P),this.nativeUpdater.checkForUpdates()):O([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return pr.MacUpdater=u,pr}var mr={},Gr={},ru;function hh(){if(ru)return Gr;ru=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.verifySignature=l;const n=Be(),c=_r,s=wt,f=Pe;function l(t,u,o){return new Promise((d,a)=>{const p=u.replace(/'/g,"''");o.info(`Verifying signature ${p}`),(0,c.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${p}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(v,g,m)=>{var _;try{if(v!=null||m){e(o,v,m,a),d(null);return}const R=r(g);if(R.Status===0){try{const T=f.normalize(R.Path),S=f.normalize(u);if(o.info(`LiteralPath: ${T}. Update Path: ${S}`),T!==S){e(o,new Error(`LiteralPath of ${T} is different than ${S}`),m,a),d(null);return}}catch(T){o.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(_=T.message)!==null&&_!==void 0?_:T.stack}`)}const P=(0,n.parseDn)(R.SignerCertificate.Subject);let U=!1;for(const T of t){const S=(0,n.parseDn)(T);if(S.size?U=Array.from(S.keys()).every(E=>S.get(E)===P.get(E)):T===P.get("CN")&&(o.warn(`Signature validated using only CN ${T}. Please add your full Distinguished Name (DN) to publisherNames configuration`),U=!0),U){d(null);return}}}const O=`publisherNames: ${t.join(" | ")}, raw info: `+JSON.stringify(R,(P,U)=>P==="RawData"?void 0:U,2);o.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),d(O)}catch(R){e(o,R,null,a),d(null);return}})})}function r(t){const u=JSON.parse(t);delete u.PrivateKey,delete u.IsOSBinary,delete u.SignatureType;const o=u.SignerCertificate;return o!=null&&(delete o.Archived,delete o.Extensions,delete o.Handle,delete o.HasPrivateKey,delete o.SubjectName),u}function e(t,u,o,d){if(i()){t.warn(`Cannot execute Get-AuthenticodeSignature: ${u||o}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,c.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(a){t.warn(`Cannot execute ConvertTo-Json: ${a.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}u!=null&&d(u),o&&d(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${o}. Failing signature validation due to unknown stderr.`))}function i(){const t=s.release();return t.startsWith("6.")&&!t.startsWith("6.3")}return Gr}var nu;function iu(){if(nu)return mr;nu=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.NsisUpdater=void 0;const n=Be(),c=Pe,s=Tr(),f=wc(),l=zt(),r=st(),e=_t(),i=hh(),t=jt;let u=class extends s.BaseUpdater{constructor(d,a){super(d,a),this._verifyUpdateCodeSignature=(p,v)=>(0,i.verifySignature)(p,v,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(d){d&&(this._verifyUpdateCodeSignature=d)}doDownloadUpdate(d){const a=d.updateInfoAndProvider.provider,p=(0,r.findFile)(a.resolveFiles(d.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:d,fileInfo:p,task:async(v,g,m,_)=>{const R=p.packageInfo,O=R!=null&&m!=null;if(O&&d.disableWebInstaller)throw(0,n.newError)(`Unable to download new version ${d.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!d.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||d.disableDifferentialDownload||await this.differentialDownloadInstaller(p,d,v,a,n.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,v,g);const P=await this.verifySignature(v);if(P!=null)throw await _(),(0,n.newError)(`New version ${d.updateInfoAndProvider.info.version} is not signed by the application owner: ${P}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(d,R,m,a))try{await this.httpExecutor.download(new t.URL(R.path),m,{headers:d.requestHeaders,cancellationToken:d.cancellationToken,sha512:R.sha512})}catch(U){try{await(0,e.unlink)(m)}catch{}throw U}}})}async verifySignature(d){let a;try{if(a=(await this.configOnDisk.value).publisherName,a==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(a)?a:[a],d)}doInstall(d){const a=["--updated"];d.isSilent&&a.push("/S"),d.isForceRunAfter&&a.push("--force-run"),this.installDirectory&&a.push(`/D=${this.installDirectory}`);const p=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;p!=null&&a.push(`--package-file=${p}`);const v=()=>{this.spawnLog(c.join(process.resourcesPath,"elevate.exe"),[d.installerPath].concat(a)).catch(g=>this.dispatchError(g))};return d.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),v(),!0):(this.spawnLog(d.installerPath,a).catch(g=>{const m=g.code;this._logger.info(`Cannot run installer: error code: ${m}, error message: "${g.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),m==="UNKNOWN"||m==="EACCES"?v():m==="ENOENT"?ce.shell.openPath(d.installerPath).catch(_=>this.dispatchError(_)):this.dispatchError(g)}),!0)}async differentialDownloadWebPackage(d,a,p,v){if(a.blockMapSize==null)return!0;try{const g={newUrl:new t.URL(a.path),oldFile:c.join(this.downloadedUpdateHelper.cacheDir,n.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:v.isUseMultipleRangeRequest,cancellationToken:d.cancellationToken};this.listenerCount(l.DOWNLOAD_PROGRESS)>0&&(g.onProgress=m=>this.emit(l.DOWNLOAD_PROGRESS,m)),await new f.FileWithEmbeddedBlockMapDifferentialDownloader(a,this.httpExecutor,g).download()}catch(g){return this._logger.error(`Cannot download differentially, fallback to full download: ${g.stack||g}`),process.platform==="win32"}return!1}};return mr.NsisUpdater=u,mr}var ou;function zt(){return ou||(ou=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.UpdaterSignal=n.UPDATE_DOWNLOADED=n.DOWNLOAD_PROGRESS=n.NsisUpdater=n.MacUpdater=n.RpmUpdater=n.DebUpdater=n.AppImageUpdater=n.Provider=n.CancellationToken=n.NoOpLogger=n.AppUpdater=n.BaseUpdater=void 0;const c=Be();Object.defineProperty(n,"CancellationToken",{enumerable:!0,get:function(){return c.CancellationToken}});const s=_t(),f=Pe;var l=Tr();Object.defineProperty(n,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var r=Xo();Object.defineProperty(n,"AppUpdater",{enumerable:!0,get:function(){return r.AppUpdater}}),Object.defineProperty(n,"NoOpLogger",{enumerable:!0,get:function(){return r.NoOpLogger}});var e=st();Object.defineProperty(n,"Provider",{enumerable:!0,get:function(){return e.Provider}});var i=Xl();Object.defineProperty(n,"AppImageUpdater",{enumerable:!0,get:function(){return i.AppImageUpdater}});var t=Kl();Object.defineProperty(n,"DebUpdater",{enumerable:!0,get:function(){return t.DebUpdater}});var u=Zl();Object.defineProperty(n,"RpmUpdater",{enumerable:!0,get:function(){return u.RpmUpdater}});var o=tu();Object.defineProperty(n,"MacUpdater",{enumerable:!0,get:function(){return o.MacUpdater}});var d=iu();Object.defineProperty(n,"NsisUpdater",{enumerable:!0,get:function(){return d.NsisUpdater}});let a;function p(){if(process.platform==="win32")a=new(iu()).NsisUpdater;else if(process.platform==="darwin")a=new(tu()).MacUpdater;else{a=new(Xl()).AppImageUpdater;try{const m=f.join(process.resourcesPath,"package-type");if(!(0,s.existsSync)(m))return a;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const _=(0,s.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",_),_){case"deb":a=new(Kl()).DebUpdater;break;case"rpm":a=new(Zl()).RpmUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return a}Object.defineProperty(n,"autoUpdater",{enumerable:!0,get:()=>a||p()}),n.DOWNLOAD_PROGRESS="download-progress",n.UPDATE_DOWNLOADED="update-downloaded";class v{constructor(_){this.emitter=_}login(_){g(this.emitter,"login",_)}progress(_){g(this.emitter,n.DOWNLOAD_PROGRESS,_)}updateDownloaded(_){g(this.emitter,n.UPDATE_DOWNLOADED,_)}updateCancelled(_){g(this.emitter,"update-cancelled",_)}}n.UpdaterSignal=v;function g(m,_,R){m.on(_,R)}}(an)),an}var Ke=zt(),gr={exports:{}},oo={exports:{}},au;function _c(){return au||(au=1,function(n){let c={};try{c=require("electron")}catch{}c.ipcRenderer&&s(c),n.exports=s;function s({contextBridge:f,ipcRenderer:l}){if(!l)return;l.on("__ELECTRON_LOG_IPC__",(e,i)=>{window.postMessage({cmd:"message",...i})}),l.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(e=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${e.message}`)));const r={sendToMain(e){try{l.send("__ELECTRON_LOG__",e)}catch(i){console.error("electronLog.sendToMain ",i,"data:",e),l.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:i==null?void 0:i.message,stack:i==null?void 0:i.stack},errorName:"sendToMain"})}},log(...e){r.sendToMain({data:e,level:"info"})}};for(const e of["error","warn","info","verbose","debug","silly"])r[e]=(...i)=>r.sendToMain({data:i,level:e});if(f&&process.contextIsolated)try{f.exposeInMainWorld("__electronLog",r)}catch{}typeof window=="object"?window.__electronLog=r:__electronLog=r}}(oo)),oo.exports}var ao={exports:{}},so,su;function ph(){if(su)return so;su=1,so=n;function n(c){return Object.defineProperties(s,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof s.labelPadding){case"boolean":return s.labelPadding?s.maxLabelLength:0;case"number":return s.labelPadding;default:return 0}}}});function s(f){s.maxLabelLength=Math.max(s.maxLabelLength,f.length);const l={};for(const r of c.levels)l[r]=(...e)=>c.logData(e,{level:r,scope:f});return l.log=l.info,l}}return so}var lo,lu;function mh(){if(lu)return lo;lu=1;class n{constructor({processMessage:s}){this.processMessage=s,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(s){this.buffer.push(s)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(s=>this.processMessage(s)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return lo=n,lo}var uo,uu;function Sc(){if(uu)return uo;uu=1;const n=ph(),c=mh(),f=class f{constructor({allowUnknownLevel:r=!1,dependencies:e={},errorHandler:i,eventLogger:t,initializeFn:u,isDev:o=!1,levels:d=["error","warn","info","verbose","debug","silly"],logId:a,transportFactories:p={},variables:v}={}){Te(this,"dependencies",{});Te(this,"errorHandler",null);Te(this,"eventLogger",null);Te(this,"functions",{});Te(this,"hooks",[]);Te(this,"isDev",!1);Te(this,"levels",null);Te(this,"logId",null);Te(this,"scope",null);Te(this,"transports",{});Te(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=r,this.buffering=new c(this),this.dependencies=e,this.initializeFn=u,this.isDev=o,this.levels=d,this.logId=a,this.scope=n(this),this.transportFactories=p,this.variables=v||{};for(const g of this.levels)this.addLevel(g,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=i,i==null||i.setOptions({...e,logFn:this.error}),this.eventLogger=t,t==null||t.setOptions({...e,logger:this});for(const[g,m]of Object.entries(p))this.transports[g]=m(this,e);f.instances[a]=this}static getInstance({logId:r}){return this.instances[r]||this.instances.default}addLevel(r,e=this.levels.length){e!==!1&&this.levels.splice(e,0,r),this[r]=(...i)=>this.logData(i,{level:r}),this.functions[r]=this[r]}catchErrors(r){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(r)}create(r){return typeof r=="string"&&(r={logId:r}),new f({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...r})}compareLevels(r,e,i=this.levels){const t=i.indexOf(r),u=i.indexOf(e);return u===-1||t===-1?!0:u<=t}initialize(r={}){this.initializeFn({logger:this,...this.dependencies,...r})}logData(r,e={}){this.buffering.enabled?this.buffering.addMessage({data:r,...e}):this.processMessage({data:r,...e})}processMessage(r,{transports:e=this.transports}={}){if(r.cmd==="errorHandler"){this.errorHandler.handle(r.error,{errorName:r.errorName,processType:"renderer",showDialog:!!r.showDialog});return}let i=r.level;this.allowUnknownLevel||(i=this.levels.includes(r.level)?r.level:"info");const t={date:new Date,logId:this.logId,...r,level:i,variables:{...this.variables,...r.variables}};for(const[u,o]of this.transportEntries(e))if(!(typeof o!="function"||o.level===!1)&&this.compareLevels(o.level,r.level))try{const d=this.hooks.reduce((a,p)=>a&&p(a,o,u),t);d&&o({...d,data:[...d.data]})}catch(d){this.processInternalErrorFn(d)}}processInternalErrorFn(r){}transportEntries(r=this.transports){return(Array.isArray(r)?r:Object.entries(r)).map(i=>{switch(typeof i){case"string":return this.transports[i]?[i,this.transports[i]]:null;case"function":return[i.name,i];default:return Array.isArray(i)?i:null}}).filter(Boolean)}};Te(f,"instances",{});let s=f;return uo=s,uo}var co,cu;function gh(){if(cu)return co;cu=1;const n=console.error;class c{constructor({logFn:f=null}={}){Te(this,"logFn",null);Te(this,"onError",null);Te(this,"showDialog",!1);Te(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=f}handle(f,{logFn:l=this.logFn,errorName:r="",onError:e=this.onError,showDialog:i=this.showDialog}={}){try{(e==null?void 0:e({error:f,errorName:r,processType:"renderer"}))!==!1&&l({error:f,errorName:r,showDialog:i})}catch{n(f)}}setOptions({logFn:f,onError:l,preventDefault:r,showDialog:e}){typeof f=="function"&&(this.logFn=f),typeof l=="function"&&(this.onError=l),typeof r=="boolean"&&(this.preventDefault=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:f,showDialog:l}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:f,showDialog:l}),window.addEventListener("error",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleError(r.error||r)}),window.addEventListener("unhandledrejection",r=>{var e;this.preventDefault&&((e=r.preventDefault)==null||e.call(r)),this.handleRejection(r.reason||r)}))}handleError(f){this.handle(f,{errorName:"Unhandled"})}handleRejection(f){const l=f instanceof Error?f:new Error(JSON.stringify(f));this.handle(l,{errorName:"Unhandled rejection"})}}return co=c,co}var fo,fu;function Lt(){if(fu)return fo;fu=1,fo={transform:n};function n({logger:c,message:s,transport:f,initialData:l=(s==null?void 0:s.data)||[],transforms:r=f==null?void 0:f.transforms}){return r.reduce((e,i)=>typeof i=="function"?i({data:e,logger:c,message:s,transport:f}):e,l)}return fo}var ho,du;function vh(){if(du)return ho;du=1;const{transform:n}=Lt();ho=s;const c={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function s(l){return Object.assign(r,{format:"{h}:{i}:{s}.{ms}{scope} › {text}",transforms:[f],writeFn({message:{level:e,data:i}}){const t=c[e]||c.info;setTimeout(()=>t(...i))}});function r(e){r.writeFn({message:{...e,data:n({logger:l,message:e,transport:r})}})}}function f({data:l=[],logger:r={},message:e={},transport:i={}}){if(typeof i.format=="function")return i.format({data:l,level:(e==null?void 0:e.level)||"info",logger:r,message:e,transport:i});if(typeof i.format!="string")return l;l.unshift(i.format),typeof l[1]=="string"&&l[1].match(/%[1cdfiOos]/)&&(l=[`${l[0]} ${l[1]}`,...l.slice(2)]);const t=e.date||new Date;return l[0]=l[0].replace(/\{(\w+)}/g,(u,o)=>{var d,a;switch(o){case"level":return e.level;case"logId":return e.logId;case"scope":{const p=e.scope||((d=r.scope)==null?void 0:d.defaultLabel);return p?` (${p})`:""}case"text":return"";case"y":return t.getFullYear().toString(10);case"m":return(t.getMonth()+1).toString(10).padStart(2,"0");case"d":return t.getDate().toString(10).padStart(2,"0");case"h":return t.getHours().toString(10).padStart(2,"0");case"i":return t.getMinutes().toString(10).padStart(2,"0");case"s":return t.getSeconds().toString(10).padStart(2,"0");case"ms":return t.getMilliseconds().toString(10).padStart(3,"0");case"iso":return t.toISOString();default:return((a=e.variables)==null?void 0:a[o])||u}}).trim(),l}return ho}var po,hu;function yh(){if(hu)return po;hu=1;const{transform:n}=Lt();po=s;const c=new Set([Promise,WeakMap,WeakSet]);function s(r){return Object.assign(e,{depth:5,transforms:[l]});function e(i){if(!window.__electronLog){r.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const t=n({initialData:i,logger:r,message:i,transport:e});__electronLog.sendToMain(t)}catch(t){r.transports.console({data:["electronLog.transports.ipc",t,"data:",i.data],level:"error"})}}}function f(r){return Object(r)!==r}function l({data:r,depth:e,seen:i=new WeakSet,transport:t={}}={}){const u=e||t.depth||5;return i.has(r)?"[Circular]":u<1?f(r)?r:Array.isArray(r)?"[Array]":`[${typeof r}]`:["function","symbol"].includes(typeof r)?r.toString():f(r)?r:c.has(r.constructor)?`[${r.constructor.name}]`:Array.isArray(r)?r.map(o=>l({data:o,depth:u-1,seen:i})):r instanceof Date?r.toISOString():r instanceof Error?r.stack:r instanceof Map?new Map(Array.from(r).map(([o,d])=>[l({data:o,depth:u-1,seen:i}),l({data:d,depth:u-1,seen:i})])):r instanceof Set?new Set(Array.from(r).map(o=>l({data:o,depth:u-1,seen:i}))):(i.add(r),Object.fromEntries(Object.entries(r).map(([o,d])=>[o,l({data:d,depth:u-1,seen:i})])))}return po}var pu;function Eh(){return pu||(pu=1,function(n){const c=Sc(),s=gh(),f=vh(),l=yh();n.exports=r(),n.exports.Logger=c,n.exports.default=n.exports;function r(){const e=new c({allowUnknownLevel:!0,errorHandler:new s,initializeFn:()=>{},logId:"default",transportFactories:{console:f,ipc:l},variables:{processType:"renderer"}});return e.errorHandler.setOptions({logFn({error:i,errorName:t,showDialog:u}){e.transports.console({data:[t,i].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:i==null?void 0:i.cause,code:i==null?void 0:i.code,name:i==null?void 0:i.name,message:i==null?void 0:i.message,stack:i==null?void 0:i.stack},errorName:t,logId:e.logId,showDialog:u})}}),typeof window=="object"&&window.addEventListener("message",i=>{const{cmd:t,logId:u,...o}=i.data||{},d=c.getInstance({logId:u});t==="message"&&d.processMessage(o,{transports:["console"]})}),new Proxy(e,{get(i,t){return typeof i[t]<"u"?i[t]:(...u)=>e.logData(u,{level:t})}})}}(ao)),ao.exports}var mo,mu;function wh(){if(mu)return mo;mu=1;const n=Ye,c=Pe;mo={findAndReadPackageJson:s,tryReadJsonAt:f};function s(){return f(e())||f(r())||f(process.resourcesPath,"app.asar")||f(process.resourcesPath,"app")||f(process.cwd())||{name:void 0,version:void 0}}function f(...i){if(i[0])try{const t=c.join(...i),u=l("package.json",t);if(!u)return;const o=JSON.parse(n.readFileSync(u,"utf8")),d=(o==null?void 0:o.productName)||(o==null?void 0:o.name);return!d||d.toLowerCase()==="electron"?void 0:d?{name:d,version:o==null?void 0:o.version}:void 0}catch{return}}function l(i,t){let u=t;for(;;){const o=c.parse(u),d=o.root,a=o.dir;if(n.existsSync(c.join(u,i)))return c.resolve(c.join(u,i));if(u===d)return null;u=a}}function r(){const i=process.argv.filter(u=>u.indexOf("--user-data-dir=")===0);return i.length===0||typeof i[0]!="string"?null:i[0].replace("--user-data-dir=","")}function e(){var i;try{return(i=require.main)==null?void 0:i.filename}catch{return}}return mo}var go,gu;function Ac(){if(gu)return go;gu=1;const n=_r,c=wt,s=Pe,f=wh();class l{constructor(){Te(this,"appName");Te(this,"appPackageJson");Te(this,"platform",process.platform)}getAppLogPath(e=this.getAppName()){return this.platform==="darwin"?s.join(this.getSystemPathHome(),"Library/Logs",e):s.join(this.getAppUserDataPath(e),"logs")}getAppName(){var i;const e=this.appName||((i=this.getAppPackageJson())==null?void 0:i.name);if(!e)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return e}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=f.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(e=this.getAppName()){return e?s.join(this.getSystemPathAppData(),e):void 0}getAppVersion(){var e;return(e=this.getAppPackageJson())==null?void 0:e.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const e=Number(c.release().split(".")[0]);return e<=19?`10.${e-4}`:e-9}getOsVersion(){let e=c.type().replace("_"," "),i=c.release();return e==="Darwin"&&(e="macOS",i=this.getMacOsVersion()),`${e} ${i}`}getPathVariables(){const e=this.getAppName(),i=this.getAppVersion(),t=this;return{appData:this.getSystemPathAppData(),appName:e,appVersion:i,get electronDefaultDir(){return t.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(e),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(e)}}getSystemPathAppData(){const e=this.getSystemPathHome();switch(this.platform){case"darwin":return s.join(e,"Library/Application Support");case"win32":return process.env.APPDATA||s.join(e,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||s.join(e,".config")}}getSystemPathHome(){var e;return((e=c.homedir)==null?void 0:e.call(c))||process.env.HOME}getSystemPathTemp(){return c.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(e,i){}onAppReady(e){e()}onEveryWebContentsEvent(e,i){}onIpc(e,i){}onIpcInvoke(e,i){}openUrl(e,i=console.error){const u={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";n.exec(`${u} ${e}`,{},o=>{o&&i(o)})}setAppName(e){this.appName=e}setPlatform(e){this.platform=e}setPreloadFileForSessions({filePath:e,includeFutureSession:i=!0,getSessions:t=()=>[]}){}sendIpc(e,i){}showErrorBox(e,i){}}return go=l,go}var vo,vu;function _h(){if(vu)return vo;vu=1;const n=Pe,c=Ac();class s extends c{constructor({electron:r}={}){super();Te(this,"electron");this.electron=r}getAppName(){var e,i;let r;try{r=this.appName||((e=this.electron.app)==null?void 0:e.name)||((i=this.electron.app)==null?void 0:i.getName())}catch{}return r||super.getAppName()}getAppUserDataPath(r){return this.getPath("userData")||super.getAppUserDataPath(r)}getAppVersion(){var e;let r;try{r=(e=this.electron.app)==null?void 0:e.getVersion()}catch{}return r||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(r){var e;try{return(e=this.electron.app)==null?void 0:e.getPath(r)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var r;return((r=this.electron.app)==null?void 0:r.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?n.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(r,e){var i;return(i=this.electron.app)==null||i.on(r,e),()=>{var t;(t=this.electron.app)==null||t.off(r,e)}}onAppReady(r){var e,i,t;(e=this.electron.app)!=null&&e.isReady()?r():(i=this.electron.app)!=null&&i.once?(t=this.electron.app)==null||t.once("ready",r):r()}onEveryWebContentsEvent(r,e){var t,u,o;return(u=(t=this.electron.webContents)==null?void 0:t.getAllWebContents())==null||u.forEach(d=>{d.on(r,e)}),(o=this.electron.app)==null||o.on("web-contents-created",i),()=>{var d,a;(d=this.electron.webContents)==null||d.getAllWebContents().forEach(p=>{p.off(r,e)}),(a=this.electron.app)==null||a.off("web-contents-created",i)};function i(d,a){a.on(r,e)}}onIpc(r,e){var i;(i=this.electron.ipcMain)==null||i.on(r,e)}onIpcInvoke(r,e){var i,t;(t=(i=this.electron.ipcMain)==null?void 0:i.handle)==null||t.call(i,r,e)}openUrl(r,e=console.error){var i;(i=this.electron.shell)==null||i.openExternal(r).catch(e)}setPreloadFileForSessions({filePath:r,includeFutureSession:e=!0,getSessions:i=()=>{var t;return[(t=this.electron.session)==null?void 0:t.defaultSession]}}){for(const u of i().filter(Boolean))t(u);e&&this.onAppEvent("session-created",u=>{t(u)});function t(u){typeof u.registerPreloadScript=="function"?u.registerPreloadScript({filePath:r,id:"electron-log-preload",type:"frame"}):u.setPreloads([...u.getPreloads(),r])}}sendIpc(r,e){var i,t;(t=(i=this.electron.BrowserWindow)==null?void 0:i.getAllWindows())==null||t.forEach(u=>{var o,d;((o=u.webContents)==null?void 0:o.isDestroyed())===!1&&((d=u.webContents)==null?void 0:d.isCrashed())===!1&&u.webContents.send(r,e)})}showErrorBox(r,e){var i;(i=this.electron.dialog)==null||i.showErrorBox(r,e)}}return vo=s,vo}var yo,yu;function Sh(){if(yu)return yo;yu=1;const n=Ye,c=wt,s=Pe,f=_c();yo={initialize({externalApi:e,getSessions:i,includeFutureSession:t,logger:u,preload:o=!0,spyRendererConsole:d=!1}){e.onAppReady(()=>{try{o&&l({externalApi:e,getSessions:i,includeFutureSession:t,preloadOption:o}),d&&r({externalApi:e,logger:u})}catch(a){u.warn(a)}})}};function l({externalApi:e,getSessions:i,includeFutureSession:t,preloadOption:u}){let o=typeof u=="string"?u:void 0;try{o=s.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!o||!n.existsSync(o)){o=s.join(e.getAppUserDataPath()||c.tmpdir(),"electron-log-preload.js");const d=`
      try {
        (${f.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;n.writeFileSync(o,d,"utf8")}e.setPreloadFileForSessions({filePath:o,includeFutureSession:t,getSessions:i})}function r({externalApi:e,logger:i}){const t=["verbose","info","warning","error"];e.onEveryWebContentsEvent("console-message",(u,o,d)=>{i.processMessage({data:[d],level:t[o],variables:{processType:"renderer"}})})}return yo}var Eo,Eu;function Ah(){if(Eu)return Eo;Eu=1;class n{constructor({externalApi:f,logFn:l=void 0,onError:r=void 0,showDialog:e=void 0}={}){Te(this,"externalApi");Te(this,"isActive",!1);Te(this,"logFn");Te(this,"onError");Te(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:f,logFn:l,onError:r,showDialog:e}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(f,{logFn:l=this.logFn,onError:r=this.onError,processType:e="browser",showDialog:i=this.showDialog,errorName:t=""}={}){var u;f=c(f);try{if(typeof r=="function"){const o=((u=this.externalApi)==null?void 0:u.getVersions())||{},d=this.createIssue;if(r({createIssue:d,error:f,errorName:t,processType:e,versions:o})===!1)return}t?l(t,f):l(f),i&&!t.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${e} process`,f.stack)}catch{console.error(f)}}setOptions({externalApi:f,logFn:l,onError:r,showDialog:e}){typeof f=="object"&&(this.externalApi=f),typeof l=="function"&&(this.logFn=l),typeof r=="function"&&(this.onError=r),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:f,showDialog:l}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:f,showDialog:l}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(f,l){var r;(r=this.externalApi)==null||r.openUrl(`${f}?${new URLSearchParams(l).toString()}`)}handleError(f){this.handle(f,{errorName:"Unhandled"})}handleRejection(f){const l=f instanceof Error?f:new Error(JSON.stringify(f));this.handle(l,{errorName:"Unhandled rejection"})}}function c(s){if(s instanceof Error)return s;if(s&&typeof s=="object"){if(s.message)return Object.assign(new Error(s.message),s);try{return new Error(JSON.stringify(s))}catch(f){return new Error(`Couldn't normalize error ${String(s)}: ${f}`)}}return new Error(`Can't normalize error ${String(s)}`)}return Eo=n,Eo}var wo,wu;function bh(){if(wu)return wo;wu=1;class n{constructor(s={}){Te(this,"disposers",[]);Te(this,"format","{eventSource}#{eventName}:");Te(this,"formatters",{app:{"certificate-error":({args:s})=>this.arrayToObject(s.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:s})=>s.length===1?s[0]:s,"render-process-gone":({args:[s,f]})=>f&&typeof f=="object"?{...f,...this.getWebContentsDetails(s)}:[]},webContents:{"console-message":({args:[s,f,l,r]})=>{if(!(s<3))return{message:f,source:`${r}:${l}`}},"did-fail-load":({args:s})=>this.arrayToObject(s,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:s})=>this.arrayToObject(s,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:s})=>this.arrayToObject(s,["name","version"]),"preload-error":({args:s})=>this.arrayToObject(s,["preloadPath","error"])}});Te(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});Te(this,"externalApi");Te(this,"level","error");Te(this,"scope","");this.setOptions(s)}setOptions({events:s,externalApi:f,level:l,logger:r,format:e,formatters:i,scope:t}){typeof s=="object"&&(this.events=s),typeof f=="object"&&(this.externalApi=f),typeof l=="string"&&(this.level=l),typeof r=="object"&&(this.logger=r),(typeof e=="string"||typeof e=="function")&&(this.format=e),typeof i=="object"&&(this.formatters=i),typeof t=="string"&&(this.scope=t)}startLogging(s={}){this.setOptions(s),this.disposeListeners();for(const f of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(f,(...l)=>{this.handleEvent({eventSource:"app",eventName:f,handlerArgs:l})}));for(const f of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(f,(...l)=>{this.handleEvent({eventSource:"webContents",eventName:f,handlerArgs:l})}))}stopLogging(){this.disposeListeners()}arrayToObject(s,f){const l={};return f.forEach((r,e)=>{l[r]=s[e]}),s.length>f.length&&(l.unknownArgs=s.slice(f.length)),l}disposeListeners(){this.disposers.forEach(s=>s()),this.disposers=[]}formatEventLog({eventName:s,eventSource:f,handlerArgs:l}){var d;const[r,...e]=l;if(typeof this.format=="function")return this.format({args:e,event:r,eventName:s,eventSource:f});const i=(d=this.formatters[f])==null?void 0:d[s];let t=e;if(typeof i=="function"&&(t=i({args:e,event:r,eventName:s,eventSource:f})),!t)return;const u={};return Array.isArray(t)?u.args=t:typeof t=="object"&&Object.assign(u,t),f==="webContents"&&Object.assign(u,this.getWebContentsDetails(r==null?void 0:r.sender)),[this.format.replace("{eventSource}",f==="app"?"App":"WebContents").replace("{eventName}",s),u]}getEventNames(s){return!s||typeof s!="object"?[]:Object.entries(s).filter(([f,l])=>l).map(([f])=>f)}getWebContentsDetails(s){if(!(s!=null&&s.loadURL))return{};try{return{webContents:{id:s.id,url:s.getURL()}}}catch{return{}}}handleEvent({eventName:s,eventSource:f,handlerArgs:l}){var e;const r=this.formatEventLog({eventName:s,eventSource:f,handlerArgs:l});if(r){const i=this.scope?this.logger.scope(this.scope):this.logger;(e=i==null?void 0:i[this.level])==null||e.call(i,...r)}}}return wo=n,wo}var _o,_u;function bc(){if(_u)return _o;_u=1;const{transform:n}=Lt();_o={concatFirstStringElements:c,formatScope:f,formatText:r,formatVariables:l,timeZoneFromOffset:s,format({message:e,logger:i,transport:t,data:u=e==null?void 0:e.data}){switch(typeof t.format){case"string":return n({message:e,logger:i,transforms:[l,f,r],transport:t,initialData:[t.format,...u]});case"function":return t.format({data:u,level:(e==null?void 0:e.level)||"info",logger:i,message:e,transport:t});default:return u}}};function c({data:e}){return typeof e[0]!="string"||typeof e[1]!="string"||e[0].match(/%[1cdfiOos]/)?e:[`${e[0]} ${e[1]}`,...e.slice(2)]}function s(e){const i=Math.abs(e),t=e>0?"-":"+",u=Math.floor(i/60).toString().padStart(2,"0"),o=(i%60).toString().padStart(2,"0");return`${t}${u}:${o}`}function f({data:e,logger:i,message:t}){const{defaultLabel:u,labelLength:o}=(i==null?void 0:i.scope)||{},d=e[0];let a=t.scope;a||(a=u);let p;return a===""?p=o>0?"".padEnd(o+3):"":typeof a=="string"?p=` (${a})`.padEnd(o+3):p="",e[0]=d.replace("{scope}",p),e}function l({data:e,message:i}){let t=e[0];if(typeof t!="string")return e;t=t.replace("{level}]",`${i.level}]`.padEnd(6," "));const u=i.date||new Date;return e[0]=t.replace(/\{(\w+)}/g,(o,d)=>{var a;switch(d){case"level":return i.level||"info";case"logId":return i.logId;case"y":return u.getFullYear().toString(10);case"m":return(u.getMonth()+1).toString(10).padStart(2,"0");case"d":return u.getDate().toString(10).padStart(2,"0");case"h":return u.getHours().toString(10).padStart(2,"0");case"i":return u.getMinutes().toString(10).padStart(2,"0");case"s":return u.getSeconds().toString(10).padStart(2,"0");case"ms":return u.getMilliseconds().toString(10).padStart(3,"0");case"z":return s(u.getTimezoneOffset());case"iso":return u.toISOString();default:return((a=i.variables)==null?void 0:a[d])||o}}).trim(),e}function r({data:e}){const i=e[0];if(typeof i!="string")return e;if(i.lastIndexOf("{text}")===i.length-6)return e[0]=i.replace(/\s?{text}/,""),e[0]===""&&e.shift(),e;const u=i.split("{text}");let o=[];return u[0]!==""&&o.push(u[0]),o=o.concat(e.slice(1)),u[1]!==""&&o.push(u[1]),o}return _o}var So={exports:{}},Su;function tn(){return Su||(Su=1,function(n){const c=Vr;n.exports={serialize:f,maxDepth({data:l,transport:r,depth:e=(r==null?void 0:r.depth)??6}){if(!l)return l;if(e<1)return Array.isArray(l)?"[array]":typeof l=="object"&&l?"[object]":l;if(Array.isArray(l))return l.map(t=>n.exports.maxDepth({data:t,depth:e-1}));if(typeof l!="object"||l&&typeof l.toISOString=="function")return l;if(l===null)return null;if(l instanceof Error)return l;const i={};for(const t in l)Object.prototype.hasOwnProperty.call(l,t)&&(i[t]=n.exports.maxDepth({data:l[t],depth:e-1}));return i},toJSON({data:l}){return JSON.parse(JSON.stringify(l,s()))},toString({data:l,transport:r}){const e=(r==null?void 0:r.inspectOptions)||{},i=l.map(t=>{if(t!==void 0)try{const u=JSON.stringify(t,s(),"  ");return u===void 0?void 0:JSON.parse(u)}catch{return t}});return c.formatWithOptions(e,...i)}};function s(l={}){const r=new WeakSet;return function(e,i){if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return f(e,i,l)}}function f(l,r,e={}){const i=(e==null?void 0:e.serializeMapAndSet)!==!1;return r instanceof Error?r.stack:r&&(typeof r=="function"?`[function] ${r.toString()}`:r instanceof Date?r.toISOString():i&&r instanceof Map&&Object.fromEntries?Object.fromEntries(r):i&&r instanceof Set&&Array.from?Array.from(r):r)}}(So)),So.exports}var Ao,Au;function Jo(){if(Au)return Ao;Au=1,Ao={transformStyles:f,applyAnsiStyles({data:l}){return f(l,c,s)},removeStyles({data:l}){return f(l,()=>"")}};const n={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function c(l){const r=l.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return n[r]||""}function s(l){return l+n.unset}function f(l,r,e){const i={};return l.reduce((t,u,o,d)=>{if(i[o])return t;if(typeof u=="string"){let a=o,p=!1;u=u.replace(/%[1cdfiOos]/g,v=>{if(a+=1,v!=="%c")return v;const g=d[a];return typeof g=="string"?(i[a]=!0,p=!0,r(g,u)):v}),p&&e&&(u=e(u))}return t.push(u),t},[])}return Ao}var bo,bu;function Th(){if(bu)return bo;bu=1;const{concatFirstStringElements:n,format:c}=bc(),{maxDepth:s,toJSON:f}=tn(),{applyAnsiStyles:l,removeStyles:r}=Jo(),{transform:e}=Lt(),i={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};bo=o;const u=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"›"} {text}`;Object.assign(o,{DEFAULT_FORMAT:u});function o(g){return Object.assign(m,{format:u,level:"silly",transforms:[d,c,p,n,s,f],useStyles:process.env.FORCE_STYLES,writeFn({message:_}){(i[_.level]||i.info)(..._.data)}});function m(_){const R=e({logger:g,message:_,transport:m});m.writeFn({message:{..._,data:R}})}}function d({data:g,message:m,transport:_}){return _.format!==u?g:[`color:${v(m.level)}`,"color:unset",...g]}function a(g,m){if(typeof g=="boolean")return g;const R=m==="error"||m==="warn"?process.stderr:process.stdout;return R&&R.isTTY}function p(g){const{message:m,transport:_}=g;return(a(_.useStyles,m.level)?l:r)(g)}function v(g){const m={error:"red",warn:"yellow",info:"cyan",default:"unset"};return m[g]||m.default}return bo}var To,Tu;function Tc(){if(Tu)return To;Tu=1;const n=zr,c=Ye,s=wt;class f extends n{constructor({path:i,writeOptions:t={encoding:"utf8",flag:"a",mode:438},writeAsync:u=!1}){super();Te(this,"asyncWriteQueue",[]);Te(this,"bytesWritten",0);Te(this,"hasActiveAsyncWriting",!1);Te(this,"path",null);Te(this,"initialSize");Te(this,"writeOptions",null);Te(this,"writeAsync",!1);this.path=i,this.writeOptions=t,this.writeAsync=u}get size(){return this.getSize()}clear(){try{return c.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(i){return i.code==="ENOENT"?!0:(this.emit("error",i,this),!1)}}crop(i){try{const t=l(this.path,i||4096);this.clear(),this.writeLine(`[log cropped]${s.EOL}${t}`)}catch(t){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${t.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const i=c.statSync(this.path);this.initialSize=i.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(i){this.bytesWritten+=Buffer.byteLength(i,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const i=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const t=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,c.writeFile(this.path,t,this.writeOptions,u=>{i.hasActiveAsyncWriting=!1,u?i.emit("error",new Error(`Couldn't write to ${i.path}. ${u.message}`),this):i.increaseBytesWrittenCounter(t),i.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(i){if(i+=s.EOL,this.writeAsync){this.asyncWriteQueue.push(i),this.nextAsyncWrite();return}try{c.writeFileSync(this.path,i,this.writeOptions),this.increaseBytesWrittenCounter(i)}catch(t){this.emit("error",new Error(`Couldn't write to ${this.path}. ${t.message}`),this)}}}To=f;function l(r,e){const i=Buffer.alloc(e),t=c.statSync(r),u=Math.min(t.size,e),o=Math.max(0,t.size-e),d=c.openSync(r,"r"),a=c.readSync(d,i,0,u,o);return c.closeSync(d),i.toString("utf8",0,a)}return To}var Ro,Ru;function Rh(){if(Ru)return Ro;Ru=1;const n=Tc();class c extends n{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return Ro=c,Ro}var Co,Cu;function Ch(){if(Cu)return Co;Cu=1;const n=zr,c=Ye,s=Pe,f=Tc(),l=Rh();class r extends n{constructor(){super();Te(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:t,writeOptions:u={},writeAsync:o=!1}){let d;try{if(t=s.resolve(t),this.store[t])return this.store[t];d=this.createFile({filePath:t,writeOptions:u,writeAsync:o})}catch(a){d=new l({path:t}),this.emitError(a,d)}return d.on("error",this.emitError),this.store[t]=d,d}createFile({filePath:t,writeOptions:u,writeAsync:o}){return this.testFileWriting({filePath:t,writeOptions:u}),new f({path:t,writeOptions:u,writeAsync:o})}emitError(t,u){this.emit("error",t,u)}testFileWriting({filePath:t,writeOptions:u}){c.mkdirSync(s.dirname(t),{recursive:!0}),c.writeFileSync(t,"",{flag:"a",mode:u.mode})}}return Co=r,Co}var Oo,Ou;function Oh(){if(Ou)return Oo;Ou=1;const n=Ye,c=wt,s=Pe,f=Ch(),{transform:l}=Lt(),{removeStyles:r}=Jo(),{format:e,concatFirstStringElements:i}=bc(),{toString:t}=tn();Oo=o;const u=new f;function o(a,{registry:p=u,externalApi:v}={}){let g;return p.listenerCount("error")<1&&p.on("error",(U,T)=>{R(`Can't write to ${T}`,U)}),Object.assign(m,{fileName:d(a.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:O,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:P,sync:!0,transforms:[r,e,i,t],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(U){const T=U.toString(),S=s.parse(T);try{n.renameSync(T,s.join(S.dir,`${S.name}.old${S.ext}`))}catch(b){R("Could not rotate log",b);const E=Math.round(m.maxSize/4);U.crop(Math.min(E,256*1024))}},resolvePathFn(U){return s.join(U.libraryDefaultDir,U.fileName)},setAppName(U){a.dependencies.externalApi.setAppName(U)}});function m(U){const T=O(U);m.maxSize>0&&T.size>m.maxSize&&(m.archiveLogFn(T),T.reset());const b=l({logger:a,message:U,transport:m});T.writeLine(b)}function _(){g||(g=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(v.getPathVariables()),fileName:{get(){return m.fileName},enumerable:!0}}),typeof m.archiveLog=="function"&&(m.archiveLogFn=m.archiveLog,R("archiveLog is deprecated. Use archiveLogFn instead")),typeof m.resolvePath=="function"&&(m.resolvePathFn=m.resolvePath,R("resolvePath is deprecated. Use resolvePathFn instead")))}function R(U,T=null,S="error"){const b=[`electron-log.transports.file: ${U}`];T&&b.push(T),a.transports.console({data:b,date:new Date,level:S})}function O(U){_();const T=m.resolvePathFn(g,U);return p.provide({filePath:T,writeAsync:!m.sync,writeOptions:m.writeOptions})}function P({fileFilter:U=T=>T.endsWith(".log")}={}){_();const T=s.dirname(m.resolvePathFn(g));return n.existsSync(T)?n.readdirSync(T).map(S=>s.join(T,S)).filter(U).map(S=>{try{return{path:S,lines:n.readFileSync(S,"utf8").split(c.EOL)}}catch{return null}}).filter(Boolean):[]}}function d(a=process.type){switch(a){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return Oo}var Po,Pu;function Ph(){if(Pu)return Po;Pu=1;const{maxDepth:n,toJSON:c}=tn(),{transform:s}=Lt();Po=f;function f(l,{externalApi:r}){return Object.assign(e,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:l.isDev?"silly":!1,transforms:[c,n]}),r!=null&&r.isElectron()?e:void 0;function e(i){var t;((t=i==null?void 0:i.variables)==null?void 0:t.processType)!=="renderer"&&(r==null||r.sendIpc(e.eventId,{...i,data:s({logger:l,message:i,transport:e})}))}}return Po}var Do,Du;function Dh(){if(Du)return Do;Du=1;const n=Mu,c=Nf,{transform:s}=Lt(),{removeStyles:f}=Jo(),{toJSON:l,maxDepth:r}=tn();Do=e;function e(i){return Object.assign(t,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[f,l,r],makeBodyFn({message:u}){return JSON.stringify({client:t.client,data:u.data,date:u.date.getTime(),level:u.level,scope:u.scope,variables:u.variables})},processErrorFn({error:u}){i.processMessage({data:[`electron-log: can't POST ${t.url}`,u],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:u,requestOptions:o,body:d}){const p=(u.startsWith("https:")?c:n).request(u,{method:"POST",...o,headers:{"Content-Type":"application/json","Content-Length":d.length,...o.headers}});return p.write(d),p.end(),p}});function t(u){if(!t.url)return;const o=t.makeBodyFn({logger:i,message:{...u,data:s({logger:i,message:u,transport:t})},transport:t}),d=t.sendRequestFn({serverUrl:t.url,requestOptions:t.requestOptions,body:Buffer.from(o,"utf8")});d.on("error",a=>t.processErrorFn({error:a,logger:i,message:u,request:d,transport:t}))}}return Do}var Io,Iu;function Rc(){if(Iu)return Io;Iu=1;const n=Sc(),c=Ah(),s=bh(),f=Th(),l=Oh(),r=Ph(),e=Dh();Io=i;function i({dependencies:t,initializeFn:u}){var d;const o=new n({dependencies:t,errorHandler:new c,eventLogger:new s,initializeFn:u,isDev:(d=t.externalApi)==null?void 0:d.isDev(),logId:"default",transportFactories:{console:f,file:l,ipc:r,remote:e},variables:{processType:"main"}});return o.default=o,o.Logger=n,o.processInternalErrorFn=a=>{o.transports.console.writeFn({message:{data:["Unhandled electron-log error",a],level:"error"}})},o}return Io}var No,Nu;function Ih(){if(Nu)return No;Nu=1;const n=ce,c=_h(),{initialize:s}=Sh(),f=Rc(),l=new c({electron:n}),r=f({dependencies:{externalApi:l},initializeFn:s});No=r,l.onIpc("__ELECTRON_LOG__",(i,t)=>{t.scope&&r.Logger.getInstance(t).scope(t.scope);const u=new Date(t.date);e({...t,date:u.getTime()?u:new Date})}),l.onIpcInvoke("__ELECTRON_LOG__",(i,{cmd:t="",logId:u})=>{switch(t){case"getOptions":return{levels:r.Logger.getInstance({logId:u}).levels,logId:u};default:return e({data:[`Unknown cmd '${t}'`],level:"error"}),{}}});function e(i){var t;(t=r.Logger.getInstance(i))==null||t.processMessage(i)}return No}var Fo,Fu;function Nh(){if(Fu)return Fo;Fu=1;const n=Ac(),c=Rc(),s=new n;return Fo=c({dependencies:{externalApi:s}}),Fo}var Lu;function Fh(){if(Lu)return gr.exports;Lu=1;const n=typeof process>"u"||process.type==="renderer"||process.type==="worker",c=typeof process=="object"&&process.type==="browser";return n?(_c(),gr.exports=Eh()):c?gr.exports=Ih():gr.exports=Nh(),gr.exports}var Lh=Fh();const tt=jf(Lh);tt.transports.file.level="debug";Ke.autoUpdater.logger=tt;const xh=12*60*60*1e3;Ke.autoUpdater.autoDownload=!1;Ke.autoUpdater.allowDowngrade=!1;Ke.autoUpdater.allowPrerelease=!1;Ke.autoUpdater.channel="latest";Ke.autoUpdater.requestHeaders={"User-Agent":"StS Stats Analyzer",Accept:"application/vnd.github+json"};Ke.autoUpdater.setFeedURL({provider:"github",owner:"moritaniantech",repo:"slay-the-spire-stats-analyzer",private:!1,releaseType:"release"});class $h{constructor(c){this.mainWindow=c,this.initialize()}initialize(){Ke.autoUpdater.on("update-available",c=>{tt.info("Update available:",c),this.mainWindow.webContents.send("update-available",c)}),Ke.autoUpdater.on("download-progress",c=>{tt.debug("Download progress:",c),this.mainWindow.webContents.send("download-progress",c)}),Ke.autoUpdater.on("update-downloaded",c=>{tt.info("Update downloaded:",c),this.mainWindow.webContents.send("update-downloaded",c)}),Ke.autoUpdater.on("error",c=>{if(tt.error("AutoUpdater error:",c),c instanceof Error&&c.message.includes("404")){tt.info("No updates available or release not found");return}this.mainWindow.webContents.send("update-error",c)}),ce.ipcMain.handle("check-for-updates",()=>this.checkForUpdates()),ce.ipcMain.handle("start-update",()=>{Ke.autoUpdater.quitAndInstall()}),setInterval(()=>{this.checkForUpdates()},xh),ce.app.isPackaged&&setTimeout(()=>{this.checkForUpdates()},5e3)}async checkForUpdates(){if(!ce.app.isPackaged){tt.info("App is not packaged, skipping update check");return}try{tt.info("Checking for updates...");const c=await Ke.autoUpdater.checkForUpdates();return tt.info("Update check result:",c),c}catch(c){return tt.error("Error checking for updates:",c),c instanceof Error&&c.message.includes("404")&&tt.info("No updates available or release not found"),null}}}const Uh=require("sqlite3"),lt="StS Stats Analyzer";ce.app.setName(lt);if(process.platform==="darwin")try{ce.app.setName(lt),ce.app.setAboutPanelOptions({applicationName:lt,applicationVersion:ce.app.getVersion(),copyright:"Copyright © 2024 moritaniantech",credits:"Created by moritaniantech"})}catch(n){console.error("Failed to set app name:",n)}else if(process.platform==="win32")try{ce.app.setAppUserModelId(`com.moritaniantech.${lt}`)}catch(n){console.error("Failed to set app user model id:",n)}const Bt=process.env.NODE_ENV==="development"||!ce.app.isPackaged,kh=ke.join(__dirname,"../dist-electron"),Lo=ke.join(__dirname,"../dist");ce.app.isPackaged||ke.join(__dirname,"../public");const xo=ke.resolve(__dirname,"../public/icons/icon.png");let Wr;async function qh(){try{const n=(await import("electron-store")).default;return Wr=new n({name:lt,defaults:{theme:"dark"}}),Wr}catch(n){return console.error("Error initializing store:",n),{get:()=>"dark",set:()=>{},store:{theme:"dark"}}}}let _e=null;async function Mh(){const n=ke.join(ce.app.getPath("userData"),"slay-the-spire-stats.db");return new Promise((c,s)=>{_e=new Uh.Database(n,async f=>{if(f){console.error("Database initialization error:",f),s(f);return}try{if(!_e)throw new Error("Database not initialized");await Mf(_e),c()}catch(l){console.error("Migration error:",l),s(l)}})})}async function xu(){ce.session.defaultSession.webRequest.onHeadersReceived((c,s)=>{s({responseHeaders:{...c.responseHeaders,"Content-Security-Policy":["default-src 'self'","script-src 'self' 'unsafe-inline'","style-src 'self' 'unsafe-inline' https://fonts.googleapis.com","font-src 'self' data: https://fonts.gstatic.com","img-src 'self' data:","connect-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com"+(Bt?" ws://localhost:*":""),"frame-src 'none'","object-src 'none'","base-uri 'self'","form-action 'self'"].join("; ")}})});const n=new ce.BrowserWindow({title:lt,icon:xo,width:1280,height:800,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:ke.join(kh,"preload.js"),sandbox:!0,devTools:Bt,webSecurity:!0,allowRunningInsecureContent:!1,experimentalFeatures:!1,enableBlinkFeatures:""}});if(n.setTitle(lt),process.platform==="darwin"&&ce.app.dock.setIcon(xo),Bt){n.webContents.openDevTools();try{await n.loadURL("http://localhost:5173")}catch(c){console.error("Failed to load dev server:",c),process.exit(1)}}else await n.loadFile(ke.join(Lo,"index.html"));return n.webContents.setWindowOpenHandler(({url:c})=>((c.startsWith("http:")||c.startsWith("https:"))&&ce.shell.openExternal(c),{action:"deny"})),n.webContents.on("will-navigate",(c,s)=>{const f=Bt?new Set(["http://localhost:5173"]):new Set([`file://${ke.join(Lo,"index.html")}`]),l=new URL(s);f.has(l.origin)||(c.preventDefault(),console.warn(`Navigation blocked to: ${s}`))}),ce.session.defaultSession.setPermissionRequestHandler((c,s,f)=>{const l=new Set(["clipboard-read","clipboard-write","media"]);Bt&&l.add("notifications"),f(l.has(s))}),ce.session.defaultSession.setPermissionCheckHandler((c,s)=>new Set(["openExternal","notifications"]).has(s)?Bt:!0),ce.app.isPackaged&&new $h(n),n}ce.app.whenReady().then(async()=>{try{ce.app.setName(lt),process.platform==="darwin"?(ce.app.dock.setIcon(xo),ce.app.setAboutPanelOptions({applicationName:lt,applicationVersion:ce.app.getVersion(),copyright:"Copyright © 2024 moritaniantech",credits:"Created by moritaniantech"})):process.platform==="win32"&&ce.app.setAppUserModelId(`com.moritaniantech.${lt}`),await qh(),await Mh(),await xu(),ce.app.on("activate",async()=>{ce.BrowserWindow.getAllWindows().length===0&&await xu()})}catch(n){console.error("Application initialization error:",n),ce.app.quit()}});ce.app.on("window-all-closed",()=>{process.platform!=="darwin"&&ce.app.quit()});ce.ipcMain.handle("select-folder",async()=>(await ce.dialog.showOpenDialog({properties:["openDirectory"]})).filePaths[0]);ce.ipcMain.handle("get-run-folder",async()=>new Promise((n,c)=>{if(!_e){c(new Error("Database not initialized"));return}_e.get("SELECT value FROM settings WHERE key = ?",["runFolderPath"],(s,f)=>{s?(console.error("Error getting run folder path:",s),c(s)):n(f?f.value:null)})}));ce.ipcMain.handle("load-run-files",async(n,c)=>{try{const s=["IRONCLAD","SILENT","DEFECT","WATCHER"];let f=[];for(const l of s){const r=ke.join(c,l);if(!pt.existsSync(r))continue;const i=(await pt.promises.readdir(r)).filter(t=>t.endsWith(".run"));for(const t of i){const u=ke.join(r,t),o=await Hu(u,[c]),d=JSON.parse(o);await new Promise((p,v)=>{_e==null||_e.get("SELECT id FROM runs WHERE timestamp = ?",[d.timestamp],(g,m)=>{g?v(g):p(m)})})||(await new Promise((p,v)=>{_e==null||_e.run(`INSERT INTO runs (
                id, character, victory, ascension_level, floor_reached,
                playtime, score, timestamp, run_data
              ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[t.replace(".run",""),l,d.victory?1:0,d.ascension_level,d.floor_reached,d.playtime,d.score,d.timestamp,JSON.stringify(d)],g=>{g?v(g):p(null)})}),f.push({id:t.replace(".run",""),character:l,...d}))}}return new Promise((l,r)=>{_e==null||_e.all("SELECT * FROM runs ORDER BY timestamp DESC",(e,i)=>{e?r(e):l(i.map(t=>({id:t.id,character:t.character,victory:!!t.victory,ascension_level:t.ascension_level,floor_reached:t.floor_reached,playtime:t.playtime,score:t.score,timestamp:t.timestamp,run_data:JSON.parse(t.run_data)})))})})}catch(s){throw console.error("Error loading run files:",s),s}});ce.ipcMain.handle("get-all-runs",async()=>new Promise((n,c)=>{if(!_e){c(new Error("Database not initialized"));return}_e.all("SELECT * FROM runs ORDER BY timestamp DESC",(s,f)=>{s?c(s):n(f.map(l=>({id:l.id,character:l.character,victory:!!l.victory,ascension_level:l.ascension_level,floor_reached:l.floor_reached,playtime:l.playtime,score:l.score,timestamp:l.timestamp,run_data:JSON.parse(l.run_data)})))})}));ce.ipcMain.handle("get-theme",async()=>Wr.get("theme"));ce.ipcMain.handle("set-theme",async(n,c)=>(Wr.set("theme",c),c));ce.ipcMain.handle("export-data",async()=>{if(!_e)throw new Error("Database not initialized");const n=ke.join(ce.app.getPath("userData"),"backup.json"),c=await new Promise((s,f)=>{_e==null||_e.all("SELECT * FROM runs",(l,r)=>{l?f(l):s(r)})});return await Bf(n,JSON.stringify(c,null,2),[ce.app.getPath("userData")]),n});ce.ipcMain.handle("import-data",async(n,c)=>{if(!_e)throw new Error("Database not initialized");const s=await Hu(c,[ke.dirname(c)]),f=JSON.parse(s);for(const l of f)await new Promise((r,e)=>{_e==null||_e.run(`INSERT OR REPLACE INTO runs (
          id, character, victory, ascension_level, floor_reached,
          playtime, score, timestamp, run_data
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,[l.id,l.character,l.victory,l.ascension_level,l.floor_reached,l.playtime,l.score,l.timestamp,l.run_data],i=>{i?e(i):r(null)})});return!0});ce.ipcMain.handle("delete-run",async(n,c)=>{if(!_e)throw new Error("Database not initialized");return new Promise((s,f)=>{_e==null||_e.run(`DELETE FROM runs WHERE 
        timestamp = ? AND 
        character = ? AND 
        ascension_level = ? AND 
        victory = ? AND 
        floor_reached = ? AND 
        playtime = ? AND 
        score = ?`,[c.timestamp,c.character,c.ascension_level,c.victory?1:0,c.floor_reached,c.playtime,c.score],l=>{l?f(l):s(!0)})})});ce.ipcMain.handle("sqlite-execute",async(n,c,s=[])=>{if(!_e)throw new Error("Database not initialized");return new Promise((f,l)=>{_e.run(c,s,function(r){if(r){l(r);return}f({lastID:this.lastID,changes:this.changes})})})});ce.ipcMain.handle("sqlite-query",async(n,c,s=[])=>{if(!_e)throw new Error("Database not initialized");return new Promise((f,l)=>{_e.all(c,s,(r,e)=>{if(r){l(r);return}f(e)})})});ce.ipcMain.handle("sqlite-get",async(n,c,s=[])=>{if(!_e)throw new Error("Database not initialized");return new Promise((f,l)=>{_e.get(c,s,(r,e)=>{if(r){l(r);return}f(e)})})});async function Bh(){return new Promise((n,c)=>{if(!_e){n();return}_e.run("PRAGMA optimize",[],s=>{s&&console.error("Error optimizing database:",s),_e.close(f=>{f?(console.error("Error closing database:",f),c(f)):(_e=null,n())})})})}const jh=24*60*60*1e3,$u=7;async function Uu(){if(!_e)return;const n=ke.join(ce.app.getPath("userData"),"backups");pt.existsSync(n)||pt.mkdirSync(n);const c=new Date().toISOString().replace(/[:.]/g,"-"),s=ke.join(n,`backup-${c}.json`);try{const f=await new Promise((i,t)=>{_e==null||_e.all("SELECT * FROM runs",(u,o)=>{u?t(u):i(o)})}),l=await new Promise((i,t)=>{_e==null||_e.all("SELECT * FROM settings",(u,o)=>{u?t(u):i(o)})});await pt.promises.writeFile(s,JSON.stringify({runs:f,settings:l},null,2));const e=(await pt.promises.readdir(n)).filter(i=>i.startsWith("backup-")).sort().reverse();if(e.length>$u)for(const i of e.slice($u))await pt.promises.unlink(ke.join(n,i));console.log(`バックアップを作成しました: ${s}`)}catch(f){console.error("バックアップ作成中にエラーが発生しました:",f)}}let yr;function Hh(){yr&&clearInterval(yr),yr=setInterval(Uu,jh),Uu()}ce.app.on("ready",()=>{Hh()});ce.app.on("before-quit",()=>{yr&&clearInterval(yr)});ce.app.on("before-quit",async n=>{n.preventDefault();try{await Bh(),ce.app.exit()}catch(c){console.error("Error during application shutdown:",c),ce.app.exit(1)}});
