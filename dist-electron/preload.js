"use strict";
const electron = require("electron");
const sqliteAPI = {
  execute: (sql, params = []) => electron.ipcRenderer.invoke("sqlite-execute", sql, params),
  query: (sql, params = []) => electron.ipcRenderer.invoke("sqlite-query", sql, params),
  get: (sql, params = []) => electron.ipcRenderer.invoke("sqlite-get", sql, params)
};
let isPackagedGlobal = process.env.NODE_ENV === "production";
let isDevelopmentGlobal = process.env.NODE_ENV === "development";
const electronAPI = {
  loadRunFiles: (runFolderPath) => electron.ipcRenderer.invoke("load-run-files", runFolderPath),
  getAllRuns: () => electron.ipcRenderer.invoke("get-all-runs"),
  getTheme: () => electron.ipcRenderer.invoke("get-theme"),
  setTheme: (theme) => electron.ipcRenderer.invoke("set-theme", theme),
  selectFolder: () => electron.ipcRenderer.invoke("select-folder"),
  getRunFolder: () => electron.ipcRenderer.invoke("get-run-folder"),
  onLoadProgress: (callback) => {
    const progressHandler = (_event, data) => callback(data);
    electron.ipcRenderer.on("load-progress", progressHandler);
    return () => {
      electron.ipcRenderer.removeListener("load-progress", progressHandler);
    };
  },
  deleteRun: (run) => electron.ipcRenderer.invoke("delete-run", run),
  sqlite: sqliteAPI,
  checkForUpdates: () => electron.ipcRenderer.invoke("check-for-updates"),
  startUpdate: () => electron.ipcRenderer.invoke("start-update"),
  onUpdateAvailable: (callback) => {
    const handler = (_event, info) => callback(info);
    electron.ipcRenderer.on("update-available", handler);
    return () => {
      electron.ipcRenderer.removeListener("update-available", handler);
    };
  },
  onUpdateProgress: (callback) => {
    const handler = (_event, info) => callback(info);
    electron.ipcRenderer.on("download-progress", handler);
    return () => {
      electron.ipcRenderer.removeListener("download-progress", handler);
    };
  },
  onUpdateDownloaded: (callback) => {
    const handler = (_event, info) => callback(info);
    electron.ipcRenderer.on("update-downloaded", handler);
    return () => {
      electron.ipcRenderer.removeListener("update-downloaded", handler);
    };
  },
  onUpdateError: (callback) => {
    const handler = (_event, error) => callback(error);
    electron.ipcRenderer.on("update-error", handler);
    return () => {
      electron.ipcRenderer.removeListener("update-error", handler);
    };
  },
  resolveAssetPath: async (assetPath) => {
    try {
      const resolvedPath = await electron.ipcRenderer.invoke("get-asset-path", assetPath);
      return resolvedPath;
    } catch (error) {
      console.error("[preload] Error in resolveAssetPath:", error);
      return assetPath;
    }
  },
  getResourcePath: () => electron.ipcRenderer.invoke("get-resource-path"),
  get isDevelopment() {
    return isDevelopmentGlobal;
  },
  get isPackaged() {
    return isPackagedGlobal;
  },
  platform: process.platform,
  readFile: (filePath, encoding = "utf8") => electron.ipcRenderer.invoke("fs-readFile", filePath, encoding),
  getUserDataPath: () => electron.ipcRenderer.invoke("app-getPath", "userData"),
  showOpenDialog: (options) => electron.ipcRenderer.invoke("dialog-showOpenDialog", options),
  resolveImagePath: (imagePath) => electron.ipcRenderer.invoke("resolve-image-path", imagePath),
  getAssetPath: async (assetPath) => {
    try {
      const pathResult = await electron.ipcRenderer.invoke("get-asset-path", assetPath);
      return pathResult;
    } catch (error) {
      console.error("[preload] getAssetPath エラー:", error);
      throw error;
    }
  },
  assetExists: async (assetPath) => {
    try {
      const exists = await electron.ipcRenderer.invoke("asset-exists", assetPath);
      return exists;
    } catch (error) {
      console.error("[preload] assetExists エラー:", error);
      return false;
    }
  },
  debugResources: async () => electron.ipcRenderer.invoke("debug-resources"),
  getFileURLForAsset: async (assetPath) => {
    try {
      const fileUrl = await electron.ipcRenderer.invoke("get-file-url-for-asset", assetPath);
      return fileUrl || "";
    } catch (error) {
      console.error("[preload] Error in getFileURLForAsset:", error);
      return "";
    }
  },
  getImageBase64: (relativeImagePath) => electron.ipcRenderer.invoke("get-image-base64", relativeImagePath)
};
electron.ipcRenderer.invoke("is-app-packaged").then((value) => {
  isPackagedGlobal = !!value;
  isDevelopmentGlobal = !isPackagedGlobal;
});
console.log("[preload] Final electronAPI object before exposeInMainWorld:", JSON.stringify(Object.keys(electronAPI)));
console.log("[preload] typeof electronAPI.getImageBase64 before expose:", typeof electronAPI.getImageBase64);
electron.ipcRenderer.on("main-process-log", (_event, logData) => {
  const { level, message, details, error } = logData;
  const logMessage = details ? `${message}
詳細: ${JSON.stringify(details, null, 2)}` : error ? `${message}
エラー: ${error}` : message;
  switch (level) {
    case "error":
      console.error(`[Main Process] ${logMessage}`);
      break;
    case "warn":
      console.warn(`[Main Process] ${logMessage}`);
      break;
    default:
      console.log(`[Main Process] ${logMessage}`);
  }
});
electron.contextBridge.exposeInMainWorld("electronAPI", electronAPI);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlbG9hZC5qcyIsInNvdXJjZXMiOlsiLi4vZWxlY3Ryb24vcHJlbG9hZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb250ZXh0QnJpZGdlLCBpcGNSZW5kZXJlciB9IGZyb20gJ2VsZWN0cm9uJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8g5a6f6KGM44OH44O844K/44Gu5Z6L5a6a576pXG5pbnRlcmZhY2UgUnVuIHtcbiAgaWQ6IHN0cmluZztcbiAgY2hhcmFjdGVyOiBzdHJpbmc7XG4gIHZpY3Rvcnk6IGJvb2xlYW47XG4gIGFzY2Vuc2lvbl9sZXZlbDogbnVtYmVyO1xuICBmbG9vcl9yZWFjaGVkOiBudW1iZXI7XG4gIHBsYXl0aW1lOiBudW1iZXI7XG4gIHNjb3JlOiBudW1iZXI7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBydW5fZGF0YTogYW55O1xufVxuXG5pbnRlcmZhY2UgTG9hZFByb2dyZXNzIHtcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcbiAgdG90YWw6IG51bWJlcjtcbn1cblxuLy8gU1FMaXRl5pON5L2c55So44Gu5Z6L5a6a576pXG5pbnRlcmZhY2UgU1FMaXRlQVBJIHtcbiAgZXhlY3V0ZTogKHNxbDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkgPT4gUHJvbWlzZTxhbnk+O1xuICBxdWVyeTogKHNxbDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkgPT4gUHJvbWlzZTxhbnlbXT47XG4gIGdldDogKHNxbDogc3RyaW5nLCBwYXJhbXM/OiBhbnlbXSkgPT4gUHJvbWlzZTxhbnk+O1xufVxuXG5pbnRlcmZhY2UgVXBkYXRlSW5mbyB7XG4gIHZlcnNpb246IHN0cmluZztcbiAgcmVsZWFzZU5vdGVzPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUHJvZ3Jlc3NJbmZvIHtcbiAgYnl0ZXNQZXJTZWNvbmQ6IG51bWJlcjtcbiAgcGVyY2VudDogbnVtYmVyO1xuICB0cmFuc2ZlcnJlZDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xufVxuXG4vLyBBUEnjga7lnovlrprnvqlcbmludGVyZmFjZSBFbGVjdHJvbkFQSSB7XG4gIGxvYWRSdW5GaWxlczogKHJ1bkZvbGRlclBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxSdW5bXT47XG4gIGdldEFsbFJ1bnM6ICgpID0+IFByb21pc2U8UnVuW10+O1xuICBnZXRUaGVtZTogKCkgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICBzZXRUaGVtZTogKHRoZW1lOiBzdHJpbmcpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgc2VsZWN0Rm9sZGVyOiAoKSA9PiBQcm9taXNlPHN0cmluZyB8IG51bGw+O1xuICBnZXRSdW5Gb2xkZXI6ICgpID0+IFByb21pc2U8c3RyaW5nIHwgbnVsbD47XG4gIG9uTG9hZFByb2dyZXNzOiAoY2FsbGJhY2s6IChwcm9ncmVzczogTG9hZFByb2dyZXNzKSA9PiB2b2lkKSA9PiAoKSA9PiB2b2lkO1xuICBkZWxldGVSdW46IChydW46IGFueSkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc3FsaXRlOiBTUUxpdGVBUEk7XG4gIGNoZWNrRm9yVXBkYXRlczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc3RhcnRVcGRhdGU6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIG9uVXBkYXRlQXZhaWxhYmxlOiAoY2FsbGJhY2s6IChpbmZvOiBVcGRhdGVJbmZvKSA9PiB2b2lkKSA9PiAoKSA9PiB2b2lkO1xuICBvblVwZGF0ZVByb2dyZXNzOiAoY2FsbGJhY2s6IChpbmZvOiBQcm9ncmVzc0luZm8pID0+IHZvaWQpID0+ICgpID0+IHZvaWQ7XG4gIG9uVXBkYXRlRG93bmxvYWRlZDogKGNhbGxiYWNrOiAoaW5mbzogVXBkYXRlSW5mbykgPT4gdm9pZCkgPT4gKCkgPT4gdm9pZDtcbiAgb25VcGRhdGVFcnJvcjogKGNhbGxiYWNrOiAoZXJyb3I6IHVua25vd24pID0+IHZvaWQpID0+ICgpID0+IHZvaWQ7XG4gIHJlc29sdmVBc3NldFBhdGg6IChhc3NldFBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICBnZXRSZXNvdXJjZVBhdGg6ICgpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgaXNEZXZlbG9wbWVudDogYm9vbGVhbjtcbiAgcmVzb2x2ZUltYWdlUGF0aDogKGltYWdlUGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIGdldEFzc2V0UGF0aDogKGFzc2V0UGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIGFzc2V0RXhpc3RzOiAoYXNzZXRQYXRoOiBzdHJpbmcpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIGRlYnVnUmVzb3VyY2VzOiAoKSA9PiBQcm9taXNlPGFueT47XG4gIGdldEZpbGVVUkxGb3JBc3NldDogKGFzc2V0UGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIGdldEltYWdlQmFzZTY0OiAocmVsYXRpdmVJbWFnZVBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTxzdHJpbmcgfCBudWxsPjtcbiAgcGxhdGZvcm06IHN0cmluZztcbiAgZ2V0IGlzUGFja2FnZWQoKTogYm9vbGVhbjtcbiAgcmVhZEZpbGU6IChmaWxlUGF0aDogc3RyaW5nLCBlbmNvZGluZzogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIGdldFVzZXJEYXRhUGF0aDogKCkgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICBzaG93T3BlbkRpYWxvZzogKG9wdGlvbnM6IGFueSkgPT4gUHJvbWlzZTxhbnk+O1xufVxuXG4vLyBTUUxpdGUgQVBJ44Gu5a6f6KOFXG5jb25zdCBzcWxpdGVBUEk6IFNRTGl0ZUFQSSA9IHtcbiAgZXhlY3V0ZTogKHNxbCwgcGFyYW1zID0gW10pID0+IGlwY1JlbmRlcmVyLmludm9rZSgnc3FsaXRlLWV4ZWN1dGUnLCBzcWwsIHBhcmFtcyksXG4gIHF1ZXJ5OiAoc3FsLCBwYXJhbXMgPSBbXSkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdzcWxpdGUtcXVlcnknLCBzcWwsIHBhcmFtcyksXG4gIGdldDogKHNxbCwgcGFyYW1zID0gW10pID0+IGlwY1JlbmRlcmVyLmludm9rZSgnc3FsaXRlLWdldCcsIHNxbCwgcGFyYW1zKSxcbn07XG5cbmxldCBpc1BhY2thZ2VkR2xvYmFsID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbmxldCBpc0RldmVsb3BtZW50R2xvYmFsID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbi8vIEFQSeOBruWun+ijhSAo5Z6L5rOo6YeI44KS5YmK6Zmk44GX44Gm5o6o6KuW44Gr5Lu744Gb44KL44GL44CB5b6M44Gn5q2j56K644GqIEVsZWN0cm9uQVBJIOOCkuOBpOOBkeOCiylcbmNvbnN0IGVsZWN0cm9uQVBJID0ge1xuICBsb2FkUnVuRmlsZXM6IChydW5Gb2xkZXJQYXRoOiBzdHJpbmcpID0+IGlwY1JlbmRlcmVyLmludm9rZSgnbG9hZC1ydW4tZmlsZXMnLCBydW5Gb2xkZXJQYXRoKSxcbiAgZ2V0QWxsUnVuczogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtYWxsLXJ1bnMnKSxcbiAgZ2V0VGhlbWU6ICgpID0+IGlwY1JlbmRlcmVyLmludm9rZSgnZ2V0LXRoZW1lJyksXG4gIHNldFRoZW1lOiAodGhlbWU6IHN0cmluZykgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdzZXQtdGhlbWUnLCB0aGVtZSksXG4gIHNlbGVjdEZvbGRlcjogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdzZWxlY3QtZm9sZGVyJyksXG4gIGdldFJ1bkZvbGRlcjogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtcnVuLWZvbGRlcicpLFxuICBvbkxvYWRQcm9ncmVzczogKGNhbGxiYWNrOiAocHJvZ3Jlc3M6IExvYWRQcm9ncmVzcykgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IHByb2dyZXNzSGFuZGxlciA9IChfZXZlbnQ6IGFueSwgZGF0YTogTG9hZFByb2dyZXNzKSA9PiBjYWxsYmFjayhkYXRhKTtcbiAgICBpcGNSZW5kZXJlci5vbignbG9hZC1wcm9ncmVzcycsIHByb2dyZXNzSGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlwY1JlbmRlcmVyLnJlbW92ZUxpc3RlbmVyKCdsb2FkLXByb2dyZXNzJywgcHJvZ3Jlc3NIYW5kbGVyKTtcbiAgICB9O1xuICB9LFxuICBkZWxldGVSdW46IChydW46IGFueSkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdkZWxldGUtcnVuJywgcnVuKSxcbiAgc3FsaXRlOiBzcWxpdGVBUEksXG4gIGNoZWNrRm9yVXBkYXRlczogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdjaGVjay1mb3ItdXBkYXRlcycpLFxuICBzdGFydFVwZGF0ZTogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdzdGFydC11cGRhdGUnKSxcbiAgb25VcGRhdGVBdmFpbGFibGU6IChjYWxsYmFjazogKGluZm86IFVwZGF0ZUluZm8pID0+IHZvaWQpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gKF9ldmVudDogYW55LCBpbmZvOiBVcGRhdGVJbmZvKSA9PiBjYWxsYmFjayhpbmZvKTtcbiAgICBpcGNSZW5kZXJlci5vbigndXBkYXRlLWF2YWlsYWJsZScsIGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcigndXBkYXRlLWF2YWlsYWJsZScsIGhhbmRsZXIpO1xuICAgIH07XG4gIH0sXG4gIG9uVXBkYXRlUHJvZ3Jlc3M6IChjYWxsYmFjazogKGluZm86IFByb2dyZXNzSW5mbykgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoX2V2ZW50OiBhbnksIGluZm86IFByb2dyZXNzSW5mbykgPT4gY2FsbGJhY2soaW5mbyk7XG4gICAgaXBjUmVuZGVyZXIub24oJ2Rvd25sb2FkLXByb2dyZXNzJywgaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlwY1JlbmRlcmVyLnJlbW92ZUxpc3RlbmVyKCdkb3dubG9hZC1wcm9ncmVzcycsIGhhbmRsZXIpO1xuICAgIH07XG4gIH0sXG4gIG9uVXBkYXRlRG93bmxvYWRlZDogKGNhbGxiYWNrOiAoaW5mbzogVXBkYXRlSW5mbykgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoX2V2ZW50OiBhbnksIGluZm86IFVwZGF0ZUluZm8pID0+IGNhbGxiYWNrKGluZm8pO1xuICAgIGlwY1JlbmRlcmVyLm9uKCd1cGRhdGUtZG93bmxvYWRlZCcsIGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcigndXBkYXRlLWRvd25sb2FkZWQnLCBoYW5kbGVyKTtcbiAgICB9O1xuICB9LFxuICBvblVwZGF0ZUVycm9yOiAoY2FsbGJhY2s6IChlcnJvcjogdW5rbm93bikgPT4gdm9pZCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoX2V2ZW50OiBhbnksIGVycm9yOiB1bmtub3duKSA9PiBjYWxsYmFjayhlcnJvcik7XG4gICAgaXBjUmVuZGVyZXIub24oJ3VwZGF0ZS1lcnJvcicsIGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcigndXBkYXRlLWVycm9yJywgaGFuZGxlcik7XG4gICAgfTtcbiAgfSxcbiAgcmVzb2x2ZUFzc2V0UGF0aDogYXN5bmMgKGFzc2V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGlwY1JlbmRlcmVyLmludm9rZSgnZ2V0LWFzc2V0LXBhdGgnLCBhc3NldFBhdGgpO1xuICAgICAgcmV0dXJuIHJlc29sdmVkUGF0aDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIEVycm9yIGluIHJlc29sdmVBc3NldFBhdGg6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGFzc2V0UGF0aDtcbiAgICB9XG4gIH0sXG4gIGdldFJlc291cmNlUGF0aDogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtcmVzb3VyY2UtcGF0aCcpLFxuICBnZXQgaXNEZXZlbG9wbWVudCgpIHsgcmV0dXJuIGlzRGV2ZWxvcG1lbnRHbG9iYWw7IH0sXG4gIGdldCBpc1BhY2thZ2VkKCkgeyByZXR1cm4gaXNQYWNrYWdlZEdsb2JhbDsgfSxcbiAgcGxhdGZvcm06IHByb2Nlc3MucGxhdGZvcm0sXG4gIHJlYWRGaWxlOiAoZmlsZVBhdGg6IHN0cmluZywgZW5jb2Rpbmc6IHN0cmluZyA9ICd1dGY4JykgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdmcy1yZWFkRmlsZScsIGZpbGVQYXRoLCBlbmNvZGluZyksXG4gIGdldFVzZXJEYXRhUGF0aDogKCkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdhcHAtZ2V0UGF0aCcsICd1c2VyRGF0YScpLFxuICBzaG93T3BlbkRpYWxvZzogKG9wdGlvbnM6IGFueSkgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdkaWFsb2ctc2hvd09wZW5EaWFsb2cnLCBvcHRpb25zKSxcbiAgcmVzb2x2ZUltYWdlUGF0aDogKGltYWdlUGF0aDogc3RyaW5nKSA9PiBpcGNSZW5kZXJlci5pbnZva2UoJ3Jlc29sdmUtaW1hZ2UtcGF0aCcsIGltYWdlUGF0aCksXG4gIGdldEFzc2V0UGF0aDogYXN5bmMgKGFzc2V0UGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF0aFJlc3VsdCA9IGF3YWl0IGlwY1JlbmRlcmVyLmludm9rZSgnZ2V0LWFzc2V0LXBhdGgnLCBhc3NldFBhdGgpO1xuICAgICAgcmV0dXJuIHBhdGhSZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1twcmVsb2FkXSBnZXRBc3NldFBhdGgg44Ko44Op44O8OicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfSxcbiAgYXNzZXRFeGlzdHM6IGFzeW5jIChhc3NldFBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCBpcGNSZW5kZXJlci5pbnZva2UoJ2Fzc2V0LWV4aXN0cycsIGFzc2V0UGF0aCk7XG4gICAgICByZXR1cm4gZXhpc3RzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbcHJlbG9hZF0gYXNzZXRFeGlzdHMg44Ko44Op44O8OicsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIGRlYnVnUmVzb3VyY2VzOiBhc3luYyAoKTogUHJvbWlzZTxhbnk+ID0+IGlwY1JlbmRlcmVyLmludm9rZSgnZGVidWctcmVzb3VyY2VzJyksXG4gIGdldEZpbGVVUkxGb3JBc3NldDogYXN5bmMgKGFzc2V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlVXJsID0gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtZmlsZS11cmwtZm9yLWFzc2V0JywgYXNzZXRQYXRoKTtcbiAgICAgIHJldHVybiBmaWxlVXJsIHx8ICcnO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbcHJlbG9hZF0gRXJyb3IgaW4gZ2V0RmlsZVVSTEZvckFzc2V0OicsIGVycm9yKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH0sXG4gIGdldEltYWdlQmFzZTY0OiAocmVsYXRpdmVJbWFnZVBhdGg6IHN0cmluZykgPT4gaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtaW1hZ2UtYmFzZTY0JywgcmVsYXRpdmVJbWFnZVBhdGgpXG59O1xuXG4vLyDlnovjg4Hjgqfjg4Pjgq/nlKggKOmWi+eZuuaZguOBruOBvylcbi8vIGNvbnN0IF9jaGVjazogRWxlY3Ryb25BUEkgPSBlbGVjdHJvbkFQSTtcblxuLy8g5Yid5pyf5YyW5pmC44Gr44Oh44Kk44Oz44OX44Ot44K744K544GL44KJaXNQYWNrYWdlZOODleODqeOCsOOCkuWPluW+l1xuaXBjUmVuZGVyZXIuaW52b2tlKCdpcy1hcHAtcGFja2FnZWQnKS50aGVuKCh2YWx1ZSkgPT4ge1xuICBpc1BhY2thZ2VkR2xvYmFsID0gISF2YWx1ZTtcbiAgaXNEZXZlbG9wbWVudEdsb2JhbCA9ICFpc1BhY2thZ2VkR2xvYmFsO1xuICAvLyBjb25zb2xlLmxvZygnW3ByZWxvYWRdIFJlY2VpdmVkIGlzUGFja2FnZWQgdmFsdWU6JywgaXNQYWNrYWdlZEdsb2JhbCwgJ2lzRGV2ZWxvcG1lbnQ6JywgaXNEZXZlbG9wbWVudEdsb2JhbCk7XG59KTtcblxuY29uc29sZS5sb2coJ1twcmVsb2FkXSBGaW5hbCBlbGVjdHJvbkFQSSBvYmplY3QgYmVmb3JlIGV4cG9zZUluTWFpbldvcmxkOicsIEpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKGVsZWN0cm9uQVBJKSkpO1xuY29uc29sZS5sb2coJ1twcmVsb2FkXSB0eXBlb2YgZWxlY3Ryb25BUEkuZ2V0SW1hZ2VCYXNlNjQgYmVmb3JlIGV4cG9zZTonLCB0eXBlb2YgZWxlY3Ryb25BUEkuZ2V0SW1hZ2VCYXNlNjQpO1xuXG4vLyDjg6HjgqTjg7Pjg5fjg63jgrvjgrnjga7jg63jgrDjgpLlj5fkv6HjgZnjgovjg6rjgrnjg4rjg7zjgpLnmbvpjLJcbmlwY1JlbmRlcmVyLm9uKCdtYWluLXByb2Nlc3MtbG9nJywgKF9ldmVudCwgbG9nRGF0YTogeyBsZXZlbDogc3RyaW5nOyBtZXNzYWdlOiBzdHJpbmc7IGRldGFpbHM/OiBhbnk7IGVycm9yPzogc3RyaW5nIH0pID0+IHtcbiAgY29uc3QgeyBsZXZlbCwgbWVzc2FnZSwgZGV0YWlscywgZXJyb3IgfSA9IGxvZ0RhdGE7XG4gIGNvbnN0IGxvZ01lc3NhZ2UgPSBkZXRhaWxzID8gYCR7bWVzc2FnZX1cXG7oqbPntLA6ICR7SlNPTi5zdHJpbmdpZnkoZGV0YWlscywgbnVsbCwgMil9YCA6IGVycm9yID8gYCR7bWVzc2FnZX1cXG7jgqjjg6njg7w6ICR7ZXJyb3J9YCA6IG1lc3NhZ2U7XG4gIFxuICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgY2FzZSAnZXJyb3InOlxuICAgICAgY29uc29sZS5lcnJvcihgW01haW4gUHJvY2Vzc10gJHtsb2dNZXNzYWdlfWApO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnd2Fybic6XG4gICAgICBjb25zb2xlLndhcm4oYFtNYWluIFByb2Nlc3NdICR7bG9nTWVzc2FnZX1gKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLmxvZyhgW01haW4gUHJvY2Vzc10gJHtsb2dNZXNzYWdlfWApO1xuICB9XG59KTtcblxuLy8gQVBJ44KS44Km44Kj44Oz44OJ44Km44Kq44OW44K444Kn44Kv44OI44Gr5YWs6ZaLXG5jb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKCdlbGVjdHJvbkFQSScsIGVsZWN0cm9uQVBJKTtcblxuLy8g44Ki44K744OD44OI44OZ44O844K544OR44K544KS6Kit5a6aXG4vLyBjb25zdCBnZXRBc3NldEJhc2VQYXRoID0gYXN5bmMgKCkgPT4geyAvLyDjgZPjga7plqLmlbDjgajplqLpgKPjg63jgrjjg4Pjgq/jga9lbGVjdHJvbkFQSeWGheOBq+enu+euoeOBmeOCi+OBi+OAgW1haW7jg5fjg63jgrvjgrnjgafooYzjgYbjgbnjgY3lh6bnkIbjga7jgZ/jgoHkuIDml6bjgrPjg6Hjg7Pjg4jjgqLjgqbjg4hcbi8vICAgaWYgKGlzRGV2ZWxvcG1lbnQpIHtcbi8vICAgICByZXR1cm4gJy9zcmMvYXNzZXRzJztcbi8vICAgfVxuLy8gICBjb25zdCByZXNvdXJjZVBhdGggPSBhd2FpdCBpcGNSZW5kZXJlci5pbnZva2UoJ2dldC1yZXNvdXJjZS1wYXRoJyk7XG4vLyAgIHJldHVybiBgJHtyZXNvdXJjZVBhdGh9L2Fzc2V0c2A7XG4vLyB9O1xuXG4vLyDjgqLjgrvjg4Pjg4jjg5Hjgrnop6Pmsbrjg5jjg6vjg5Hjg7zplqLmlbBcbi8vIGNvbnN0IG5vcm1hbGl6ZUFzc2V0UGF0aCA9IChhc3NldFBhdGg6IHN0cmluZykgPT4geyAvLyDlkIzkuIpcbi8vICAgLy8g5YWI6aCt44Gu44K544Op44OD44K344Ol44KS5YmK6ZmkXG4vLyAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXNzZXRQYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IGFzc2V0UGF0aC5zbGljZSgxKSA6IGFzc2V0UGF0aDtcbi8vICAgLy8gQGNhcmRz44KS5a6f6Zqb44Gu44OR44K544Gr5aSJ5o+bXG4vLyAgIHJldHVybiBub3JtYWxpemVkUGF0aC5yZXBsYWNlKCdAY2FyZHMnLCAnY2FyZHMnKTtcbi8vIH07XG5cbi8vIOS7peS4i+OBriBleHBvc2VJbk1haW5Xb3JsZCDjga8gZWxlY3Ryb25BUEkg44Gr6ZuG57SE44GX44Gf44Gf44KB5YmK6ZmkXG4vLyBjb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKCdfX3Jlc29sdmVBc3NldFBhdGhfXycsIGFzeW5jIChhc3NldFBhdGg6IHN0cmluZykgPT4ge1xuLy8gICB0cnkge1xuLy8gICAgIGNvbnN0IGJhc2VQYXRoID0gYXdhaXQgZ2V0QXNzZXRCYXNlUGF0aCgpO1xuLy8gICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gbm9ybWFsaXplQXNzZXRQYXRoKGFzc2V0UGF0aCk7XG4vLyAgICAgY29uc3QgZnVsbFBhdGggPSBgJHtiYXNlUGF0aH0vJHtub3JtYWxpemVkUGF0aH1gO1xuICAgIFxuLy8gICAgIGNvbnNvbGUubG9nKCdbcHJlbG9hZF0gUmVzb2x2aW5nIGFzc2V0IHBhdGg6Jywge1xuLy8gICAgICAgb3JpZ2luYWw6IGFzc2V0UGF0aCxcbi8vICAgICAgIG5vcm1hbGl6ZWQ6IG5vcm1hbGl6ZWRQYXRoLFxuLy8gICAgICAgYmFzZTogYmFzZVBhdGgsXG4vLyAgICAgICBmdWxsOiBmdWxsUGF0aFxuLy8gICAgIH0pO1xuXG4vLyAgICAgLy8g44OR44K544GM5a2Y5Zyo44GZ44KL44GL56K66KqNXG4vLyAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdhc3NldC1leGlzdHMnLCBmdWxsUGF0aCk7XG4vLyAgICAgaWYgKCFleGlzdHMpIHtcbi8vICAgICAgIGNvbnNvbGUud2FybihgW3ByZWxvYWRdIEFzc2V0IG5vdCBmb3VuZDogJHtmdWxsUGF0aH1gKTtcbi8vICAgICAgIHJldHVybiBudWxsO1xuLy8gICAgIH1cblxuLy8gICAgIHJldHVybiBmdWxsUGF0aDtcbi8vICAgfSBjYXRjaCAoZXJyb3IpIHtcbi8vICAgICBjb25zb2xlLmVycm9yKCdbcHJlbG9hZF0gRXJyb3IgcmVzb2x2aW5nIGFzc2V0IHBhdGg6JywgZXJyb3IpO1xuLy8gICAgIHJldHVybiBudWxsO1xuLy8gICB9XG4vLyB9KTtcblxuLy8g44Ki44K744OD44OI44OZ44O844K544OR44K544KS44Kw44Ot44O844OQ44Or44Gr5YWs6ZaLXG4vLyBnZXRBc3NldEJhc2VQYXRoKCkudGhlbihiYXNlUGF0aCA9PiB7IC8vIOWQjOS4ilxuLy8gICBjb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKCdfX0FTU0VUX0JBU0VfUEFUSF9fJywgYmFzZVBhdGgpO1xuLy8gICBjb25zb2xlLmxvZygnW3ByZWxvYWRdIEFzc2V0IGJhc2UgcGF0aCBzZXQ6JywgYmFzZVBhdGgpO1xuICBcbi8vICAgLy8g44Ki44K744OD44OI44OR44K544Gu5qSc6Ki8XG4vLyAgIGlmIChhcHAuaXNQYWNrYWdlZCkge1xuLy8gICAgIC8vIOODkeODg+OCseODvOOCuOa4iOOBv+eSsOWig+OBp+OBruOCouOCu+ODg+ODiOODkeOCueOBruWtmOWcqOeiuuiqjVxuLy8gICAgIGlwY1JlbmRlcmVyLmludm9rZSgnZGVidWctcmVzb3VyY2VzJylcbi8vICAgICAgIC50aGVuKHJlc291cmNlcyA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCdbcHJlbG9hZF0g44Oq44K944O844K544OR44K55qSc6Ki857WQ5p6cOicsIHJlc291cmNlcyk7XG4vLyAgICAgICAgIC8vIOacieWKueOBquODkeOCueOBjOimi+OBpOOBi+OCieOBquOBi+OBo+OBn+WgtOWQiOOAgeitpuWRiuODreOCsOOCkuWHuuWKm1xuLy8gICAgICAgICBpZiAoIXJlc291cmNlcy52YWxpZGF0ZWRQYXRocyB8fCByZXNvdXJjZXMudmFsaWRhdGVkUGF0aHMubGVuZ3RoID09PSAwKSB7XG4vLyAgICAgICAgICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIOitpuWRijog5pyJ5Yq544Gq44Ki44K744OD44OI44OR44K544GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44GfJyk7XG4vLyAgICAgICAgIH1cbi8vICAgICAgIH0pXG4vLyAgICAgICAuY2F0Y2goZXJyID0+IHtcbi8vICAgICAgICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIOODquOCveODvOOCueODkeOCueaknOiovOOCqOODqeODvDonLCBlcnIpO1xuLy8gICAgICAgfSk7XG4vLyAgIH1cbi8vIH0pLmNhdGNoKGVycm9yID0+IHtcbi8vICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIEVycm9yIHNldHRpbmcgYXNzZXQgYmFzZSBwYXRoOicsIGVycm9yKTtcbi8vICAgY29udGV4dEJyaWRnZS5leHBvc2VJbk1haW5Xb3JsZCgnX19BU1NFVF9CQVNFX1BBVEhfXycsIGFwcC5pc1BhY2thZ2VkID8gJ2Fzc2V0Oi8vJyA6ICcvc3JjL2Fzc2V0cycpO1xuLy8gfSk7XG5cbi8vIEVsZWN0cm9u44Gu55Kw5aKD5oOF5aCx44KS5YWs6ZaLXG4vLyBjb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKCdlbGVjdHJvbicsIHsgLy8g5ZCM5LiKXG4vLyAgIHBsYXRmb3JtOiBwcm9jZXNzLnBsYXRmb3JtLFxuLy8gICBnZXQgaXNEZXZlbG9wbWVudCgpIHtcbi8vICAgICByZXR1cm4gaXNEZXZlbG9wbWVudDtcbi8vICAgfSxcbi8vICAgZ2V0IGlzUGFja2FnZWQoKSB7XG4vLyAgICAgcmV0dXJuIGlzUGFja2FnZWQ7XG4vLyAgIH0sXG4vLyAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbi8vICAgZ2V0QXNzZXRQYXRoOiBhc3luYyAoYXNzZXRQYXRoOiBzdHJpbmcpID0+IHtcbi8vICAgICB0cnkge1xuLy8gICAgICAgY29uc3QgcmVzb2x2ZWRQYXRoID0gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtYXNzZXQtcGF0aCcsIGFzc2V0UGF0aCk7XG4vLyAgICAgICBjb25zb2xlLmxvZygnW3ByZWxvYWRdIFJlc29sdmVkIGFzc2V0IHBhdGg6JywgeyBhc3NldFBhdGgsIHJlc29sdmVkUGF0aCB9KTtcbiAgICAgIFxuLy8gICAgICAgLy8g44Ki44K744OD44OI44OX44Ot44OI44Kz44Or5aSJ5o+bIChmaWxlOi8vIOOBi+OCiSBhc3NldDovLyDjgaspXG4vLyAgICAgICBpZiAoYXBwLmlzUGFja2FnZWQgJiYgcmVzb2x2ZWRQYXRoLnN0YXJ0c1dpdGgoJ2ZpbGU6Ly8nKSkge1xuLy8gICAgICAgICByZXR1cm4gcmVzb2x2ZWRQYXRoLnJlcGxhY2UoJ2ZpbGU6Ly8nLCAnYXNzZXQ6Ly8nKTtcbi8vICAgICAgIH1cbiAgICAgIFxuLy8gICAgICAgcmV0dXJuIHJlc29sdmVkUGF0aDtcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIEVycm9yIGdldHRpbmcgYXNzZXQgcGF0aDonLCBlcnJvcik7XG4vLyAgICAgICB0aHJvdyBlcnJvcjtcbi8vICAgICB9XG4vLyAgIH0sXG4gIFxuLy8gICAvLyDjgqLjgrvjg4Pjg4jjga7lrZjlnKjnorroqo1cbi8vICAgYXNzZXRFeGlzdHM6IGFzeW5jIChhc3NldFBhdGg6IHN0cmluZykgPT4ge1xuLy8gICAgIHRyeSB7XG4vLyAgICAgICByZXR1cm4gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdhc3NldC1leGlzdHMnLCBhc3NldFBhdGgpO1xuLy8gICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4vLyAgICAgICBjb25zb2xlLmVycm9yKCdbcHJlbG9hZF0gRXJyb3IgY2hlY2tpbmcgYXNzZXQgZXhpc3RlbmNlOicsIGVycm9yKTtcbi8vICAgICAgIHJldHVybiBmYWxzZTtcbi8vICAgICB9XG4vLyAgIH0sXG4vLyAgIGdldEZpbGVVUkxGb3JBc3NldDogYXN5bmMgKGFzc2V0UGF0aDogc3RyaW5nKSA9PiB7XG4vLyAgICAgdHJ5IHtcbi8vICAgICAgIGNvbnNvbGUubG9nKCdbcHJlbG9hZF0gZ2V0RmlsZVVSTEZvckFzc2V0IGNhbGxlZCBmb3I6JywgYXNzZXRQYXRoKTtcbiAgICAgIFxuLy8gICAgICAgLy8g5paw44GX44GEQVBJ44KS44G+44Ga6Kmm44GZXG4vLyAgICAgICB0cnkge1xuLy8gICAgICAgICBjb25zdCBmaWxlVXJsID0gYXdhaXQgaXBjUmVuZGVyZXIuaW52b2tlKCdnZXQtZmlsZS11cmwtZm9yLWFzc2V0JywgYXNzZXRQYXRoKTtcbi8vICAgICAgICAgaWYgKGZpbGVVcmwpIHtcbi8vICAgICAgICAgICBjb25zb2xlLmxvZygnW3ByZWxvYWRdIEdlbmVyYXRlZCBmaWxlIFVSTCBmcm9tIG1haW4gcHJvY2VzczonLCBmaWxlVXJsKTtcbi8vICAgICAgICAgICByZXR1cm4gZmlsZVVybDtcbi8vICAgICAgICAgfVxuLy8gICAgICAgfSBjYXRjaCAobWFpblByb2Nlc3NFcnJvcikge1xuLy8gICAgICAgICBjb25zb2xlLmVycm9yKCdbcHJlbG9hZF0gRXJyb3IgZ2V0dGluZyBmaWxlIFVSTCBmcm9tIG1haW4gcHJvY2VzczonLCBtYWluUHJvY2Vzc0Vycm9yKTtcbi8vICAgICAgIH1cbiAgICAgIFxuLy8gICAgICAgLy8g44OV44Kp44O844Or44OQ44OD44KvOiDntbblr77jg5HjgrnjgpLlj5blvpfjgZfjgabmiYvli5XjgadVUkzjgpLmp4vnr4lcbi8vICAgICAgIGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGlwY1JlbmRlcmVyLmludm9rZSgnZ2V0LWFzc2V0LXBhdGgnLCBhc3NldFBhdGgpO1xuLy8gICAgICAgY29uc29sZS5sb2coJ1twcmVsb2FkXSBSZXNvbHZlZCBwYXRoOicsIHJlc29sdmVkUGF0aCk7XG4gICAgICBcbi8vICAgICAgIC8vIOODleOCoeOCpOODq+OBruWtmOWcqOeiuuiqjVxuLy8gICAgICAgaWYgKGZzLmV4aXN0c1N5bmMocmVzb2x2ZWRQYXRoKSkge1xuLy8gICAgICAgICAvLyBtYWNPU+OBp+OBr+OAgeODleOCoeOCpOODq+ODkeOCueOCkuato+OBl+OBhOW9ouW8j+OBq+WkieaPm+OBmeOCi+W/heimgeOBjOOBguOCi1xuLy8gICAgICAgICAvLyAnZmlsZTovLycgKyDjg5Hjgrnjga7lvaLlvI/jgpLkvb/nlKhcbi8vICAgICAgICAgLy8gVVJM44Ko44Oz44Kz44O844OJ44GX44Gm44OR44K55YaF44Gu44K544Oa44O844K544Gq44Gp44KS5Yem55CGXG4vLyAgICAgICAgIGNvbnN0IGZpbGVVUkwgPSBgZmlsZTovLyR7cmVzb2x2ZWRQYXRoLnJlcGxhY2UoL1xccy9nLCAnJTIwJyl9YDtcbi8vICAgICAgICAgY29uc29sZS5sb2coJ1twcmVsb2FkXSBHZW5lcmF0ZWQgZmlsZSBVUkwgbWFudWFsbHk6JywgZmlsZVVSTCk7XG4vLyAgICAgICAgIHJldHVybiBmaWxlVVJMO1xuLy8gICAgICAgfVxuICAgICAgXG4vLyAgICAgICAvLyDku6Pmm7/jg5HjgrnjgpLoqabjgZkgLSBSZXNvdXJjZXPjg5Xjgqnjg6vjg4DjgYvjgonjga7ntbblr77jg5Hjgrlcbi8vICAgICAgIGNvbnN0IHJlc291cmNlc1BhdGggPSBhd2FpdCBpcGNSZW5kZXJlci5pbnZva2UoJ2dldC1yZXNvdXJjZS1wYXRoJyk7XG4vLyAgICAgICBjb25zdCBhbHRlcm5hdGl2ZVBhdGggPSBwYXRoLmpvaW4ocmVzb3VyY2VzUGF0aCwgJ2Fzc2V0cycsIGFzc2V0UGF0aCk7XG4gICAgICBcbi8vICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGFsdGVybmF0aXZlUGF0aCkpIHtcbi8vICAgICAgICAgY29uc3QgZmlsZVVSTCA9IGBmaWxlOi8vJHthbHRlcm5hdGl2ZVBhdGgucmVwbGFjZSgvXFxzL2csICclMjAnKX1gO1xuLy8gICAgICAgICBjb25zb2xlLmxvZygnW3ByZWxvYWRdIEdlbmVyYXRlZCBhbHRlcm5hdGl2ZSBmaWxlIFVSTDonLCBmaWxlVVJMKTtcbi8vICAgICAgICAgcmV0dXJuIGZpbGVVUkw7XG4vLyAgICAgICB9XG4gICAgICBcbi8vICAgICAgIGNvbnNvbGUud2FybignW3ByZWxvYWRdIEZpbGUgZG9lcyBub3QgZXhpc3QgaW4gYW55IGxvY2F0aW9uOicsIHtcbi8vICAgICAgICAgcHJpbWFyeVBhdGg6IHJlc29sdmVkUGF0aCxcbi8vICAgICAgICAgYWx0ZXJuYXRpdmVQYXRoXG4vLyAgICAgICB9KTtcbi8vICAgICAgIHJldHVybiAnJztcbi8vICAgICB9IGNhdGNoIChlcnJvcikge1xuLy8gICAgICAgY29uc29sZS5lcnJvcignW3ByZWxvYWRdIEVycm9yIGluIGdldEZpbGVVUkxGb3JBc3NldDonLCBlcnJvcik7XG4vLyAgICAgICByZXR1cm4gJyc7XG4vLyAgICAgfVxuLy8gICB9XG4vLyB9KTtcblxuLy8g44Ki44OX44Oq44Kx44O844K344On44Oz6Kit5a6a44Ot44O844OJXG4vLyAuLi4gZXhpc3RpbmcgY29kZSAuLi4gIl0sIm5hbWVzIjpbImlwY1JlbmRlcmVyIiwiY29udGV4dEJyaWRnZSJdLCJtYXBwaW5ncyI6Ijs7QUEyRUEsTUFBTSxZQUF1QjtBQUFBLEVBQzNCLFNBQVMsQ0FBQyxLQUFLLFNBQVMsT0FBT0EsU0FBWSxZQUFBLE9BQU8sa0JBQWtCLEtBQUssTUFBTTtBQUFBLEVBQy9FLE9BQU8sQ0FBQyxLQUFLLFNBQVMsT0FBT0EsU0FBWSxZQUFBLE9BQU8sZ0JBQWdCLEtBQUssTUFBTTtBQUFBLEVBQzNFLEtBQUssQ0FBQyxLQUFLLFNBQVMsQ0FBQSxNQUFPQSxTQUFBQSxZQUFZLE9BQU8sY0FBYyxLQUFLLE1BQU07QUFDekU7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
